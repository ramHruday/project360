{"version":3,"file":"static/js/193.90036392.chunk.js","mappings":"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","sources":["../node_modules/@react-three/drei/core/BBAnchor.js","../node_modules/three-stdlib/lines/LineSegmentsGeometry.js","../node_modules/three-stdlib/lines/LineMaterial.js","../node_modules/three-stdlib/lines/LineSegments2.js","../node_modules/three-stdlib/lines/LineGeometry.js","../node_modules/three-stdlib/lines/Line2.js","../node_modules/@react-three/drei/core/Line.js","../node_modules/@react-three/drei/core/QuadraticBezierLine.js","../node_modules/@react-three/drei/core/meshBounds.js","../node_modules/three-mesh-bvh/src/utils/ThreeRayIntersectUtilities.js","../node_modules/three-mesh-bvh/src/utils/GeometryRayIntersectUtilities.js","../node_modules/three-mesh-bvh/src/core/Constants.js","../node_modules/three-mesh-bvh/src/core/MeshBVHNode.js","../node_modules/three-mesh-bvh/src/utils/ArrayBoxUtilities.js","../node_modules/three-mesh-bvh/src/core/buildFunctions.js","../node_modules/three-mesh-bvh/src/math/SeparatingAxisBounds.js","../node_modules/three-mesh-bvh/src/math/MathUtilities.js","../node_modules/three-mesh-bvh/src/math/ExtendedTriangle.js","../node_modules/three-mesh-bvh/src/math/OrientedBox.js","../node_modules/three-mesh-bvh/src/utils/TriangleUtilities.js","../node_modules/three-mesh-bvh/src/utils/PrimitivePool.js","../node_modules/three-mesh-bvh/src/core/nodeBufferFunctions.js","../node_modules/three-mesh-bvh/src/core/castFunctions.js","../node_modules/three-mesh-bvh/src/core/MeshBVH.js","../node_modules/three-mesh-bvh/src/utils/ExtensionUtilities.js","../node_modules/@react-three/drei/core/useBVH.js","../node_modules/three-stdlib/interactive/SelectionBox.js","../node_modules/@react-three/drei/web/Select.js","../node_modules/@react-three/drei/web/useCursor.js","../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","../node_modules/@babel/runtime/helpers/esm/set.js","../node_modules/postprocessing/build/postprocessing.esm.js","../node_modules/three-stdlib/misc/WebGL.js","../node_modules/@react-three/postprocessing/dist/index.js"],"sourcesContent":["import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { useFrame } from '@react-three/fiber';\n\nconst boundingBox = new THREE.Box3();\nconst boundingBoxSize = new THREE.Vector3();\nconst BBAnchor = ({\n  anchor,\n  ...props\n}) => {\n  const ref = React.useRef(null);\n  const parentRef = React.useRef(null); // Reattach group created by this component to the parent's parent,\n  // so it becomes a sibling of its initial parent.\n  // We do that so the children have no impact on a bounding box of a parent.\n\n  React.useEffect(() => {\n    var _ref$current, _ref$current$parent;\n\n    if ((_ref$current = ref.current) != null && (_ref$current$parent = _ref$current.parent) != null && _ref$current$parent.parent) {\n      parentRef.current = ref.current.parent;\n      ref.current.parent.parent.add(ref.current);\n    }\n  }, []);\n  useFrame(() => {\n    if (parentRef.current) {\n      boundingBox.setFromObject(parentRef.current);\n      boundingBox.getSize(boundingBoxSize);\n      ref.current.position.set(parentRef.current.position.x + boundingBoxSize.x * anchor[0] / 2, parentRef.current.position.y + boundingBoxSize.y * anchor[1] / 2, parentRef.current.position.z + boundingBoxSize.z * anchor[2] / 2);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: ref\n  }, props));\n};\n\nexport { BBAnchor };\n","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { InstancedBufferGeometry, Box3, Vector3, Float32BufferAttribute, InstancedInterleavedBuffer, InterleavedBufferAttribute, WireframeGeometry, Sphere } from 'three';\n\nclass LineSegmentsGeometry extends InstancedBufferGeometry {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"isLineSegmentsGeometry\", true);\n\n    _defineProperty(this, \"type\", 'LineSegmentsGeometry');\n\n    _defineProperty(this, \"boundingBox\", null);\n\n    _defineProperty(this, \"boundingSphere\", null);\n\n    _defineProperty(this, \"box\", new Box3());\n\n    _defineProperty(this, \"vector\", new Vector3());\n\n    const positions = [-1, 2, 0, 1, 2, 0, -1, 1, 0, 1, 1, 0, -1, 0, 0, 1, 0, 0, -1, -1, 0, 1, -1, 0];\n    const uvs = [-1, 2, 1, 2, -1, 1, 1, 1, -1, -1, 1, -1, -1, -2, 1, -2];\n    const index = [0, 2, 1, 2, 3, 1, 2, 4, 3, 4, 5, 3, 4, 6, 5, 6, 7, 5];\n    this.setIndex(index);\n    this.setAttribute('position', new Float32BufferAttribute(positions, 3));\n    this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n  }\n\n  applyMatrix4(matrix) {\n    const start = this.attributes.instanceStart;\n    const end = this.attributes.instanceEnd;\n\n    if (start !== undefined) {\n      start.applyMatrix4(matrix);\n      end.applyMatrix4(matrix);\n      start.needsUpdate = true;\n    }\n\n    if (this.boundingBox !== null) {\n      this.computeBoundingBox();\n    }\n\n    if (this.boundingSphere !== null) {\n      this.computeBoundingSphere();\n    }\n\n    return this;\n  }\n\n  setPositions(array) {\n    let lineSegments;\n\n    if (array instanceof Float32Array) {\n      lineSegments = array;\n    } else if (Array.isArray(array)) {\n      lineSegments = new Float32Array(array);\n    } else {\n      console.error('LineSegmentsGeometry.setPosition requires either a Float32Array or regular array of numbers');\n      return this;\n    }\n\n    const instanceBuffer = new InstancedInterleavedBuffer(lineSegments, 6, 1); // xyz, xyz\n\n    this.setAttribute('instanceStart', new InterleavedBufferAttribute(instanceBuffer, 3, 0)); // xyz\n\n    this.setAttribute('instanceEnd', new InterleavedBufferAttribute(instanceBuffer, 3, 3)); // xyz\n    //\n\n    this.computeBoundingBox();\n    this.computeBoundingSphere();\n    return this;\n  }\n\n  setColors(array) {\n    let colors;\n\n    if (array instanceof Float32Array) {\n      colors = array;\n    } else if (Array.isArray(array)) {\n      colors = new Float32Array(array);\n    } else {\n      console.error('LineSegmentsGeometry.setColors requires either a Float32Array or regular array of numbers');\n      return this;\n    }\n\n    const instanceColorBuffer = new InstancedInterleavedBuffer(colors, 6, 1); // rgb, rgb\n\n    this.setAttribute('instanceColorStart', new InterleavedBufferAttribute(instanceColorBuffer, 3, 0)); // rgb\n\n    this.setAttribute('instanceColorEnd', new InterleavedBufferAttribute(instanceColorBuffer, 3, 3)); // rgb\n\n    return this;\n  }\n\n  fromWireframeGeometry(geometry) {\n    this.setPositions(Array.from(geometry.attributes.position.array));\n    return this;\n  }\n\n  fromEdgesGeometry(geometry) {\n    this.setPositions(Array.from(geometry.attributes.position.array));\n    return this;\n  }\n\n  fromMesh(mesh) {\n    this.fromWireframeGeometry(new WireframeGeometry(mesh.geometry));\n    return this;\n  }\n\n  fromLineSegments(lineSegments) {\n    const geometry = lineSegments.geometry;\n\n    if (geometry.isBufferGeometry) {\n      this.setPositions(Array.from(geometry.attributes.position.array)); // assumes non-indexed\n    } // set colors, maybe\n\n\n    return this;\n  }\n\n  computeBoundingBox() {\n    if (this.boundingBox === null) {\n      this.boundingBox = new Box3();\n    }\n\n    const start = this.attributes.instanceStart;\n    const end = this.attributes.instanceEnd;\n\n    if (start !== undefined && end !== undefined) {\n      this.boundingBox.setFromBufferAttribute(start);\n      this.box.setFromBufferAttribute(end);\n      this.boundingBox.union(this.box);\n    }\n  }\n\n  computeBoundingSphere() {\n    if (this.boundingSphere === null) {\n      this.boundingSphere = new Sphere();\n    }\n\n    if (this.boundingBox === null) {\n      this.computeBoundingBox();\n    }\n\n    const start = this.attributes.instanceStart;\n    const end = this.attributes.instanceEnd;\n\n    if (start !== undefined && end !== undefined) {\n      const center = this.boundingSphere.center;\n\n      if (this.boundingBox) {\n        this.boundingBox.getCenter(center);\n      }\n\n      let maxRadiusSq = 0;\n\n      for (let i = 0, il = start.count; i < il; i++) {\n        this.vector.fromBufferAttribute(start, i);\n        maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(this.vector));\n        this.vector.fromBufferAttribute(end, i);\n        maxRadiusSq = Math.max(maxRadiusSq, center.distanceToSquared(this.vector));\n      }\n\n      this.boundingSphere.radius = Math.sqrt(maxRadiusSq);\n\n      if (isNaN(this.boundingSphere.radius)) {\n        console.error('THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.', this);\n      }\n    }\n  }\n\n  toJSON() {// todo\n  }\n\n}\n\nexport { LineSegmentsGeometry };\n","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Vector2, ShaderLib, UniformsUtils, UniformsLib, ShaderMaterial, Color } from 'three';\n\n/**\n * parameters = {\n *  color: <hex>,\n *  linewidth: <float>,\n *  dashed: <boolean>,\n *  dashScale: <float>,\n *  dashSize: <float>,\n *  dashOffset: <float>,\n *  gapSize: <float>,\n *  resolution: <Vector2>, // to be set by renderer\n * }\n */\nconst LineUniforms = {\n  linewidth: {\n    value: 1\n  },\n  resolution: {\n    value: new Vector2(1, 1)\n  },\n  dashScale: {\n    value: 1\n  },\n  dashSize: {\n    value: 1\n  },\n  dashOffset: {\n    value: 0\n  },\n  gapSize: {\n    value: 1\n  },\n  // todo FIX - maybe change to totalSize\n  opacity: {\n    value: 1\n  }\n};\nShaderLib['line'] = {\n  uniforms: UniformsUtils.merge([UniformsLib.common, UniformsLib.fog, LineUniforms]),\n  vertexShader:\n  /* glsl */\n  `\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t`,\n  fragmentShader:\n  /* glsl */\n  `\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef ALPHA_TO_COVERAGE\n\n\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\tfloat a = vUv.x;\n\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\tfloat len2 = a * a + b * b;\n\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t}\n\n\t\t\t#else\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t`\n};\n\nclass LineMaterial extends ShaderMaterial {\n  constructor(parameters = {}) {\n    super({\n      uniforms: UniformsUtils.clone(ShaderLib['line'].uniforms),\n      vertexShader: ShaderLib['line'].vertexShader,\n      fragmentShader: ShaderLib['line'].fragmentShader,\n      clipping: true // required for clipping support\n\n    });\n    /**\n     * Everytime I remove this, everything just breaks,\n     * so I'm just gonna leave it here.\n     */\n\n    _defineProperty(this, \"isLineMaterial\", true);\n\n    _defineProperty(this, \"dashed\", false);\n\n    _defineProperty(this, \"color\", new Color(0x000000));\n\n    _defineProperty(this, \"lineWidth\", 0);\n\n    _defineProperty(this, \"dashScale\", 0);\n\n    _defineProperty(this, \"dashOffset\", 0);\n\n    _defineProperty(this, \"dashSize\", 0);\n\n    _defineProperty(this, \"opacity\", 0);\n\n    _defineProperty(this, \"resolution\", new Vector2());\n\n    _defineProperty(this, \"alphaToCoverage\", false);\n\n    Object.defineProperties(this, {\n      color: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.diffuse.value;\n        },\n        set: function (value) {\n          const colorObj = new Color(value);\n          this.uniforms.diffuse.value = colorObj.getHex();\n        }\n      },\n      linewidth: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.linewidth.value;\n        },\n        set: function (value) {\n          this.uniforms.linewidth.value = value;\n        }\n      },\n      dashScale: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.dashScale.value;\n        },\n        set: function (value) {\n          this.uniforms.dashScale.value = value;\n        }\n      },\n      dashSize: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.dashSize.value;\n        },\n        set: function (value) {\n          this.uniforms.dashSize.value = value;\n        }\n      },\n      dashOffset: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.dashOffset.value;\n        },\n        set: function (value) {\n          this.uniforms.dashOffset.value = value;\n        }\n      },\n      gapSize: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.gapSize.value;\n        },\n        set: function (value) {\n          this.uniforms.gapSize.value = value;\n        }\n      },\n      opacity: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.opacity.value;\n        },\n        set: function (value) {\n          this.uniforms.opacity.value = value;\n        }\n      },\n      resolution: {\n        enumerable: true,\n        get: function () {\n          return this.uniforms.resolution.value;\n        },\n        set: function (value) {\n          this.uniforms.resolution.value.copy(value);\n        }\n      },\n      alphaToCoverage: {\n        enumerable: true,\n        get: function () {\n          return Boolean('ALPHA_TO_COVERAGE' in this.defines);\n        },\n        set: function (value) {\n          if (Boolean(value) !== Boolean('ALPHA_TO_COVERAGE' in this.defines)) {\n            this.needsUpdate = true;\n          }\n\n          if (value) {\n            this.defines.ALPHA_TO_COVERAGE = '';\n            this.extensions.derivatives = true;\n          } else {\n            delete this.defines.ALPHA_TO_COVERAGE;\n            this.extensions.derivatives = false;\n          }\n        }\n      },\n      dashed: {\n        enumerable: true,\n        get: function () {\n          return Boolean('USE_DASH' in this.defines);\n        },\n        set: function (value) {\n          if (Boolean(value) !== Boolean('USE_DASH' in this.defines)) {\n            this.needsUpdate = true;\n          }\n\n          if (value) {\n            this.defines.USE_DASH = '';\n          } else {\n            delete this.defines.USE_DASH;\n          }\n        }\n      }\n    });\n    this.setValues(parameters);\n  }\n\n}\n\nexport { LineMaterial };\n","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { Mesh, Vector3, InstancedInterleavedBuffer, InterleavedBufferAttribute, Vector4, Matrix4, Line3, MathUtils } from 'three';\nimport { LineSegmentsGeometry } from './LineSegmentsGeometry.js';\nimport { LineMaterial } from './LineMaterial.js';\n\nclass LineSegments2 extends Mesh {\n  constructor(_geometry = new LineSegmentsGeometry(), _material = new LineMaterial({\n    color: Math.random() * 0xffffff\n  })) {\n    super(_geometry, _material);\n\n    _defineProperty(this, \"type\", 'LineSegments2');\n\n    _defineProperty(this, \"isLineSegments2\", true);\n\n    _defineProperty(this, \"distStart\", new Vector3());\n\n    _defineProperty(this, \"distEnd\", new Vector3());\n\n    _defineProperty(this, \"computeLineDistances\", () => {\n      const geometry = this.geometry;\n      const instanceStart = geometry.attributes.instanceStart;\n      const instanceEnd = geometry.attributes.instanceEnd;\n      const lineDistances = new Float32Array(2 * instanceStart.data.count);\n\n      for (let i = 0, j = 0, l = instanceStart.data.count; i < l; i++, j += 2) {\n        this.distStart.fromBufferAttribute(instanceStart, i);\n        this.distEnd.fromBufferAttribute(instanceEnd, i);\n        lineDistances[j] = j === 0 ? 0 : lineDistances[j - 1];\n        lineDistances[j + 1] = lineDistances[j] + this.distStart.distanceTo(this.distEnd);\n      }\n\n      const instanceDistanceBuffer = new InstancedInterleavedBuffer(lineDistances, 2, 1); // d0, d1\n\n      geometry.setAttribute('instanceDistanceStart', new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 0)); // d0\n\n      geometry.setAttribute('instanceDistanceEnd', new InterleavedBufferAttribute(instanceDistanceBuffer, 1, 1)); // d1\n\n      return this;\n    });\n\n    _defineProperty(this, \"rayStart\", new Vector4());\n\n    _defineProperty(this, \"rayEnd\", new Vector4());\n\n    _defineProperty(this, \"ssOrigin\", new Vector4());\n\n    _defineProperty(this, \"ssOrigin3\", new Vector3());\n\n    _defineProperty(this, \"mvMatrix\", new Matrix4());\n\n    _defineProperty(this, \"line\", new Line3());\n\n    _defineProperty(this, \"closestPoint\", new Vector3());\n\n    _defineProperty(this, \"raycast\", (raycaster, intersects) => {\n      if (raycaster.camera === null) {\n        console.error('LineSegments2: \"Raycaster.camera\" needs to be set in order to raycast against LineSegments2.');\n      }\n\n      const threshold = 0;\n      const ray = raycaster.ray;\n      const camera = raycaster.camera;\n      const projectionMatrix = camera.projectionMatrix;\n      const geometry = this.geometry;\n      const material = this.material;\n      const resolution = material.resolution;\n      const lineWidth = material.linewidth + threshold;\n      const instanceStart = geometry.attributes.instanceStart;\n      const instanceEnd = geometry.attributes.instanceEnd; // camera forward is negative\n\n      const near = -camera.near; // pick a point 1 unit out along the ray to avoid the ray origin\n      // sitting at the camera origin which will cause \"w\" to be 0 when\n      // applying the projection matrix.\n\n      ray.at(1, this.ssOrigin); // ndc space [ - 1.0, 1.0 ]\n\n      this.ssOrigin.w = 1;\n      this.ssOrigin.applyMatrix4(camera.matrixWorldInverse);\n      this.ssOrigin.applyMatrix4(projectionMatrix);\n      this.ssOrigin.multiplyScalar(1 / this.ssOrigin.w); // screen space\n\n      this.ssOrigin.x *= resolution.x / 2;\n      this.ssOrigin.y *= resolution.y / 2;\n      this.ssOrigin.z = 0;\n      this.ssOrigin3.set(this.ssOrigin.x, this.ssOrigin.y, this.ssOrigin.z);\n      const matrixWorld = this.matrixWorld;\n      this.mvMatrix.multiplyMatrices(camera.matrixWorldInverse, matrixWorld);\n\n      for (let i = 0, l = instanceStart.count; i < l; i++) {\n        this.rayStart.fromBufferAttribute(instanceStart, i);\n        this.rayEnd.fromBufferAttribute(instanceEnd, i);\n        this.rayStart.w = 1;\n        this.rayEnd.w = 1; // camera space\n\n        this.rayStart.applyMatrix4(this.mvMatrix);\n        this.rayEnd.applyMatrix4(this.mvMatrix); // skip the segment if it's entirely behind the camera\n\n        const isBehindCameraNear = this.rayStart.z > near && this.rayEnd.z > near;\n\n        if (isBehindCameraNear) {\n          continue;\n        } // trim the segment if it extends behind camera near\n\n\n        if (this.rayStart.z > near) {\n          const deltaDist = this.rayStart.z - this.rayEnd.z;\n          const t = (this.rayStart.z - near) / deltaDist;\n          this.rayStart.lerp(this.rayEnd, t);\n        } else if (this.rayEnd.z > near) {\n          const deltaDist = this.rayEnd.z - this.rayStart.z;\n          const t = (this.rayEnd.z - near) / deltaDist;\n          this.rayEnd.lerp(this.rayStart, t);\n        } // clip space\n\n\n        this.rayStart.applyMatrix4(projectionMatrix);\n        this.rayEnd.applyMatrix4(projectionMatrix); // ndc space [ - 1.0, 1.0 ]\n\n        this.rayStart.multiplyScalar(1 / this.rayStart.w);\n        this.rayEnd.multiplyScalar(1 / this.rayEnd.w); // screen space\n\n        this.rayStart.x *= resolution.x / 2;\n        this.rayStart.y *= resolution.y / 2;\n        this.rayEnd.x *= resolution.x / 2;\n        this.rayEnd.y *= resolution.y / 2; // create 2d segment\n\n        this.line.start.set(this.rayStart.x, this.rayStart.y, this.rayStart.z);\n        this.line.start.z = 0;\n        this.line.end.set(this.rayEnd.x, this.rayEnd.y, this.rayEnd.z);\n        this.line.end.z = 0; // get closest point on ray to segment\n\n        const param = this.line.closestPointToPointParameter(this.ssOrigin3, true);\n        this.line.at(param, this.closestPoint); // check if the intersection point is within clip space\n\n        const zPos = MathUtils.lerp(this.rayStart.z, this.rayEnd.z, param);\n        const isInClipSpace = zPos >= -1 && zPos <= 1;\n        const isInside = this.ssOrigin3.distanceTo(this.closestPoint) < lineWidth * 0.5;\n\n        if (isInClipSpace && isInside) {\n          this.line.start.fromBufferAttribute(instanceStart, i);\n          this.line.end.fromBufferAttribute(instanceEnd, i);\n          this.line.start.applyMatrix4(matrixWorld);\n          this.line.end.applyMatrix4(matrixWorld);\n          const pointOnLine = new Vector3();\n          const point = new Vector3();\n          ray.distanceSqToSegment(this.line.start, this.line.end, point, pointOnLine);\n          intersects.push({\n            distance: ray.origin.distanceTo(point),\n            point: point,\n            face: null,\n            faceIndex: i,\n            object: this,\n            uv: undefined,\n            pointOnLine\n          });\n        }\n      }\n    });\n  }\n\n}\n\nexport { LineSegments2 };\n","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { LineSegmentsGeometry } from './LineSegmentsGeometry.js';\n\nclass LineGeometry extends LineSegmentsGeometry {\n  constructor() {\n    super();\n\n    _defineProperty(this, \"type\", 'LineGeometry');\n\n    _defineProperty(this, \"isLineGeometry\", true);\n\n    _defineProperty(this, \"setColors\", array => {\n      // converts [ r1, g1, b1,  r2, g2, b2, ... ] to pairs format\n      const length = array.length - 3;\n      const colors = new Float32Array(2 * length);\n\n      for (let i = 0; i < length; i += 3) {\n        colors[2 * i] = array[i];\n        colors[2 * i + 1] = array[i + 1];\n        colors[2 * i + 2] = array[i + 2];\n        colors[2 * i + 3] = array[i + 3];\n        colors[2 * i + 4] = array[i + 4];\n        colors[2 * i + 5] = array[i + 5];\n      }\n\n      super.setColors(colors);\n      return this;\n    });\n\n    _defineProperty(this, \"fromLine\", line => {\n      const geometry = line.geometry;\n\n      if (geometry.isBufferGeometry) {\n        this.setPositions(Array.from(geometry.attributes.position.array)); // assumes non-indexed\n      } // set colors, maybe\n\n\n      return this;\n    });\n\n    _defineProperty(this, \"copy\", () => {\n      // todo\n      return this;\n    });\n  }\n\n  setPositions(array) {\n    // converts [ x1, y1, z1,  x2, y2, z2, ... ] to pairs format\n    const length = array.length - 3;\n    const points = new Float32Array(2 * length);\n\n    for (let i = 0; i < length; i += 3) {\n      points[2 * i] = array[i];\n      points[2 * i + 1] = array[i + 1];\n      points[2 * i + 2] = array[i + 2];\n      points[2 * i + 3] = array[i + 3];\n      points[2 * i + 4] = array[i + 4];\n      points[2 * i + 5] = array[i + 5];\n    }\n\n    super.setPositions(points);\n    return this;\n  }\n\n}\n\nexport { LineGeometry };\n","import _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport { LineSegments2 } from './LineSegments2.js';\nimport { LineGeometry } from './LineGeometry.js';\nimport { LineMaterial } from './LineMaterial.js';\n\nclass Line2 extends LineSegments2 {\n  constructor(geometry = new LineGeometry(), material = new LineMaterial({\n    color: Math.random() * 0xffffff\n  })) {\n    super(geometry, material);\n\n    _defineProperty(this, \"type\", 'Line2');\n\n    _defineProperty(this, \"isLine2\", true);\n  }\n\n}\n\nexport { Line2 };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector2, Vector3, Color } from 'three';\nimport { Line2, LineMaterial, LineGeometry } from 'three-stdlib';\n\nconst Line = /*#__PURE__*/React.forwardRef(function Line({\n  points,\n  color = 'black',\n  vertexColors,\n  lineWidth,\n  dashed,\n  ...rest\n}, ref) {\n  const [line2] = React.useState(() => new Line2());\n  const [lineMaterial] = React.useState(() => new LineMaterial());\n  const [resolution] = React.useState(() => new Vector2(512, 512));\n  const lineGeom = React.useMemo(() => {\n    const geom = new LineGeometry();\n    const pValues = points.map(p => p instanceof Vector3 ? p.toArray() : p);\n    geom.setPositions(pValues.flat());\n\n    if (vertexColors) {\n      const cValues = vertexColors.map(c => c instanceof Color ? c.toArray() : c);\n      geom.setColors(cValues.flat());\n    }\n\n    return geom;\n  }, [points, vertexColors]);\n  React.useLayoutEffect(() => {\n    line2.computeLineDistances();\n  }, [points, line2]);\n  React.useLayoutEffect(() => {\n    if (dashed) {\n      lineMaterial.defines.USE_DASH = '';\n    } else {\n      // Setting lineMaterial.defines.USE_DASH to undefined is apparently not sufficient.\n      delete lineMaterial.defines.USE_DASH;\n    }\n\n    lineMaterial.needsUpdate = true;\n  }, [dashed, lineMaterial]);\n  React.useEffect(() => {\n    return () => lineGeom.dispose();\n  }, [lineGeom]);\n  return /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    object: line2,\n    ref: ref\n  }, rest), /*#__PURE__*/React.createElement(\"primitive\", {\n    object: lineGeom,\n    attach: \"geometry\"\n  }), /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    object: lineMaterial,\n    attach: \"material\",\n    color: color,\n    vertexColors: Boolean(vertexColors),\n    resolution: resolution,\n    linewidth: lineWidth,\n    dashed: dashed\n  }, rest)));\n});\n\nexport { Line };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { Vector3, QuadraticBezierCurve3 } from 'three';\nimport mergeRefs from 'react-merge-refs';\nimport { Line } from './Line.js';\n\nconst v = new Vector3();\nconst QuadraticBezierLine = /*#__PURE__*/React.forwardRef(function QuadraticBezierLine({\n  start = [0, 0, 0],\n  end = [0, 0, 0],\n  mid,\n  segments = 20,\n  ...rest\n}, forwardref) {\n  const ref = React.useRef(null);\n  const [curve] = React.useState(() => new QuadraticBezierCurve3(undefined, undefined, undefined));\n  const getPoints = React.useCallback((start, end, mid, segments = 20) => {\n    if (start instanceof Vector3) curve.v0.copy(start);else curve.v0.set(...start);\n    if (end instanceof Vector3) curve.v2.copy(end);else curve.v2.set(...end);\n\n    if (mid instanceof Vector3) {\n      curve.v1.copy(mid);\n    } else {\n      curve.v1.copy(curve.v0.clone().add(curve.v2.clone().sub(curve.v0)).add(v.set(0, curve.v0.y - curve.v2.y, 0)));\n    }\n\n    return curve.getPoints(segments);\n  }, []);\n  React.useLayoutEffect(() => {\n    ref.current.setPoints = (start, end, mid) => {\n      const points = getPoints(start, end, mid);\n      if (ref.current.geometry) ref.current.geometry.setPositions(points.map(p => p.toArray()).flat());\n    };\n  }, []);\n  const points = React.useMemo(() => getPoints(start, end, mid, segments), [start, end, mid, segments]);\n  return /*#__PURE__*/React.createElement(Line, _extends({\n    ref: mergeRefs([ref, forwardref]),\n    points: points\n  }, rest));\n});\n\nexport { QuadraticBezierLine };\n","import { Matrix4, Ray, Sphere, Vector3 } from 'three';\n\nconst _inverseMatrix = new Matrix4();\n\nconst _ray = new Ray();\n\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\n\nfunction meshBounds(raycaster, intersects) {\n  const geometry = this.geometry;\n  const material = this.material;\n  const matrixWorld = this.matrixWorld;\n  if (material === undefined) return; // Checking boundingSphere distance to ray\n\n  if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n  _sphere.copy(geometry.boundingSphere);\n\n  _sphere.applyMatrix4(matrixWorld);\n\n  if (raycaster.ray.intersectsSphere(_sphere) === false) return;\n\n  _inverseMatrix.copy(matrixWorld).invert();\n\n  _ray.copy(raycaster.ray).applyMatrix4(_inverseMatrix); // Check boundingBox before continuing\n\n\n  if (geometry.boundingBox !== null && _ray.intersectBox(geometry.boundingBox, _vA) === null) return;\n  intersects.push({\n    distance: _vA.distanceTo(raycaster.ray.origin),\n    point: _vA.clone(),\n    object: this\n  });\n}\n\nexport { meshBounds };\n","import { Vector3, Vector2, Triangle, DoubleSide, BackSide } from 'three';\r\n\r\n// Ripped and modified From THREE.js Mesh raycast\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L115\r\nconst vA = /* @__PURE__ */ new Vector3();\r\nconst vB = /* @__PURE__ */ new Vector3();\r\nconst vC = /* @__PURE__ */ new Vector3();\r\n\r\nconst uvA = /* @__PURE__ */ new Vector2();\r\nconst uvB = /* @__PURE__ */ new Vector2();\r\nconst uvC = /* @__PURE__ */ new Vector2();\r\n\r\nconst intersectionPoint = /* @__PURE__ */ new Vector3();\r\nfunction checkIntersection( ray, pA, pB, pC, point, side ) {\r\n\r\n\tlet intersect;\r\n\tif ( side === BackSide ) {\r\n\r\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n\t} else {\r\n\r\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, side !== DoubleSide, point );\r\n\r\n\t}\r\n\r\n\tif ( intersect === null ) return null;\r\n\r\n\tconst distance = ray.origin.distanceTo( point );\r\n\r\n\treturn {\r\n\r\n\t\tdistance: distance,\r\n\t\tpoint: point.clone(),\r\n\r\n\t};\r\n\r\n}\r\n\r\nfunction checkBufferGeometryIntersection( ray, position, uv, a, b, c, side ) {\r\n\r\n\tvA.fromBufferAttribute( position, a );\r\n\tvB.fromBufferAttribute( position, b );\r\n\tvC.fromBufferAttribute( position, c );\r\n\r\n\tconst intersection = checkIntersection( ray, vA, vB, vC, intersectionPoint, side );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tif ( uv ) {\r\n\r\n\t\t\tuvA.fromBufferAttribute( uv, a );\r\n\t\t\tuvB.fromBufferAttribute( uv, b );\r\n\t\t\tuvC.fromBufferAttribute( uv, c );\r\n\r\n\t\t\tintersection.uv = Triangle.getUV( intersectionPoint, vA, vB, vC, uvA, uvB, uvC, new Vector2( ) );\r\n\r\n\t\t}\r\n\r\n\t\tconst face = {\r\n\t\t\ta: a,\r\n\t\t\tb: b,\r\n\t\t\tc: c,\r\n\t\t\tnormal: new Vector3(),\r\n\t\t\tmaterialIndex: 0\r\n\t\t};\r\n\r\n\t\tTriangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n\t\tintersection.face = face;\r\n\t\tintersection.faceIndex = a;\r\n\r\n\t}\r\n\r\n\treturn intersection;\r\n\r\n}\r\n\r\n// https://github.com/mrdoob/three.js/blob/0aa87c999fe61e216c1133fba7a95772b503eddf/src/objects/Mesh.js#L258\r\nfunction intersectTri( geo, side, ray, tri, intersections ) {\r\n\r\n\tconst triOffset = tri * 3;\r\n\tconst a = geo.index.getX( triOffset );\r\n\tconst b = geo.index.getX( triOffset + 1 );\r\n\tconst c = geo.index.getX( triOffset + 2 );\r\n\r\n\tconst intersection = checkBufferGeometryIntersection( ray, geo.attributes.position, geo.attributes.uv, a, b, c, side );\r\n\r\n\tif ( intersection ) {\r\n\r\n\t\tintersection.faceIndex = tri;\r\n\t\tif ( intersections ) intersections.push( intersection );\r\n\t\treturn intersection;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\nexport { intersectTri };\r\n","import { intersectTri } from './ThreeRayIntersectUtilities.js';\n\nexport function intersectTris( geo, side, ray, offset, count, intersections ) {\n\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tintersectTri( geo, side, ray, i, intersections );\n\n\t}\n\n}\n\nexport function intersectClosestTri( geo, side, ray, offset, count ) {\n\n\tlet dist = Infinity;\n\tlet res = null;\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\n\n\t\tconst intersection = intersectTri( geo, side, ray, i );\n\t\tif ( intersection && intersection.distance < dist ) {\n\n\t\t\tres = intersection;\n\t\t\tdist = intersection.distance;\n\n\t\t}\n\n\t}\n\n\treturn res;\n\n}\n\n// converts the given BVH raycast intersection to align with the three.js raycast\n// structure (include object, world space distance and point).\nexport function convertRaycastIntersect( hit, object, raycaster ) {\n\n\tif ( hit === null ) {\n\n\t\treturn null;\n\n\t}\n\n\thit.point.applyMatrix4( object.matrixWorld );\n\thit.distance = hit.point.distanceTo( raycaster.ray.origin );\n\thit.object = object;\n\n\tif ( hit.distance < raycaster.near || hit.distance > raycaster.far ) {\n\n\t\treturn null;\n\n\t} else {\n\n\t\treturn hit;\n\n\t}\n\n}\n","// Split strategy constants\r\nexport const CENTER = 0;\r\nexport const AVERAGE = 1;\r\nexport const SAH = 2;\r\n\r\n// Traversal constants\r\nexport const NOT_INTERSECTED = 0;\r\nexport const INTERSECTED = 1;\r\nexport const CONTAINED = 2;\r\n\r\n// SAH cost constants\r\n// TODO: hone these costs more. The relative difference between them should be the\r\n// difference in measured time to perform a triangle intersection vs traversing\r\n// bounds.\r\nexport const TRIANGLE_INTERSECT_COST = 1.25;\r\nexport const TRAVERSAL_COST = 1;\r\n\r\n\r\n// Build constants\r\nexport const BYTES_PER_NODE = 6 * 4 + 4 + 4;\r\nexport const IS_LEAFNODE_FLAG = 0xFFFF;\r\n\r\n// EPSILON for computing floating point error during build\r\n// https://en.wikipedia.org/wiki/Machine_epsilon#Values_for_standard_hardware_floating_point_arithmetics\r\nexport const FLOAT32_EPSILON = Math.pow( 2, - 24 );\r\n\r\n","export class MeshBVHNode {\r\n\r\n\tconstructor() {\r\n\r\n\t\t// internal nodes have boundingData, left, right, and splitAxis\r\n\t\t// leaf nodes have offset and count (referring to primitives in the mesh geometry)\r\n\r\n\t}\r\n\r\n}\r\n","export function arrayToBox( nodeIndex32, array, target ) {\r\n\r\n\ttarget.min.x = array[ nodeIndex32 ];\r\n\ttarget.min.y = array[ nodeIndex32 + 1 ];\r\n\ttarget.min.z = array[ nodeIndex32 + 2 ];\r\n\r\n\ttarget.max.x = array[ nodeIndex32 + 3 ];\r\n\ttarget.max.y = array[ nodeIndex32 + 4 ];\r\n\ttarget.max.z = array[ nodeIndex32 + 5 ];\r\n\r\n\treturn target;\r\n\r\n}\r\n\r\nexport function getLongestEdgeIndex( bounds ) {\r\n\r\n\tlet splitDimIdx = - 1;\r\n\tlet splitDist = - Infinity;\r\n\r\n\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\tconst dist = bounds[ i + 3 ] - bounds[ i ];\r\n\t\tif ( dist > splitDist ) {\r\n\r\n\t\t\tsplitDist = dist;\r\n\t\t\tsplitDimIdx = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn splitDimIdx;\r\n\r\n}\r\n\r\n// copys bounds a into bounds b\r\nexport function copyBounds( source, target ) {\r\n\r\n\ttarget.set( source );\r\n\r\n}\r\n\r\n// sets bounds target to the union of bounds a and b\r\nexport function unionBounds( a, b, target ) {\r\n\r\n\tlet aVal, bVal;\r\n\tfor ( let d = 0; d < 3; d ++ ) {\r\n\r\n\t\tconst d3 = d + 3;\r\n\r\n\t\t// set the minimum values\r\n\t\taVal = a[ d ];\r\n\t\tbVal = b[ d ];\r\n\t\ttarget[ d ] = aVal < bVal ? aVal : bVal;\r\n\r\n\t\t// set the max values\r\n\t\taVal = a[ d3 ];\r\n\t\tbVal = b[ d3 ];\r\n\t\ttarget[ d3 ] = aVal > bVal ? aVal : bVal;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// expands the given bounds by the provided triangle bounds\r\nexport function expandByTriangleBounds( startIndex, triangleBounds, bounds ) {\r\n\r\n\tfor ( let d = 0; d < 3; d ++ ) {\r\n\r\n\t\tconst tCenter = triangleBounds[ startIndex + 2 * d ];\r\n\t\tconst tHalf = triangleBounds[ startIndex + 2 * d + 1 ];\r\n\r\n\t\tconst tMin = tCenter - tHalf;\r\n\t\tconst tMax = tCenter + tHalf;\r\n\r\n\t\tif ( tMin < bounds[ d ] ) {\r\n\r\n\t\t\tbounds[ d ] = tMin;\r\n\r\n\t\t}\r\n\r\n\t\tif ( tMax > bounds[ d + 3 ] ) {\r\n\r\n\t\t\tbounds[ d + 3 ] = tMax;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// compute bounds surface area\r\nexport function computeSurfaceArea( bounds ) {\r\n\r\n\tconst d0 = bounds[ 3 ] - bounds[ 0 ];\r\n\tconst d1 = bounds[ 4 ] - bounds[ 1 ];\r\n\tconst d2 = bounds[ 5 ] - bounds[ 2 ];\r\n\r\n\treturn 2 * ( d0 * d1 + d1 * d2 + d2 * d0 );\r\n\r\n}\r\n","import { BufferAttribute } from 'three';\r\nimport { MeshBVHNode } from './MeshBVHNode.js';\r\nimport { getLongestEdgeIndex, computeSurfaceArea, copyBounds, unionBounds, expandByTriangleBounds } from '../utils/ArrayBoxUtilities.js';\r\nimport {\r\n\tCENTER, AVERAGE, SAH, TRIANGLE_INTERSECT_COST, TRAVERSAL_COST,\r\n\tBYTES_PER_NODE, FLOAT32_EPSILON, IS_LEAFNODE_FLAG,\r\n} from './Constants.js';\r\n\r\nfunction ensureIndex( geo, options ) {\r\n\r\n\tif ( ! geo.index ) {\r\n\r\n\t\tconst vertexCount = geo.attributes.position.count;\r\n\t\tconst BufferConstructor = options.useSharedArrayBuffer ? SharedArrayBuffer : ArrayBuffer;\r\n\t\tlet index;\r\n\t\tif ( vertexCount > 65535 ) {\r\n\r\n\t\t\tindex = new Uint32Array( new BufferConstructor( 4 * vertexCount ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tindex = new Uint16Array( new BufferConstructor( 2 * vertexCount ) );\r\n\r\n\t\t}\r\n\r\n\t\tgeo.setIndex( new BufferAttribute( index, 1 ) );\r\n\r\n\t\tfor ( let i = 0; i < vertexCount; i ++ ) {\r\n\r\n\t\t\tindex[ i ] = i;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Computes the set of { offset, count } ranges which need independent BVH roots. Each\r\n// region in the geometry index that belongs to a different set of material groups requires\r\n// a separate BVH root, so that triangles indices belonging to one group never get swapped\r\n// with triangle indices belongs to another group. For example, if the groups were like this:\r\n//\r\n// [-------------------------------------------------------------]\r\n// |__________________|\r\n//   g0 = [0, 20]  |______________________||_____________________|\r\n//                      g1 = [16, 40]           g2 = [41, 60]\r\n//\r\n// we would need four BVH roots: [0, 15], [16, 20], [21, 40], [41, 60].\r\nfunction getRootIndexRanges( geo ) {\r\n\r\n\tif ( ! geo.groups || ! geo.groups.length ) {\r\n\r\n\t\treturn [ { offset: 0, count: geo.index.count / 3 } ];\r\n\r\n\t}\r\n\r\n\tconst ranges = [];\r\n\tconst rangeBoundaries = new Set();\r\n\tfor ( const group of geo.groups ) {\r\n\r\n\t\trangeBoundaries.add( group.start );\r\n\t\trangeBoundaries.add( group.start + group.count );\r\n\r\n\t}\r\n\r\n\t// note that if you don't pass in a comparator, it sorts them lexicographically as strings :-(\r\n\tconst sortedBoundaries = Array.from( rangeBoundaries.values() ).sort( ( a, b ) => a - b );\r\n\tfor ( let i = 0; i < sortedBoundaries.length - 1; i ++ ) {\r\n\r\n\t\tconst start = sortedBoundaries[ i ], end = sortedBoundaries[ i + 1 ];\r\n\t\tranges.push( { offset: ( start / 3 ), count: ( end - start ) / 3 } );\r\n\r\n\t}\r\n\r\n\treturn ranges;\r\n\r\n}\r\n\r\n// computes the union of the bounds of all of the given triangles and puts the resulting box in target. If\r\n// centroidTarget is provided then a bounding box is computed for the centroids of the triangles, as well.\r\n// These are computed together to avoid redundant accesses to bounds array.\r\nfunction getBounds( triangleBounds, offset, count, target, centroidTarget = null ) {\r\n\r\n\tlet minx = Infinity;\r\n\tlet miny = Infinity;\r\n\tlet minz = Infinity;\r\n\tlet maxx = - Infinity;\r\n\tlet maxy = - Infinity;\r\n\tlet maxz = - Infinity;\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tconst includeCentroid = centroidTarget !== null;\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tconst hx = triangleBounds[ i + 1 ];\r\n\t\tconst lx = cx - hx;\r\n\t\tconst rx = cx + hx;\r\n\t\tif ( lx < minx ) minx = lx;\r\n\t\tif ( rx > maxx ) maxx = rx;\r\n\t\tif ( includeCentroid && cx < cminx ) cminx = cx;\r\n\t\tif ( includeCentroid && cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tconst hy = triangleBounds[ i + 3 ];\r\n\t\tconst ly = cy - hy;\r\n\t\tconst ry = cy + hy;\r\n\t\tif ( ly < miny ) miny = ly;\r\n\t\tif ( ry > maxy ) maxy = ry;\r\n\t\tif ( includeCentroid && cy < cminy ) cminy = cy;\r\n\t\tif ( includeCentroid && cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tconst hz = triangleBounds[ i + 5 ];\r\n\t\tconst lz = cz - hz;\r\n\t\tconst rz = cz + hz;\r\n\t\tif ( lz < minz ) minz = lz;\r\n\t\tif ( rz > maxz ) maxz = rz;\r\n\t\tif ( includeCentroid && cz < cminz ) cminz = cz;\r\n\t\tif ( includeCentroid && cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\ttarget[ 0 ] = minx;\r\n\ttarget[ 1 ] = miny;\r\n\ttarget[ 2 ] = minz;\r\n\r\n\ttarget[ 3 ] = maxx;\r\n\ttarget[ 4 ] = maxy;\r\n\ttarget[ 5 ] = maxz;\r\n\r\n\tif ( includeCentroid ) {\r\n\r\n\t\tcentroidTarget[ 0 ] = cminx;\r\n\t\tcentroidTarget[ 1 ] = cminy;\r\n\t\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\t\tcentroidTarget[ 3 ] = cmaxx;\r\n\t\tcentroidTarget[ 4 ] = cmaxy;\r\n\t\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// A stand alone function for retrieving the centroid bounds.\r\nfunction getCentroidBounds( triangleBounds, offset, count, centroidTarget ) {\r\n\r\n\tlet cminx = Infinity;\r\n\tlet cminy = Infinity;\r\n\tlet cminz = Infinity;\r\n\tlet cmaxx = - Infinity;\r\n\tlet cmaxy = - Infinity;\r\n\tlet cmaxz = - Infinity;\r\n\r\n\tfor ( let i = offset * 6, end = ( offset + count ) * 6; i < end; i += 6 ) {\r\n\r\n\t\tconst cx = triangleBounds[ i + 0 ];\r\n\t\tif ( cx < cminx ) cminx = cx;\r\n\t\tif ( cx > cmaxx ) cmaxx = cx;\r\n\r\n\t\tconst cy = triangleBounds[ i + 2 ];\r\n\t\tif ( cy < cminy ) cminy = cy;\r\n\t\tif ( cy > cmaxy ) cmaxy = cy;\r\n\r\n\t\tconst cz = triangleBounds[ i + 4 ];\r\n\t\tif ( cz < cminz ) cminz = cz;\r\n\t\tif ( cz > cmaxz ) cmaxz = cz;\r\n\r\n\t}\r\n\r\n\tcentroidTarget[ 0 ] = cminx;\r\n\tcentroidTarget[ 1 ] = cminy;\r\n\tcentroidTarget[ 2 ] = cminz;\r\n\r\n\tcentroidTarget[ 3 ] = cmaxx;\r\n\tcentroidTarget[ 4 ] = cmaxy;\r\n\tcentroidTarget[ 5 ] = cmaxz;\r\n\r\n}\r\n\r\n\r\n// reorders `tris` such that for `count` elements after `offset`, elements on the left side of the split\r\n// will be on the left and elements on the right side of the split will be on the right. returns the index\r\n// of the first element on the right side, or offset + count if there are no elements on the right side.\r\nfunction partition( index, triangleBounds, offset, count, split ) {\r\n\r\n\tlet left = offset;\r\n\tlet right = offset + count - 1;\r\n\tconst pos = split.pos;\r\n\tconst axisOffset = split.axis * 2;\r\n\r\n\t// hoare partitioning, see e.g. https://en.wikipedia.org/wiki/Quicksort#Hoare_partition_scheme\r\n\twhile ( true ) {\r\n\r\n\t\twhile ( left <= right && triangleBounds[ left * 6 + axisOffset ] < pos ) {\r\n\r\n\t\t\tleft ++;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if a triangle center lies on the partition plane it is considered to be on the right side\r\n\t\twhile ( left <= right && triangleBounds[ right * 6 + axisOffset ] >= pos ) {\r\n\r\n\t\t\tright --;\r\n\r\n\t\t}\r\n\r\n\t\tif ( left < right ) {\r\n\r\n\t\t\t// we need to swap all of the information associated with the triangles at index\r\n\t\t\t// left and right; that's the verts in the geometry index, the bounds,\r\n\t\t\t// and perhaps the SAH planes\r\n\r\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\tlet t0 = index[ left * 3 + i ];\r\n\t\t\t\tindex[ left * 3 + i ] = index[ right * 3 + i ];\r\n\t\t\t\tindex[ right * 3 + i ] = t0;\r\n\r\n\t\t\t\tlet t1 = triangleBounds[ left * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 0 ] = triangleBounds[ right * 6 + i * 2 + 0 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 0 ] = t1;\r\n\r\n\t\t\t\tlet t2 = triangleBounds[ left * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ left * 6 + i * 2 + 1 ] = triangleBounds[ right * 6 + i * 2 + 1 ];\r\n\t\t\t\ttriangleBounds[ right * 6 + i * 2 + 1 ] = t2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tleft ++;\r\n\t\t\tright --;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn left;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nconst BIN_COUNT = 32;\r\nconst binsSort = ( a, b ) => a.candidate - b.candidate;\r\nconst sahBins = new Array( BIN_COUNT ).fill().map( () => {\r\n\r\n\treturn {\r\n\r\n\t\tcount: 0,\r\n\t\tbounds: new Float32Array( 6 ),\r\n\t\trightCacheBounds: new Float32Array( 6 ),\r\n\t\tleftCacheBounds: new Float32Array( 6 ),\r\n\t\tcandidate: 0,\r\n\r\n\t};\r\n\r\n} );\r\nconst leftBounds = new Float32Array( 6 );\r\n\r\nfunction getOptimalSplit( nodeBoundingData, centroidBoundingData, triangleBounds, offset, count, strategy ) {\r\n\r\n\tlet axis = - 1;\r\n\tlet pos = 0;\r\n\r\n\t// Center\r\n\tif ( strategy === CENTER ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( centroidBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = ( centroidBoundingData[ axis ] + centroidBoundingData[ axis + 3 ] ) / 2;\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === AVERAGE ) {\r\n\r\n\t\taxis = getLongestEdgeIndex( nodeBoundingData );\r\n\t\tif ( axis !== - 1 ) {\r\n\r\n\t\t\tpos = getAverage( triangleBounds, offset, count, axis );\r\n\r\n\t\t}\r\n\r\n\t} else if ( strategy === SAH ) {\r\n\r\n\t\tconst rootSurfaceArea = computeSurfaceArea( nodeBoundingData );\r\n\t\tlet bestCost = TRIANGLE_INTERSECT_COST * count;\r\n\r\n\t\t// iterate over all axes\r\n\t\tconst cStart = offset * 6;\r\n\t\tconst cEnd = ( offset + count ) * 6;\r\n\t\tfor ( let a = 0; a < 3; a ++ ) {\r\n\r\n\t\t\tconst axisLeft = centroidBoundingData[ a ];\r\n\t\t\tconst axisRight = centroidBoundingData[ a + 3 ];\r\n\t\t\tconst axisLength = axisRight - axisLeft;\r\n\t\t\tconst binWidth = axisLength / BIN_COUNT;\r\n\r\n\t\t\t// If we have fewer triangles than we're planning to split then just check all\r\n\t\t\t// the triangle positions because it will be faster.\r\n\t\t\tif ( count < BIN_COUNT / 4 ) {\r\n\r\n\t\t\t\t// initialize the bin candidates\r\n\t\t\t\tconst truncatedBins = [ ...sahBins ];\r\n\t\t\t\ttruncatedBins.length = count;\r\n\r\n\t\t\t\t// set the candidates\r\n\t\t\t\tlet b = 0;\r\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6, b ++ ) {\r\n\r\n\t\t\t\t\tconst bin = truncatedBins[ b ];\r\n\t\t\t\t\tbin.candidate = triangleBounds[ c + 2 * a ];\r\n\t\t\t\t\tbin.count = 0;\r\n\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tbounds,\r\n\t\t\t\t\t\tleftCacheBounds,\r\n\t\t\t\t\t\trightCacheBounds,\r\n\t\t\t\t\t} = bin;\r\n\t\t\t\t\tfor ( let d = 0; d < 3; d ++ ) {\r\n\r\n\t\t\t\t\t\trightCacheBounds[ d ] = Infinity;\r\n\t\t\t\t\t\trightCacheBounds[ d + 3 ] = - Infinity;\r\n\r\n\t\t\t\t\t\tleftCacheBounds[ d ] = Infinity;\r\n\t\t\t\t\t\tleftCacheBounds[ d + 3 ] = - Infinity;\r\n\r\n\t\t\t\t\t\tbounds[ d ] = Infinity;\r\n\t\t\t\t\t\tbounds[ d + 3 ] = - Infinity;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bounds );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttruncatedBins.sort( binsSort );\r\n\r\n\t\t\t\t// remove redundant splits\r\n\t\t\t\tlet splitCount = count;\r\n\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\r\n\r\n\t\t\t\t\tconst bin = truncatedBins[ bi ];\r\n\t\t\t\t\twhile ( bi + 1 < splitCount && truncatedBins[ bi + 1 ].candidate === bin.candidate ) {\r\n\r\n\t\t\t\t\t\ttruncatedBins.splice( bi + 1, 1 );\r\n\t\t\t\t\t\tsplitCount --;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// find the appropriate bin for each triangle and expand the bounds.\r\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6 ) {\r\n\r\n\t\t\t\t\tconst center = triangleBounds[ c + 2 * a ];\r\n\t\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\r\n\r\n\t\t\t\t\t\tconst bin = truncatedBins[ bi ];\r\n\t\t\t\t\t\tif ( center >= bin.candidate ) {\r\n\r\n\t\t\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bin.rightCacheBounds );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bin.leftCacheBounds );\r\n\t\t\t\t\t\t\tbin.count ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// expand all the bounds\r\n\t\t\t\tfor ( let bi = 0; bi < splitCount; bi ++ ) {\r\n\r\n\t\t\t\t\tconst bin = truncatedBins[ bi ];\r\n\t\t\t\t\tconst leftCount = bin.count;\r\n\t\t\t\t\tconst rightCount = count - bin.count;\r\n\r\n\t\t\t\t\t// check the cost of this split\r\n\t\t\t\t\tconst leftBounds = bin.leftCacheBounds;\r\n\t\t\t\t\tconst rightBounds = bin.rightCacheBounds;\r\n\r\n\t\t\t\t\tlet leftProb = 0;\r\n\t\t\t\t\tif ( leftCount !== 0 ) {\r\n\r\n\t\t\t\t\t\tleftProb = computeSurfaceArea( leftBounds ) / rootSurfaceArea;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet rightProb = 0;\r\n\t\t\t\t\tif ( rightCount !== 0 ) {\r\n\r\n\t\t\t\t\t\trightProb = computeSurfaceArea( rightBounds ) / rootSurfaceArea;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst cost = TRAVERSAL_COST + TRIANGLE_INTERSECT_COST * (\r\n\t\t\t\t\t\tleftProb * leftCount + rightProb * rightCount\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif ( cost < bestCost ) {\r\n\r\n\t\t\t\t\t\taxis = a;\r\n\t\t\t\t\t\tbestCost = cost;\r\n\t\t\t\t\t\tpos = bin.candidate;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset the bins\r\n\t\t\t\tfor ( let i = 0; i < BIN_COUNT; i ++ ) {\r\n\r\n\t\t\t\t\tconst bin = sahBins[ i ];\r\n\t\t\t\t\tbin.count = 0;\r\n\t\t\t\t\tbin.candidate = axisLeft + binWidth + i * binWidth;\r\n\r\n\t\t\t\t\tconst bounds = bin.bounds;\r\n\t\t\t\t\tfor ( let d = 0; d < 3; d ++ ) {\r\n\r\n\t\t\t\t\t\tbounds[ d ] = Infinity;\r\n\t\t\t\t\t\tbounds[ d + 3 ] = - Infinity;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// iterate over all center positions\r\n\t\t\t\tfor ( let c = cStart; c < cEnd; c += 6 ) {\r\n\r\n\t\t\t\t\tconst triCenter = triangleBounds[ c + 2 * a ];\r\n\t\t\t\t\tconst relativeCenter = triCenter - axisLeft;\r\n\r\n\t\t\t\t\t// in the partition function if the centroid lies on the split plane then it is\r\n\t\t\t\t\t// considered to be on the right side of the split\r\n\t\t\t\t\tlet binIndex = ~ ~ ( relativeCenter / binWidth );\r\n\t\t\t\t\tif ( binIndex >= BIN_COUNT ) binIndex = BIN_COUNT - 1;\r\n\r\n\t\t\t\t\tconst bin = sahBins[ binIndex ];\r\n\t\t\t\t\tbin.count ++;\r\n\r\n\t\t\t\t\texpandByTriangleBounds( c, triangleBounds, bin.bounds );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// cache the unioned bounds from right to left so we don't have to regenerate them each time\r\n\t\t\t\tconst lastBin = sahBins[ BIN_COUNT - 1 ];\r\n\t\t\t\tcopyBounds( lastBin.bounds, lastBin.rightCacheBounds );\r\n\t\t\t\tfor ( let i = BIN_COUNT - 2; i >= 0; i -- ) {\r\n\r\n\t\t\t\t\tconst bin = sahBins[ i ];\r\n\t\t\t\t\tconst nextBin = sahBins[ i + 1 ];\r\n\t\t\t\t\tunionBounds( bin.bounds, nextBin.rightCacheBounds, bin.rightCacheBounds );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet leftCount = 0;\r\n\t\t\t\tfor ( let i = 0; i < BIN_COUNT - 1; i ++ ) {\r\n\r\n\t\t\t\t\tconst bin = sahBins[ i ];\r\n\t\t\t\t\tconst binCount = bin.count;\r\n\t\t\t\t\tconst bounds = bin.bounds;\r\n\r\n\t\t\t\t\tconst nextBin = sahBins[ i + 1 ];\r\n\t\t\t\t\tconst rightBounds = nextBin.rightCacheBounds;\r\n\r\n\t\t\t\t\t// dont do anything with the bounds if the new bounds have no triangles\r\n\t\t\t\t\tif ( binCount !== 0 ) {\r\n\r\n\t\t\t\t\t\tif ( leftCount === 0 ) {\r\n\r\n\t\t\t\t\t\t\tcopyBounds( bounds, leftBounds );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tunionBounds( bounds, leftBounds, leftBounds );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tleftCount += binCount;\r\n\r\n\t\t\t\t\t// check the cost of this split\r\n\t\t\t\t\tlet leftProb = 0;\r\n\t\t\t\t\tlet rightProb = 0;\r\n\r\n\t\t\t\t\tif ( leftCount !== 0 ) {\r\n\r\n\t\t\t\t\t\tleftProb = computeSurfaceArea( leftBounds ) / rootSurfaceArea;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst rightCount = count - leftCount;\r\n\t\t\t\t\tif ( rightCount !== 0 ) {\r\n\r\n\t\t\t\t\t\trightProb = computeSurfaceArea( rightBounds ) / rootSurfaceArea;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst cost = TRAVERSAL_COST + TRIANGLE_INTERSECT_COST * (\r\n\t\t\t\t\t\tleftProb * leftCount + rightProb * rightCount\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\tif ( cost < bestCost ) {\r\n\r\n\t\t\t\t\t\taxis = a;\r\n\t\t\t\t\t\tbestCost = cost;\r\n\t\t\t\t\t\tpos = bin.candidate;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( `MeshBVH: Invalid build strategy value ${ strategy } used.` );\r\n\r\n\t}\r\n\r\n\treturn { axis, pos };\r\n\r\n}\r\n\r\n// returns the average coordinate on the specified axis of the all the provided triangles\r\nfunction getAverage( triangleBounds, offset, count, axis ) {\r\n\r\n\tlet avg = 0;\r\n\tfor ( let i = offset, end = offset + count; i < end; i ++ ) {\r\n\r\n\t\tavg += triangleBounds[ i * 6 + axis * 2 ];\r\n\r\n\t}\r\n\r\n\treturn avg / count;\r\n\r\n}\r\n\r\n// precomputes the bounding box for each triangle; required for quickly calculating tree splits.\r\n// result is an array of size tris.length * 6 where triangle i maps to a\r\n// [x_center, x_delta, y_center, y_delta, z_center, z_delta] tuple starting at index i * 6,\r\n// representing the center and half-extent in each dimension of triangle i\r\nfunction computeTriangleBounds( geo, fullBounds ) {\r\n\r\n\tconst posAttr = geo.attributes.position;\r\n\tconst posArr = posAttr.array;\r\n\tconst index = geo.index.array;\r\n\tconst triCount = index.length / 3;\r\n\tconst triangleBounds = new Float32Array( triCount * 6 );\r\n\r\n\t// support for an interleaved position buffer\r\n\tconst bufferOffset = posAttr.offset || 0;\r\n\tlet stride = 3;\r\n\tif ( posAttr.isInterleavedBufferAttribute ) {\r\n\r\n\t\tstride = posAttr.data.stride;\r\n\r\n\t}\r\n\r\n\tfor ( let tri = 0; tri < triCount; tri ++ ) {\r\n\r\n\t\tconst tri3 = tri * 3;\r\n\t\tconst tri6 = tri * 6;\r\n\t\tconst ai = index[ tri3 + 0 ] * stride + bufferOffset;\r\n\t\tconst bi = index[ tri3 + 1 ] * stride + bufferOffset;\r\n\t\tconst ci = index[ tri3 + 2 ] * stride + bufferOffset;\r\n\r\n\t\tfor ( let el = 0; el < 3; el ++ ) {\r\n\r\n\t\t\tconst a = posArr[ ai + el ];\r\n\t\t\tconst b = posArr[ bi + el ];\r\n\t\t\tconst c = posArr[ ci + el ];\r\n\r\n\t\t\tlet min = a;\r\n\t\t\tif ( b < min ) min = b;\r\n\t\t\tif ( c < min ) min = c;\r\n\r\n\t\t\tlet max = a;\r\n\t\t\tif ( b > max ) max = b;\r\n\t\t\tif ( c > max ) max = c;\r\n\r\n\t\t\t// Increase the bounds size by float32 epsilon to avoid precision errors when\r\n\t\t\t// converting to 32 bit float. Scale the epsilon by the size of the numbers being\r\n\t\t\t// worked with.\r\n\t\t\tconst halfExtents = ( max - min ) / 2;\r\n\t\t\tconst el2 = el * 2;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 0 ] = min + halfExtents;\r\n\t\t\ttriangleBounds[ tri6 + el2 + 1 ] = halfExtents + ( Math.abs( min ) + halfExtents ) * FLOAT32_EPSILON;\r\n\r\n\t\t\tif ( min < fullBounds[ el ] ) fullBounds[ el ] = min;\r\n\t\t\tif ( max > fullBounds[ el + 3 ] ) fullBounds[ el + 3 ] = max;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn triangleBounds;\r\n\r\n}\r\n\r\nexport function buildTree( geo, options ) {\r\n\r\n\tfunction triggerProgress( trianglesProcessed ) {\r\n\r\n\t\tif ( onProgress ) {\r\n\r\n\t\t\tonProgress( trianglesProcessed / totalTriangles );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// either recursively splits the given node, creating left and right subtrees for it, or makes it a leaf node,\r\n\t// recording the offset and count of its triangles and writing them into the reordered geometry index.\r\n\tfunction splitNode( node, offset, count, centroidBoundingData = null, depth = 0 ) {\r\n\r\n\t\tif ( ! reachedMaxDepth && depth >= maxDepth ) {\r\n\r\n\t\t\treachedMaxDepth = true;\r\n\t\t\tif ( verbose ) {\r\n\r\n\t\t\t\tconsole.warn( `MeshBVH: Max depth of ${ maxDepth } reached when generating BVH. Consider increasing maxDepth.` );\r\n\t\t\t\tconsole.warn( geo );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// early out if we've met our capacity\r\n\t\tif ( count <= maxLeafTris || depth >= maxDepth ) {\r\n\r\n\t\t\ttriggerProgress( offset + count );\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\t// Find where to split the volume\r\n\t\tconst split = getOptimalSplit( node.boundingData, centroidBoundingData, triangleBounds, offset, count, strategy );\r\n\t\tif ( split.axis === - 1 ) {\r\n\r\n\t\t\ttriggerProgress( offset + count );\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\t\t\treturn node;\r\n\r\n\t\t}\r\n\r\n\t\tconst splitOffset = partition( indexArray, triangleBounds, offset, count, split );\r\n\r\n\t\t// create the two new child nodes\r\n\t\tif ( splitOffset === offset || splitOffset === offset + count ) {\r\n\r\n\t\t\ttriggerProgress( offset + count );\r\n\t\t\tnode.offset = offset;\r\n\t\t\tnode.count = count;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnode.splitAxis = split.axis;\r\n\r\n\t\t\t// create the left child and compute its bounding box\r\n\t\t\tconst left = new MeshBVHNode();\r\n\t\t\tconst lstart = offset;\r\n\t\t\tconst lcount = splitOffset - offset;\r\n\t\t\tnode.left = left;\r\n\t\t\tleft.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tgetBounds( triangleBounds, lstart, lcount, left.boundingData, cacheCentroidBoundingData );\r\n\t\t\tsplitNode( left, lstart, lcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t\t// repeat for right\r\n\t\t\tconst right = new MeshBVHNode();\r\n\t\t\tconst rstart = splitOffset;\r\n\t\t\tconst rcount = count - lcount;\r\n\t\t\tnode.right = right;\r\n\t\t\tright.boundingData = new Float32Array( 6 );\r\n\r\n\t\t\tgetBounds( triangleBounds, rstart, rcount, right.boundingData, cacheCentroidBoundingData );\r\n\t\t\tsplitNode( right, rstart, rcount, cacheCentroidBoundingData, depth + 1 );\r\n\r\n\t\t}\r\n\r\n\t\treturn node;\r\n\r\n\t}\r\n\r\n\tensureIndex( geo, options );\r\n\r\n\t// Compute the full bounds of the geometry at the same time as triangle bounds because\r\n\t// we'll need it for the root bounds in the case with no groups and it should be fast here.\r\n\t// We can't use the geometrying bounding box if it's available because it may be out of date.\r\n\tconst fullBounds = new Float32Array( 6 );\r\n\tconst cacheCentroidBoundingData = new Float32Array( 6 );\r\n\tconst triangleBounds = computeTriangleBounds( geo, fullBounds );\r\n\tconst indexArray = geo.index.array;\r\n\tconst maxDepth = options.maxDepth;\r\n\tconst verbose = options.verbose;\r\n\tconst maxLeafTris = options.maxLeafTris;\r\n\tconst strategy = options.strategy;\r\n\tconst onProgress = options.onProgress;\r\n\tconst totalTriangles = geo.index.count / 3;\r\n\tlet reachedMaxDepth = false;\r\n\r\n\tconst roots = [];\r\n\tconst ranges = getRootIndexRanges( geo );\r\n\r\n\tif ( ranges.length === 1 ) {\r\n\r\n\t\tconst range = ranges[ 0 ];\r\n\t\tconst root = new MeshBVHNode();\r\n\t\troot.boundingData = fullBounds;\r\n\t\tgetCentroidBounds( triangleBounds, range.offset, range.count, cacheCentroidBoundingData );\r\n\r\n\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\troots.push( root );\r\n\r\n\t} else {\r\n\r\n\t\tfor ( let range of ranges ) {\r\n\r\n\t\t\tconst root = new MeshBVHNode();\r\n\t\t\troot.boundingData = new Float32Array( 6 );\r\n\t\t\tgetBounds( triangleBounds, range.offset, range.count, root.boundingData, cacheCentroidBoundingData );\r\n\r\n\t\t\tsplitNode( root, range.offset, range.count, cacheCentroidBoundingData );\r\n\t\t\troots.push( root );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn roots;\r\n\r\n}\r\n\r\nexport function buildPackedTree( geo, options ) {\r\n\r\n\t// boundingData  \t\t\t\t: 6 float32\r\n\t// right / offset \t\t\t\t: 1 uint32\r\n\t// splitAxis / isLeaf + count \t: 1 uint32 / 2 uint16\r\n\tconst roots = buildTree( geo, options );\r\n\r\n\tlet float32Array;\r\n\tlet uint32Array;\r\n\tlet uint16Array;\r\n\tconst packedRoots = [];\r\n\tconst BufferConstructor = options.useSharedArrayBuffer ? SharedArrayBuffer : ArrayBuffer;\r\n\tfor ( let i = 0; i < roots.length; i ++ ) {\r\n\r\n\t\tconst root = roots[ i ];\r\n\t\tlet nodeCount = countNodes( root );\r\n\r\n\t\tconst buffer = new BufferConstructor( BYTES_PER_NODE * nodeCount );\r\n\t\tfloat32Array = new Float32Array( buffer );\r\n\t\tuint32Array = new Uint32Array( buffer );\r\n\t\tuint16Array = new Uint16Array( buffer );\r\n\t\tpopulateBuffer( 0, root );\r\n\t\tpackedRoots.push( buffer );\r\n\r\n\t}\r\n\r\n\treturn packedRoots;\r\n\r\n\tfunction countNodes( node ) {\r\n\r\n\t\tif ( node.count ) {\r\n\r\n\t\t\treturn 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn 1 + countNodes( node.left ) + countNodes( node.right );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction populateBuffer( byteOffset, node ) {\r\n\r\n\t\tconst stride4Offset = byteOffset / 4;\r\n\t\tconst stride2Offset = byteOffset / 2;\r\n\t\tconst isLeaf = ! ! node.count;\r\n\t\tconst boundingData = node.boundingData;\r\n\t\tfor ( let i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tfloat32Array[ stride4Offset + i ] = boundingData[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( isLeaf ) {\r\n\r\n\t\t\tconst offset = node.offset;\r\n\t\t\tconst count = node.count;\r\n\t\t\tuint32Array[ stride4Offset + 6 ] = offset;\r\n\t\t\tuint16Array[ stride2Offset + 14 ] = count;\r\n\t\t\tuint16Array[ stride2Offset + 15 ] = IS_LEAFNODE_FLAG;\r\n\t\t\treturn byteOffset + BYTES_PER_NODE;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = node.left;\r\n\t\t\tconst right = node.right;\r\n\t\t\tconst splitAxis = node.splitAxis;\r\n\r\n\t\t\tlet nextUnusedPointer;\r\n\t\t\tnextUnusedPointer = populateBuffer( byteOffset + BYTES_PER_NODE, left );\r\n\r\n\t\t\tif ( ( nextUnusedPointer / 4 ) > Math.pow( 2, 32 ) ) {\r\n\r\n\t\t\t\tthrow new Error( 'MeshBVH: Cannot store child pointer greater than 32 bits.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuint32Array[ stride4Offset + 6 ] = nextUnusedPointer / 4;\r\n\t\t\tnextUnusedPointer = populateBuffer( nextUnusedPointer, right );\r\n\r\n\t\t\tuint32Array[ stride4Offset + 7 ] = splitAxis;\r\n\t\t\treturn nextUnusedPointer;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","import { Vector3 } from 'three';\r\n\r\nexport class SeparatingAxisBounds {\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.min = Infinity;\r\n\t\tthis.max = - Infinity;\r\n\r\n\t}\r\n\r\n\tsetFromPointsField( points, field ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = p[ field ];\r\n\t\t\tmin = val < min ? val : min;\r\n\t\t\tmax = val > max ? val : max;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t}\r\n\r\n\tsetFromPoints( axis, points ) {\r\n\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tconst val = axis.dot( p );\r\n\t\t\tmin = val < min ? val : min;\r\n\t\t\tmax = val > max ? val : max;\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t}\r\n\r\n\tisSeparated( other ) {\r\n\r\n\t\treturn this.min > other.max || other.min > this.max;\r\n\r\n\t}\r\n\r\n}\r\n\r\nSeparatingAxisBounds.prototype.setFromBox = ( function () {\r\n\r\n\tconst p = new Vector3();\r\n\treturn function setFromBox( axis, box ) {\r\n\r\n\t\tconst boxMin = box.min;\r\n\t\tconst boxMax = box.max;\r\n\t\tlet min = Infinity;\r\n\t\tlet max = - Infinity;\r\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\r\n\r\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\r\n\r\n\t\t\t\t\tp.x = boxMin.x * x + boxMax.x * ( 1 - x );\r\n\t\t\t\t\tp.y = boxMin.y * y + boxMax.y * ( 1 - y );\r\n\t\t\t\t\tp.z = boxMin.z * z + boxMax.z * ( 1 - z );\r\n\r\n\t\t\t\t\tconst val = axis.dot( p );\r\n\t\t\t\t\tmin = Math.min( val, min );\r\n\t\t\t\t\tmax = Math.max( val, max );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const areIntersecting = ( function () {\r\n\r\n\tconst cacheSatBounds = new SeparatingAxisBounds();\r\n\treturn function areIntersecting( shape1, shape2 ) {\r\n\r\n\t\tconst points1 = shape1.points;\r\n\t\tconst satAxes1 = shape1.satAxes;\r\n\t\tconst satBounds1 = shape1.satBounds;\r\n\r\n\t\tconst points2 = shape2.points;\r\n\t\tconst satAxes2 = shape2.satAxes;\r\n\t\tconst satBounds2 = shape2.satBounds;\r\n\r\n\t\t// check axes of the first shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points2 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check axes of the second shape\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\tcacheSatBounds.setFromPoints( sa, points1 );\r\n\t\t\tif ( sb.isSeparated( cacheSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n","import { Vector3, Vector2, Plane, Line3 } from 'three';\r\n\r\nexport const closestPointLineToLine = ( function () {\r\n\r\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/Line.cpp#L56\r\n\tconst dir1 = new Vector3();\r\n\tconst dir2 = new Vector3();\r\n\tconst v02 = new Vector3();\r\n\treturn function closestPointLineToLine( l1, l2, result ) {\r\n\r\n\t\tconst v0 = l1.start;\r\n\t\tconst v10 = dir1;\r\n\t\tconst v2 = l2.start;\r\n\t\tconst v32 = dir2;\r\n\r\n\t\tv02.subVectors( v0, v2 );\r\n\t\tdir1.subVectors( l1.end, l2.start );\r\n\t\tdir2.subVectors( l2.end, l2.start );\r\n\r\n\t\t// float d0232 = v02.Dot(v32);\r\n\t\tconst d0232 = v02.dot( v32 );\r\n\r\n\t\t// float d3210 = v32.Dot(v10);\r\n\t\tconst d3210 = v32.dot( v10 );\r\n\r\n\t\t// float d3232 = v32.Dot(v32);\r\n\t\tconst d3232 = v32.dot( v32 );\r\n\r\n\t\t// float d0210 = v02.Dot(v10);\r\n\t\tconst d0210 = v02.dot( v10 );\r\n\r\n\t\t// float d1010 = v10.Dot(v10);\r\n\t\tconst d1010 = v10.dot( v10 );\r\n\r\n\t\t// float denom = d1010*d3232 - d3210*d3210;\r\n\t\tconst denom = d1010 * d3232 - d3210 * d3210;\r\n\r\n\t\tlet d, d2;\r\n\t\tif ( denom !== 0 ) {\r\n\r\n\t\t\td = ( d0232 * d3210 - d0210 * d3232 ) / denom;\r\n\r\n\t\t} else {\r\n\r\n\t\t\td = 0;\r\n\r\n\t\t}\r\n\r\n\t\td2 = ( d0232 + d * d3210 ) / d3232;\r\n\r\n\t\tresult.x = d;\r\n\t\tresult.y = d2;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nexport const closestPointsSegmentToSegment = ( function () {\r\n\r\n\t// https://github.com/juj/MathGeoLib/blob/master/src/Geometry/LineSegment.cpp#L187\r\n\tconst paramResult = new Vector2();\r\n\tconst temp1 = new Vector3();\r\n\tconst temp2 = new Vector3();\r\n\treturn function closestPointsSegmentToSegment( l1, l2, target1, target2 ) {\r\n\r\n\t\tclosestPointLineToLine( l1, l2, paramResult );\r\n\r\n\t\tlet d = paramResult.x;\r\n\t\tlet d2 = paramResult.y;\r\n\t\tif ( d >= 0 && d <= 1 && d2 >= 0 && d2 <= 1 ) {\r\n\r\n\t\t\tl1.at( d, target1 );\r\n\t\t\tl2.at( d2, target2 );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t} else if ( d >= 0 && d <= 1 ) {\r\n\r\n\t\t\t// Only d2 is out of bounds.\r\n\t\t\tif ( d2 < 0 ) {\r\n\r\n\t\t\t\tl2.at( 0, target2 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tl2.at( 1, target2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tl1.closestPointToPoint( target2, true, target1 );\r\n\t\t\treturn;\r\n\r\n\t\t} else if ( d2 >= 0 && d2 <= 1 ) {\r\n\r\n\t\t\t// Only d is out of bounds.\r\n\t\t\tif ( d < 0 ) {\r\n\r\n\t\t\t\tl1.at( 0, target1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tl1.at( 1, target1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tl2.closestPointToPoint( target1, true, target2 );\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Both u and u2 are out of bounds.\r\n\t\t\tlet p;\r\n\t\t\tif ( d < 0 ) {\r\n\r\n\t\t\t\tp = l1.start;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tp = l1.end;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlet p2;\r\n\t\t\tif ( d2 < 0 ) {\r\n\r\n\t\t\t\tp2 = l2.start;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tp2 = l2.end;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst closestPoint = temp1;\r\n\t\t\tconst closestPoint2 = temp2;\r\n\t\t\tl1.closestPointToPoint( p2, true, temp1 );\r\n\t\t\tl2.closestPointToPoint( p, true, temp2 );\r\n\r\n\t\t\tif ( closestPoint.distanceToSquared( p2 ) <= closestPoint2.distanceToSquared( p ) ) {\r\n\r\n\t\t\t\ttarget1.copy( closestPoint );\r\n\t\t\t\ttarget2.copy( p2 );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\ttarget1.copy( p );\r\n\t\t\t\ttarget2.copy( closestPoint2 );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nexport const sphereIntersectTriangle = ( function () {\r\n\r\n\t// https://stackoverflow.com/questions/34043955/detect-collision-between-sphere-and-triangle-in-three-js\r\n\tconst closestPointTemp = new Vector3();\r\n\tconst projectedPointTemp = new Vector3();\r\n\tconst planeTemp = new Plane();\r\n\tconst lineTemp = new Line3();\r\n\treturn function sphereIntersectTriangle( sphere, triangle ) {\r\n\r\n\t\tconst { radius, center } = sphere;\r\n\t\tconst { a, b, c } = triangle;\r\n\r\n\t\t// phase 1\r\n\t\tlineTemp.start = a;\r\n\t\tlineTemp.end = b;\r\n\t\tconst closestPoint1 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\r\n\t\tif ( closestPoint1.distanceTo( center ) <= radius ) return true;\r\n\r\n\t\tlineTemp.start = a;\r\n\t\tlineTemp.end = c;\r\n\t\tconst closestPoint2 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\r\n\t\tif ( closestPoint2.distanceTo( center ) <= radius ) return true;\r\n\r\n\t\tlineTemp.start = b;\r\n\t\tlineTemp.end = c;\r\n\t\tconst closestPoint3 = lineTemp.closestPointToPoint( center, true, closestPointTemp );\r\n\t\tif ( closestPoint3.distanceTo( center ) <= radius ) return true;\r\n\r\n\t\t// phase 2\r\n\t\tconst plane = triangle.getPlane( planeTemp );\r\n\t\tconst dp = Math.abs( plane.distanceToPoint( center ) );\r\n\t\tif ( dp <= radius ) {\r\n\r\n\t\t\tconst pp = plane.projectPoint( center, projectedPointTemp );\r\n\t\t\tconst cp = triangle.containsPoint( pp );\r\n\t\t\tif ( cp ) return true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t};\r\n\r\n} )();\r\n","import { Triangle, Vector3, Line3, Sphere, Plane } from 'three';\r\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\r\nimport { closestPointsSegmentToSegment, sphereIntersectTriangle } from './MathUtilities.js';\r\n\r\nconst DIST_EPSILON = 1e-15;\r\nfunction isNearZero( value ) {\r\n\r\n\treturn Math.abs( value ) < DIST_EPSILON;\r\n\r\n}\r\n\r\nexport class ExtendedTriangle extends Triangle {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\r\n\t\tthis.isExtendedTriangle = true;\r\n\t\tthis.satAxes = new Array( 4 ).fill().map( () => new Vector3() );\r\n\t\tthis.satBounds = new Array( 4 ).fill().map( () => new SeparatingAxisBounds() );\r\n\t\tthis.points = [ this.a, this.b, this.c ];\r\n\t\tthis.sphere = new Sphere();\r\n\t\tthis.plane = new Plane();\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tintersectsSphere( sphere ) {\r\n\r\n\t\treturn sphereIntersectTriangle( sphere, this );\r\n\r\n\t}\r\n\r\n\tupdate() {\r\n\r\n\t\tconst a = this.a;\r\n\t\tconst b = this.b;\r\n\t\tconst c = this.c;\r\n\t\tconst points = this.points;\r\n\r\n\t\tconst satAxes = this.satAxes;\r\n\t\tconst satBounds = this.satBounds;\r\n\r\n\t\tconst axis0 = satAxes[ 0 ];\r\n\t\tconst sab0 = satBounds[ 0 ];\r\n\t\tthis.getNormal( axis0 );\r\n\t\tsab0.setFromPoints( axis0, points );\r\n\r\n\t\tconst axis1 = satAxes[ 1 ];\r\n\t\tconst sab1 = satBounds[ 1 ];\r\n\t\taxis1.subVectors( a, b );\r\n\t\tsab1.setFromPoints( axis1, points );\r\n\r\n\t\tconst axis2 = satAxes[ 2 ];\r\n\t\tconst sab2 = satBounds[ 2 ];\r\n\t\taxis2.subVectors( b, c );\r\n\t\tsab2.setFromPoints( axis2, points );\r\n\r\n\t\tconst axis3 = satAxes[ 3 ];\r\n\t\tconst sab3 = satBounds[ 3 ];\r\n\t\taxis3.subVectors( c, a );\r\n\t\tsab3.setFromPoints( axis3, points );\r\n\r\n\t\tthis.sphere.setFromPoints( this.points );\r\n\t\tthis.plane.setFromNormalAndCoplanarPoint( axis0, a );\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t}\r\n\r\n}\r\n\r\nExtendedTriangle.prototype.closestPointToSegment = ( function () {\r\n\r\n\tconst point1 = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst edge = new Line3();\r\n\r\n\treturn function distanceToSegment( segment, target1 = null, target2 = null ) {\r\n\r\n\t\tconst { start, end } = segment;\r\n\t\tconst points = this.points;\r\n\t\tlet distSq;\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check the triangle edges\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst nexti = ( i + 1 ) % 3;\r\n\t\t\tedge.start.copy( points[ i ] );\r\n\t\t\tedge.end.copy( points[ nexti ] );\r\n\r\n\t\t\tclosestPointsSegmentToSegment( edge, segment, point1, point2 );\r\n\r\n\t\t\tdistSq = point1.distanceToSquared( point2 );\r\n\t\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = distSq;\r\n\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// check end points\r\n\t\tthis.closestPointToPoint( start, point1 );\r\n\t\tdistSq = start.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( start );\r\n\r\n\t\t}\r\n\r\n\t\tthis.closestPointToPoint( end, point1 );\r\n\t\tdistSq = end.distanceToSquared( point1 );\r\n\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\tclosestDistanceSq = distSq;\r\n\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\tif ( target2 ) target2.copy( end );\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nExtendedTriangle.prototype.intersectsTriangle = ( function () {\r\n\r\n\tconst saTri2 = new ExtendedTriangle();\r\n\tconst arr1 = new Array( 3 );\r\n\tconst arr2 = new Array( 3 );\r\n\tconst cachedSatBounds = new SeparatingAxisBounds();\r\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\r\n\tconst cachedAxis = new Vector3();\r\n\tconst dir1 = new Vector3();\r\n\tconst dir2 = new Vector3();\r\n\tconst tempDir = new Vector3();\r\n\tconst edge = new Line3();\r\n\tconst edge1 = new Line3();\r\n\tconst edge2 = new Line3();\r\n\r\n\t// TODO: If the triangles are coplanar and intersecting the target is nonsensical. It should at least\r\n\t// be a line contained by both triangles if not a different special case somehow represented in the return result.\r\n\treturn function intersectsTriangle( other, target = null ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! other.isExtendedTriangle ) {\r\n\r\n\t\t\tsaTri2.copy( other );\r\n\t\t\tsaTri2.update();\r\n\t\t\tother = saTri2;\r\n\r\n\t\t} else if ( other.needsUpdate ) {\r\n\r\n\t\t\tother.update();\r\n\r\n\t\t}\r\n\r\n\t\tconst plane1 = this.plane;\r\n\t\tconst plane2 = other.plane;\r\n\r\n\t\tif ( Math.abs( plane1.normal.dot( plane2.normal ) ) > 1.0 - 1e-10 ) {\r\n\r\n\t\t\t// perform separating axis intersection test only for coplanar triangles\r\n\t\t\tconst satBounds1 = this.satBounds;\r\n\t\t\tconst satAxes1 = this.satAxes;\r\n\t\t\tarr2[ 0 ] = other.a;\r\n\t\t\tarr2[ 1 ] = other.b;\r\n\t\t\tarr2[ 2 ] = other.c;\r\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\tconst sb = satBounds1[ i ];\r\n\t\t\t\tconst sa = satAxes1[ i ];\r\n\t\t\t\tcachedSatBounds.setFromPoints( sa, arr2 );\r\n\t\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst satBounds2 = other.satBounds;\r\n\t\t\tconst satAxes2 = other.satAxes;\r\n\t\t\tarr1[ 0 ] = this.a;\r\n\t\t\tarr1[ 1 ] = this.b;\r\n\t\t\tarr1[ 2 ] = this.c;\r\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\tconst sb = satBounds2[ i ];\r\n\t\t\t\tconst sa = satAxes2[ i ];\r\n\t\t\t\tcachedSatBounds.setFromPoints( sa, arr1 );\r\n\t\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// check crossed axes\r\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\tconst sa1 = satAxes1[ i ];\r\n\t\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\r\n\r\n\t\t\t\t\tconst sa2 = satAxes2[ i2 ];\r\n\t\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\r\n\t\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, arr1 );\r\n\t\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, arr2 );\r\n\t\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( target ) {\r\n\r\n\t\t\t\t// TODO find two points that intersect on the edges and make that the result\r\n\t\t\t\tconsole.warn( 'ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0.' );\r\n\r\n\t\t\t\ttarget.start.set( 0, 0, 0 );\r\n\t\t\t\ttarget.end.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// find the edge that intersects the other triangle plane\r\n\t\t\tconst points1 = this.points;\r\n\t\t\tlet found1 = false;\r\n\t\t\tlet count1 = 0;\r\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\tconst p = points1[ i ];\r\n\t\t\t\tconst pNext = points1[ ( i + 1 ) % 3 ];\r\n\r\n\t\t\t\tedge.start.copy( p );\r\n\t\t\t\tedge.end.copy( pNext );\r\n\t\t\t\tedge.delta( dir1 );\r\n\r\n\t\t\t\tconst targetPoint = found1 ? edge1.start : edge1.end;\r\n\t\t\t\tconst startIntersects = isNearZero( plane2.distanceToPoint( p ) );\r\n\t\t\t\tif ( isNearZero( plane2.normal.dot( dir1 ) ) && startIntersects ) {\r\n\r\n\t\t\t\t\t// if the edge lies on the plane then take the line\r\n\t\t\t\t\tedge1.copy( edge );\r\n\t\t\t\t\tcount1 = 2;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// check if the start point is near the plane because \"intersectLine\" is not robust to that case\r\n\t\t\t\tconst doesIntersect = plane2.intersectLine( edge, targetPoint ) || startIntersects;\r\n\t\t\t\tif ( doesIntersect && ! isNearZero( targetPoint.distanceTo( pNext ) ) ) {\r\n\r\n\t\t\t\t\tcount1 ++;\r\n\t\t\t\t\tif ( found1 ) {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfound1 = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( count1 === 1 && this.containsPoint( edge1.start ) ) {\r\n\r\n\t\t\t\tif ( target ) {\r\n\r\n\t\t\t\t\ttarget.start.copy( edge1.start );\r\n\t\t\t\t\ttarget.end.copy( edge1.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if ( count1 !== 2 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// find the other triangles edge that intersects this plane\r\n\t\t\tconst points2 = other.points;\r\n\t\t\tlet found2 = false;\r\n\t\t\tlet count2 = 0;\r\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\tconst p = points2[ i ];\r\n\t\t\t\tconst pNext = points2[ ( i + 1 ) % 3 ];\r\n\r\n\t\t\t\tedge.start.copy( p );\r\n\t\t\t\tedge.end.copy( pNext );\r\n\t\t\t\tedge.delta( dir2 );\r\n\r\n\t\t\t\tconst targetPoint = found2 ? edge2.start : edge2.end;\r\n\t\t\t\tconst startIntersects = isNearZero( plane1.distanceToPoint( p ) );\r\n\t\t\t\tif ( isNearZero( plane1.normal.dot( dir2 ) ) && startIntersects ) {\r\n\r\n\t\t\t\t\t// if the edge lies on the plane then take the line\r\n\t\t\t\t\tedge2.copy( edge );\r\n\t\t\t\t\tcount2 = 2;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// check if the start point is near the plane because \"intersectLine\" is not robust to that case\r\n\t\t\t\tconst doesIntersect = plane1.intersectLine( edge, targetPoint ) || startIntersects;\r\n\t\t\t\tif ( doesIntersect && ! isNearZero( targetPoint.distanceTo( pNext ) ) ) {\r\n\r\n\t\t\t\t\tcount2 ++;\r\n\t\t\t\t\tif ( found2 ) {\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfound2 = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( count2 === 1 && this.containsPoint( edge2.start ) ) {\r\n\r\n\t\t\t\tif ( target ) {\r\n\r\n\t\t\t\t\ttarget.start.copy( edge2.start );\r\n\t\t\t\t\ttarget.end.copy( edge2.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else if ( count2 !== 2 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// find swap the second edge so both lines are running the same direction\r\n\t\t\tedge1.delta( dir1 );\r\n\t\t\tedge2.delta( dir2 );\r\n\r\n\t\t\tif ( dir1.dot( dir2 ) < 0 ) {\r\n\r\n\t\t\t\tlet tmp = edge2.start;\r\n\t\t\t\tedge2.start = edge2.end;\r\n\t\t\t\tedge2.end = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// check if the edges are overlapping\r\n\t\t\tconst s1 = edge1.start.dot( dir1 );\r\n\t\t\tconst e1 = edge1.end.dot( dir1 );\r\n\t\t\tconst s2 = edge2.start.dot( dir1 );\r\n\t\t\tconst e2 = edge2.end.dot( dir1 );\r\n\t\t\tconst separated1 = e1 < s2;\r\n\t\t\tconst separated2 = s1 < e2;\r\n\r\n\t\t\tif ( s1 !== e2 && s2 !== e1 && separated1 === separated2 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// assign the target output\r\n\t\t\tif ( target ) {\r\n\r\n\t\t\t\ttempDir.subVectors( edge1.start, edge2.start );\r\n\t\t\t\tif ( tempDir.dot( dir1 ) > 0 ) {\r\n\r\n\t\t\t\t\ttarget.start.copy( edge1.start );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttarget.start.copy( edge2.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttempDir.subVectors( edge1.end, edge2.end );\r\n\t\t\t\tif ( tempDir.dot( dir1 ) < 0 ) {\r\n\r\n\t\t\t\t\ttarget.end.copy( edge1.end );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttarget.end.copy( edge2.end );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nExtendedTriangle.prototype.distanceToPoint = ( function () {\r\n\r\n\tconst target = new Vector3();\r\n\treturn function distanceToPoint( point ) {\r\n\r\n\t\tthis.closestPointToPoint( point, target );\r\n\t\treturn point.distanceTo( target );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n\r\nExtendedTriangle.prototype.distanceToTriangle = ( function () {\r\n\r\n\tconst point = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\tconst cornerFields = [ 'a', 'b', 'c' ];\r\n\tconst line1 = new Line3();\r\n\tconst line2 = new Line3();\r\n\r\n\treturn function distanceToTriangle( other, target1 = null, target2 = null ) {\r\n\r\n\t\tconst lineTarget = target1 || target2 ? line1 : null;\r\n\t\tif ( this.intersectsTriangle( other, lineTarget ) ) {\r\n\r\n\t\t\tif ( target1 || target2 ) {\r\n\r\n\t\t\t\tif ( target1 ) lineTarget.getCenter( target1 );\r\n\t\t\t\tif ( target2 ) lineTarget.getCenter( target2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check all point distances\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tlet dist;\r\n\t\t\tconst field = cornerFields[ i ];\r\n\t\t\tconst otherVec = other[ field ];\r\n\t\t\tthis.closestPointToPoint( otherVec, point );\r\n\r\n\t\t\tdist = otherVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\tif ( target2 ) target2.copy( otherVec );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tconst thisVec = this[ field ];\r\n\t\t\tother.closestPointToPoint( thisVec, point );\r\n\r\n\t\t\tdist = thisVec.distanceToSquared( point );\r\n\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( thisVec );\r\n\t\t\t\tif ( target2 ) target2.copy( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst f11 = cornerFields[ i ];\r\n\t\t\tconst f12 = cornerFields[ ( i + 1 ) % 3 ];\r\n\t\t\tline1.set( this[ f11 ], this[ f12 ] );\r\n\t\t\tfor ( let i2 = 0; i2 < 3; i2 ++ ) {\r\n\r\n\t\t\t\tconst f21 = cornerFields[ i2 ];\r\n\t\t\t\tconst f22 = cornerFields[ ( i2 + 1 ) % 3 ];\r\n\t\t\t\tline2.set( other[ f21 ], other[ f22 ] );\r\n\r\n\t\t\t\tclosestPointsSegmentToSegment( line1, line2, point, point2 );\r\n\r\n\t\t\t\tconst dist = point.distanceToSquared( point2 );\r\n\t\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\t\tif ( target1 ) target1.copy( point );\r\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n","import { Box3, Vector3, Matrix4, Line3 } from 'three';\r\nimport { SeparatingAxisBounds } from './SeparatingAxisBounds.js';\r\nimport { ExtendedTriangle } from './ExtendedTriangle.js';\r\nimport { closestPointsSegmentToSegment } from './MathUtilities.js';\r\n\r\nexport class OrientedBox extends Box3 {\r\n\r\n\tconstructor( ...args ) {\r\n\r\n\t\tsuper( ...args );\r\n\r\n\t\tthis.isOrientedBox = true;\r\n\t\tthis.matrix = new Matrix4();\r\n\t\tthis.invMatrix = new Matrix4();\r\n\t\tthis.points = new Array( 8 ).fill().map( () => new Vector3() );\r\n\t\tthis.satAxes = new Array( 3 ).fill().map( () => new Vector3() );\r\n\t\tthis.satBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\r\n\t\tthis.alignedSatBounds = new Array( 3 ).fill().map( () => new SeparatingAxisBounds() );\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t}\r\n\r\n\tset( min, max, matrix ) {\r\n\r\n\t\tsuper.set( min, max );\r\n\t\tthis.matrix.copy( matrix );\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\tcopy( other ) {\r\n\r\n\t\tsuper.copy( other );\r\n\t\tthis.matrix.copy( other.matrix );\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\nOrientedBox.prototype.update = ( function () {\r\n\r\n\treturn function update() {\r\n\r\n\t\tconst matrix = this.matrix;\r\n\t\tconst min = this.min;\r\n\t\tconst max = this.max;\r\n\r\n\t\tconst points = this.points;\r\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\r\n\r\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\r\n\r\n\t\t\t\t\tconst i = ( ( 1 << 0 ) * x ) | ( ( 1 << 1 ) * y ) | ( ( 1 << 2 ) * z );\r\n\t\t\t\t\tconst v = points[ i ];\r\n\t\t\t\t\tv.x = x ? max.x : min.x;\r\n\t\t\t\t\tv.y = y ? max.y : min.y;\r\n\t\t\t\t\tv.z = z ? max.z : min.z;\r\n\r\n\t\t\t\t\tv.applyMatrix4( matrix );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds = this.satBounds;\r\n\t\tconst satAxes = this.satAxes;\r\n\t\tconst minVec = points[ 0 ];\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst axis = satAxes[ i ];\r\n\t\t\tconst sb = satBounds[ i ];\r\n\t\t\tconst index = 1 << i;\r\n\t\t\tconst pi = points[ index ];\r\n\r\n\t\t\taxis.subVectors( minVec, pi );\r\n\t\t\tsb.setFromPoints( axis, points );\r\n\r\n\t\t}\r\n\r\n\t\tconst alignedSatBounds = this.alignedSatBounds;\r\n\t\talignedSatBounds[ 0 ].setFromPointsField( points, 'x' );\r\n\t\talignedSatBounds[ 1 ].setFromPointsField( points, 'y' );\r\n\t\talignedSatBounds[ 2 ].setFromPointsField( points, 'z' );\r\n\r\n\t\tthis.invMatrix.copy( this.matrix ).invert();\r\n\t\tthis.needsUpdate = false;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nOrientedBox.prototype.intersectsBox = ( function () {\r\n\r\n\tconst aabbBounds = new SeparatingAxisBounds();\r\n\treturn function intersectsBox( box ) {\r\n\r\n\t\t// TODO: should this be doing SAT against the AABB?\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tconst min = box.min;\r\n\t\tconst max = box.max;\r\n\t\tconst satBounds = this.satBounds;\r\n\t\tconst satAxes = this.satAxes;\r\n\t\tconst alignedSatBounds = this.alignedSatBounds;\r\n\r\n\t\taabbBounds.min = min.x;\r\n\t\taabbBounds.max = max.x;\r\n\t\tif ( alignedSatBounds[ 0 ].isSeparated( aabbBounds ) ) return false;\r\n\r\n\t\taabbBounds.min = min.y;\r\n\t\taabbBounds.max = max.y;\r\n\t\tif ( alignedSatBounds[ 1 ].isSeparated( aabbBounds ) ) return false;\r\n\r\n\t\taabbBounds.min = min.z;\r\n\t\taabbBounds.max = max.z;\r\n\t\tif ( alignedSatBounds[ 2 ].isSeparated( aabbBounds ) ) return false;\r\n\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst axis = satAxes[ i ];\r\n\t\t\tconst sb = satBounds[ i ];\r\n\t\t\taabbBounds.setFromBox( axis, box );\r\n\t\t\tif ( sb.isSeparated( aabbBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nOrientedBox.prototype.intersectsTriangle = ( function () {\r\n\r\n\tconst saTri = new ExtendedTriangle();\r\n\tconst pointsArr = new Array( 3 );\r\n\tconst cachedSatBounds = new SeparatingAxisBounds();\r\n\tconst cachedSatBounds2 = new SeparatingAxisBounds();\r\n\tconst cachedAxis = new Vector3();\r\n\treturn function intersectsTriangle( triangle ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! triangle.isExtendedTriangle ) {\r\n\r\n\t\t\tsaTri.copy( triangle );\r\n\t\t\tsaTri.update();\r\n\t\t\ttriangle = saTri;\r\n\r\n\t\t} else if ( triangle.needsUpdate ) {\r\n\r\n\t\t\ttriangle.update();\r\n\r\n\t\t}\r\n\r\n\t\tconst satBounds = this.satBounds;\r\n\t\tconst satAxes = this.satAxes;\r\n\r\n\t\tpointsArr[ 0 ] = triangle.a;\r\n\t\tpointsArr[ 1 ] = triangle.b;\r\n\t\tpointsArr[ 2 ] = triangle.c;\r\n\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = satBounds[ i ];\r\n\t\t\tconst sa = satAxes[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, pointsArr );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\tconst triSatBounds = triangle.satBounds;\r\n\t\tconst triSatAxes = triangle.satAxes;\r\n\t\tconst points = this.points;\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sb = triSatBounds[ i ];\r\n\t\t\tconst sa = triSatAxes[ i ];\r\n\t\t\tcachedSatBounds.setFromPoints( sa, points );\r\n\t\t\tif ( sb.isSeparated( cachedSatBounds ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\t// check crossed axes\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tconst sa1 = satAxes[ i ];\r\n\t\t\tfor ( let i2 = 0; i2 < 4; i2 ++ ) {\r\n\r\n\t\t\t\tconst sa2 = triSatAxes[ i2 ];\r\n\t\t\t\tcachedAxis.crossVectors( sa1, sa2 );\r\n\t\t\t\tcachedSatBounds.setFromPoints( cachedAxis, pointsArr );\r\n\t\t\t\tcachedSatBounds2.setFromPoints( cachedAxis, points );\r\n\t\t\t\tif ( cachedSatBounds.isSeparated( cachedSatBounds2 ) ) return false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nOrientedBox.prototype.closestPointToPoint = ( function () {\r\n\r\n\treturn function closestPointToPoint( point, target1 ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\ttarget1\r\n\t\t\t.copy( point )\r\n\t\t\t.applyMatrix4( this.invMatrix )\r\n\t\t\t.clamp( this.min, this.max )\r\n\t\t\t.applyMatrix4( this.matrix );\r\n\r\n\t\treturn target1;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nOrientedBox.prototype.distanceToPoint = ( function () {\r\n\r\n\tconst target = new Vector3();\r\n\treturn function distanceToPoint( point ) {\r\n\r\n\t\tthis.closestPointToPoint( point, target );\r\n\t\treturn point.distanceTo( target );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nOrientedBox.prototype.distanceToBox = ( function () {\r\n\r\n\tconst xyzFields = [ 'x', 'y', 'z' ];\r\n\tconst segments1 = new Array( 12 ).fill().map( () => new Line3() );\r\n\tconst segments2 = new Array( 12 ).fill().map( () => new Line3() );\r\n\r\n\tconst point1 = new Vector3();\r\n\tconst point2 = new Vector3();\r\n\r\n\t// early out if we find a value below threshold\r\n\treturn function distanceToBox( box, threshold = 0, target1 = null, target2 = null ) {\r\n\r\n\t\tif ( this.needsUpdate ) {\r\n\r\n\t\t\tthis.update();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.intersectsBox( box ) ) {\r\n\r\n\t\t\tif ( target1 || target2 ) {\r\n\r\n\t\t\t\tbox.getCenter( point2 );\r\n\t\t\t\tthis.closestPointToPoint( point2, point1 );\r\n\t\t\t\tbox.closestPointToPoint( point1, point2 );\r\n\r\n\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t\tconst threshold2 = threshold * threshold;\r\n\t\tconst min = box.min;\r\n\t\tconst max = box.max;\r\n\t\tconst points = this.points;\r\n\r\n\r\n\t\t// iterate over every edge and compare distances\r\n\t\tlet closestDistanceSq = Infinity;\r\n\r\n\t\t// check over all these points\r\n\t\tfor ( let i = 0; i < 8; i ++ ) {\r\n\r\n\t\t\tconst p = points[ i ];\r\n\t\t\tpoint2.copy( p ).clamp( min, max );\r\n\r\n\t\t\tconst dist = p.distanceToSquared( point2 );\r\n\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\tif ( target1 ) target1.copy( p );\r\n\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// generate and check all line segment distances\r\n\t\tlet count = 0;\r\n\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\tfor ( let i1 = 0; i1 <= 1; i1 ++ ) {\r\n\r\n\t\t\t\tfor ( let i2 = 0; i2 <= 1; i2 ++ ) {\r\n\r\n\t\t\t\t\tconst nextIndex = ( i + 1 ) % 3;\r\n\t\t\t\t\tconst nextIndex2 = ( i + 2 ) % 3;\r\n\r\n\t\t\t\t\t// get obb line segments\r\n\t\t\t\t\tconst index = i1 << nextIndex | i2 << nextIndex2;\r\n\t\t\t\t\tconst index2 = 1 << i | i1 << nextIndex | i2 << nextIndex2;\r\n\t\t\t\t\tconst p1 = points[ index ];\r\n\t\t\t\t\tconst p2 = points[ index2 ];\r\n\t\t\t\t\tconst line1 = segments1[ count ];\r\n\t\t\t\t\tline1.set( p1, p2 );\r\n\r\n\r\n\t\t\t\t\t// get aabb line segments\r\n\t\t\t\t\tconst f1 = xyzFields[ i ];\r\n\t\t\t\t\tconst f2 = xyzFields[ nextIndex ];\r\n\t\t\t\t\tconst f3 = xyzFields[ nextIndex2 ];\r\n\t\t\t\t\tconst line2 = segments2[ count ];\r\n\t\t\t\t\tconst start = line2.start;\r\n\t\t\t\t\tconst end = line2.end;\r\n\r\n\t\t\t\t\tstart[ f1 ] = min[ f1 ];\r\n\t\t\t\t\tstart[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\r\n\t\t\t\t\tstart[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\r\n\r\n\t\t\t\t\tend[ f1 ] = max[ f1 ];\r\n\t\t\t\t\tend[ f2 ] = i1 ? min[ f2 ] : max[ f2 ];\r\n\t\t\t\t\tend[ f3 ] = i2 ? min[ f3 ] : max[ f2 ];\r\n\r\n\t\t\t\t\tcount ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// check all the other boxes point\r\n\t\tfor ( let x = 0; x <= 1; x ++ ) {\r\n\r\n\t\t\tfor ( let y = 0; y <= 1; y ++ ) {\r\n\r\n\t\t\t\tfor ( let z = 0; z <= 1; z ++ ) {\r\n\r\n\t\t\t\t\tpoint2.x = x ? max.x : min.x;\r\n\t\t\t\t\tpoint2.y = y ? max.y : min.y;\r\n\t\t\t\t\tpoint2.z = z ? max.z : min.z;\r\n\r\n\t\t\t\t\tthis.closestPointToPoint( point2, point1 );\r\n\t\t\t\t\tconst dist = point2.distanceToSquared( point1 );\r\n\t\t\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( let i = 0; i < 12; i ++ ) {\r\n\r\n\t\t\tconst l1 = segments1[ i ];\r\n\t\t\tfor ( let i2 = 0; i2 < 12; i2 ++ ) {\r\n\r\n\t\t\t\tconst l2 = segments2[ i2 ];\r\n\t\t\t\tclosestPointsSegmentToSegment( l1, l2, point1, point2 );\r\n\t\t\t\tconst dist = point1.distanceToSquared( point2 );\r\n\t\t\t\tif ( dist < closestDistanceSq ) {\r\n\r\n\t\t\t\t\tclosestDistanceSq = dist;\r\n\t\t\t\t\tif ( target1 ) target1.copy( point1 );\r\n\t\t\t\t\tif ( target2 ) target2.copy( point2 );\r\n\r\n\t\t\t\t\tif ( dist < threshold2 ) return Math.sqrt( dist );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn Math.sqrt( closestDistanceSq );\r\n\r\n\t};\r\n\r\n} )();\r\n","\r\nimport { Vector2, Vector3, Triangle } from 'three';\r\n\r\n// sets the vertices of triangle `tri` with the 3 vertices after i\r\nexport function setTriangle( tri, i, index, pos ) {\r\n\r\n\tconst ta = tri.a;\r\n\tconst tb = tri.b;\r\n\tconst tc = tri.c;\r\n\r\n\tlet i0 = i;\r\n\tlet i1 = i + 1;\r\n\tlet i2 = i + 2;\r\n\tif ( index ) {\r\n\r\n\t\ti0 = index.getX( i );\r\n\t\ti1 = index.getX( i + 1 );\r\n\t\ti2 = index.getX( i + 2 );\r\n\r\n\t}\r\n\r\n\tta.x = pos.getX( i0 );\r\n\tta.y = pos.getY( i0 );\r\n\tta.z = pos.getZ( i0 );\r\n\r\n\ttb.x = pos.getX( i1 );\r\n\ttb.y = pos.getY( i1 );\r\n\ttb.z = pos.getZ( i1 );\r\n\r\n\ttc.x = pos.getX( i2 );\r\n\ttc.y = pos.getY( i2 );\r\n\ttc.z = pos.getZ( i2 );\r\n\r\n}\r\n\r\nexport function iterateOverTriangles(\r\n\toffset,\r\n\tcount,\r\n\tgeometry,\r\n\tintersectsTriangleFunc,\r\n\tcontained,\r\n\tdepth,\r\n\ttriangle\r\n) {\r\n\r\n\tconst index = geometry.index;\r\n\tconst pos = geometry.attributes.position;\r\n\tfor ( let i = offset, l = count + offset; i < l; i ++ ) {\r\n\r\n\t\tsetTriangle( triangle, i * 3, index, pos );\r\n\t\ttriangle.needsUpdate = true;\r\n\r\n\t\tif ( intersectsTriangleFunc( triangle, i, contained, depth ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn false;\r\n\r\n}\r\n\r\nconst tempV1 = /* @__PURE__ */ new Vector3();\r\nconst tempV2 = /* @__PURE__ */ new Vector3();\r\nconst tempV3 = /* @__PURE__ */ new Vector3();\r\nconst tempUV1 = /* @__PURE__ */ new Vector2();\r\nconst tempUV2 = /* @__PURE__ */ new Vector2();\r\nconst tempUV3 = /* @__PURE__ */ new Vector2();\r\n\r\nexport function getTriangleHitPointInfo( point, geometry, triangleIndex, target ) {\r\n\r\n\tconst indices = geometry.getIndex().array;\r\n\tconst positions = geometry.getAttribute( 'position' );\r\n\tconst uvs = geometry.getAttribute( 'uv' );\r\n\r\n\tconst a = indices[ triangleIndex * 3 ];\r\n\tconst b = indices[ triangleIndex * 3 + 1 ];\r\n\tconst c = indices[ triangleIndex * 3 + 2 ];\r\n\r\n\ttempV1.fromBufferAttribute( positions, a );\r\n\ttempV2.fromBufferAttribute( positions, b );\r\n\ttempV3.fromBufferAttribute( positions, c );\r\n\r\n\t// find the associated material index\r\n\tlet materialIndex = 0;\r\n\tconst groups = geometry.groups;\r\n\tconst firstVertexIndex = triangleIndex * 3;\r\n\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tconst group = groups[ i ];\r\n\t\tconst { start, count } = group;\r\n\t\tif ( firstVertexIndex >= start && firstVertexIndex < start + count ) {\r\n\r\n\t\t\tmaterialIndex = group.materialIndex;\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// extract uvs\r\n\tlet uv = null;\r\n\tif ( uvs ) {\r\n\r\n\t\ttempUV1.fromBufferAttribute( uvs, a );\r\n\t\ttempUV2.fromBufferAttribute( uvs, b );\r\n\t\ttempUV3.fromBufferAttribute( uvs, c );\r\n\r\n\t\tif ( target && target.uv ) uv = target.uv;\r\n\t\telse uv = new Vector2();\r\n\r\n\t\tTriangle.getUV( point, tempV1, tempV2, tempV3, tempUV1, tempUV2, tempUV3, uv );\r\n\r\n\t}\r\n\r\n\t// adjust the provided target or create a new one\r\n\tif ( target ) {\r\n\r\n\t\tif ( ! target.face ) target.face = { };\r\n\t\ttarget.face.a = a;\r\n\t\ttarget.face.b = b;\r\n\t\ttarget.face.c = c;\r\n\t\ttarget.face.materialIndex = materialIndex;\r\n\t\tif ( ! target.face.normal ) target.face.normal = new Vector3();\r\n\t\tTriangle.getNormal( tempV1, tempV2, tempV3, target.face.normal );\r\n\r\n\t\tif ( ! target.uv ) target.uv = new Vector2();\r\n\t\ttarget.uv.copy( uv );\r\n\r\n\t\treturn target;\r\n\r\n\t} else {\r\n\r\n\t\treturn {\r\n\t\t\tface: {\r\n\t\t\t\ta: a,\r\n\t\t\t\tb: b,\r\n\t\t\t\tc: c,\r\n\t\t\t\tmaterialIndex: materialIndex,\r\n\t\t\t\tnormal: Triangle.getNormal( tempV1, tempV2, tempV3, new Vector3() )\r\n\t\t\t},\r\n\t\t\tuv: uv\r\n\t\t};\r\n\r\n\t}\r\n\r\n}\r\n","export class PrimitivePool {\r\n\r\n\tconstructor( getNewPrimitive ) {\r\n\r\n\t\tthis._getNewPrimitive = getNewPrimitive;\r\n\t\tthis._primitives = [];\r\n\r\n\t}\r\n\r\n\tgetPrimitive() {\r\n\r\n\t\tconst primitives = this._primitives;\r\n\t\tif ( primitives.length === 0 ) {\r\n\r\n\t\t\treturn this._getNewPrimitive();\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn primitives.pop();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treleasePrimitive( primitive ) {\r\n\r\n\t\tthis._primitives.push( primitive );\r\n\r\n\t}\r\n\r\n}\r\n","export function IS_LEAF( n16, uint16Array ) {\r\n\r\n\treturn uint16Array[ n16 + 15 ] === 0xFFFF;\r\n\r\n}\r\n\r\nexport function OFFSET( n32, uint32Array ) {\r\n\r\n\treturn uint32Array[ n32 + 6 ];\r\n\r\n}\r\n\r\nexport function COUNT( n16, uint16Array ) {\r\n\r\n\treturn uint16Array[ n16 + 14 ];\r\n\r\n}\r\n\r\nexport function LEFT_NODE( n32 ) {\r\n\r\n\treturn n32 + 8;\r\n\r\n}\r\n\r\nexport function RIGHT_NODE( n32, uint32Array ) {\r\n\r\n\treturn uint32Array[ n32 + 6 ];\r\n\r\n}\r\n\r\nexport function SPLIT_AXIS( n32, uint32Array ) {\r\n\r\n\treturn uint32Array[ n32 + 7 ];\r\n\r\n}\r\n\r\nexport function BOUNDING_DATA_INDEX( n32 ) {\r\n\r\n\treturn n32;\r\n\r\n}\r\n","import { Box3, Vector3, Matrix4 } from 'three';\r\nimport { CONTAINED } from './Constants.js';\r\n\r\nimport { OrientedBox } from '../math/OrientedBox.js';\r\nimport { ExtendedTriangle } from '../math/ExtendedTriangle.js';\r\nimport { intersectTris, intersectClosestTri } from '../utils/GeometryRayIntersectUtilities.js';\r\nimport { setTriangle } from '../utils/TriangleUtilities.js';\r\nimport { arrayToBox } from '../utils/ArrayBoxUtilities.js';\r\nimport { PrimitivePool } from '../utils/PrimitivePool.js';\r\nimport { COUNT, OFFSET, LEFT_NODE, RIGHT_NODE, IS_LEAF, BOUNDING_DATA_INDEX, SPLIT_AXIS } from './nodeBufferFunctions.js';\r\n\r\nconst boundingBox = new Box3();\r\nconst boxIntersection = new Vector3();\r\nconst xyzFields = [ 'x', 'y', 'z' ];\r\n\r\nexport function raycast( nodeIndex32, geometry, side, ray, intersects ) {\r\n\r\n\tlet nodeIndex16 = nodeIndex32 * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\r\n\r\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\r\n\tif ( isLeaf ) {\r\n\r\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\r\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\r\n\r\n\t\tintersectTris( geometry, side, ray, offset, count, intersects );\r\n\r\n\t} else {\r\n\r\n\t\tconst leftIndex = LEFT_NODE( nodeIndex32 );\r\n\t\tif ( intersectRay( leftIndex, float32Array, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( leftIndex, geometry, side, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t\tconst rightIndex = RIGHT_NODE( nodeIndex32, uint32Array );\r\n\t\tif ( intersectRay( rightIndex, float32Array, ray, boxIntersection ) ) {\r\n\r\n\t\t\traycast( rightIndex, geometry, side, ray, intersects );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function raycastFirst( nodeIndex32, geometry, side, ray ) {\r\n\r\n\tlet nodeIndex16 = nodeIndex32 * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\r\n\r\n\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\r\n\tif ( isLeaf ) {\r\n\r\n\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\r\n\t\tconst count = COUNT( nodeIndex16, uint16Array );\r\n\t\treturn intersectClosestTri( geometry, side, ray, offset, count );\r\n\r\n\t} else {\r\n\r\n\t\t// consider the position of the split plane with respect to the oncoming ray; whichever direction\r\n\t\t// the ray is coming from, look for an intersection among that side of the tree first\r\n\t\tconst splitAxis = SPLIT_AXIS( nodeIndex32, uint32Array );\r\n\t\tconst xyzAxis = xyzFields[ splitAxis ];\r\n\t\tconst rayDir = ray.direction[ xyzAxis ];\r\n\t\tconst leftToRight = rayDir >= 0;\r\n\r\n\t\t// c1 is the child to check first\r\n\t\tlet c1, c2;\r\n\t\tif ( leftToRight ) {\r\n\r\n\t\t\tc1 = LEFT_NODE( nodeIndex32 );\r\n\t\t\tc2 = RIGHT_NODE( nodeIndex32, uint32Array );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tc1 = RIGHT_NODE( nodeIndex32, uint32Array );\r\n\t\t\tc2 = LEFT_NODE( nodeIndex32 );\r\n\r\n\t\t}\r\n\r\n\t\tconst c1Intersection = intersectRay( c1, float32Array, ray, boxIntersection );\r\n\t\tconst c1Result = c1Intersection ? raycastFirst( c1, geometry, side, ray ) : null;\r\n\r\n\t\t// if we got an intersection in the first node and it's closer than the second node's bounding\r\n\t\t// box, we don't need to consider the second node because it couldn't possibly be a better result\r\n\t\tif ( c1Result ) {\r\n\r\n\t\t\t// check if the point is within the second bounds\r\n\t\t\t// \"point\" is in the local frame of the bvh\r\n\t\t\tconst point = c1Result.point[ xyzAxis ];\r\n\t\t\tconst isOutside = leftToRight ?\r\n\t\t\t\tpoint <= float32Array[ c2 + splitAxis ] : // min bounding data\r\n\t\t\t\tpoint >= float32Array[ c2 + splitAxis + 3 ]; // max bounding data\r\n\r\n\t\t\tif ( isOutside ) {\r\n\r\n\t\t\t\treturn c1Result;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// either there was no intersection in the first node, or there could still be a closer\r\n\t\t// intersection in the second, so check the second node and then take the better of the two\r\n\t\tconst c2Intersection = intersectRay( c2, float32Array, ray, boxIntersection );\r\n\t\tconst c2Result = c2Intersection ? raycastFirst( c2, geometry, side, ray ) : null;\r\n\r\n\t\tif ( c1Result && c2Result ) {\r\n\r\n\t\t\treturn c1Result.distance <= c2Result.distance ? c1Result : c2Result;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn c1Result || c2Result || null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport const shapecast = ( function () {\r\n\r\n\tlet _box1, _box2;\r\n\tconst boxStack = [];\r\n\tconst boxPool = new PrimitivePool( () => new Box3() );\r\n\r\n\treturn function shapecast( ...args ) {\r\n\r\n\t\t_box1 = boxPool.getPrimitive();\r\n\t\t_box2 = boxPool.getPrimitive();\r\n\t\tboxStack.push( _box1, _box2 );\r\n\r\n\t\tconst result = shapecastTraverse( ...args );\r\n\r\n\t\tboxPool.releasePrimitive( _box1 );\r\n\t\tboxPool.releasePrimitive( _box2 );\r\n\t\tboxStack.pop();\r\n\t\tboxStack.pop();\r\n\r\n\t\tconst length = boxStack.length;\r\n\t\tif ( length > 0 ) {\r\n\r\n\t\t\t_box2 = boxStack[ length - 1 ];\r\n\t\t\t_box1 = boxStack[ length - 2 ];\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\tfunction shapecastTraverse(\r\n\t\tnodeIndex32,\r\n\t\tgeometry,\r\n\t\tintersectsBoundsFunc,\r\n\t\tintersectsRangeFunc,\r\n\t\tnodeScoreFunc = null,\r\n\t\tnodeIndexByteOffset = 0, // offset for unique node identifier\r\n\t\tdepth = 0\r\n\t) {\r\n\r\n\t\t// Define these inside the function so it has access to the local variables needed\r\n\t\t// when converting to the buffer equivalents\r\n\t\tfunction getLeftOffset( nodeIndex32 ) {\r\n\r\n\t\t\tlet nodeIndex16 = nodeIndex32 * 2, uint16Array = _uint16Array, uint32Array = _uint32Array;\r\n\r\n\t\t\t// traverse until we find a leaf\r\n\t\t\twhile ( ! IS_LEAF( nodeIndex16, uint16Array ) ) {\r\n\r\n\t\t\t\tnodeIndex32 = LEFT_NODE( nodeIndex32 );\r\n\t\t\t\tnodeIndex16 = nodeIndex32 * 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn OFFSET( nodeIndex32, uint32Array );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getRightEndOffset( nodeIndex32 ) {\r\n\r\n\t\t\tlet nodeIndex16 = nodeIndex32 * 2, uint16Array = _uint16Array, uint32Array = _uint32Array;\r\n\r\n\t\t\t// traverse until we find a leaf\r\n\t\t\twhile ( ! IS_LEAF( nodeIndex16, uint16Array ) ) {\r\n\r\n\t\t\t\t// adjust offset to point to the right node\r\n\t\t\t\tnodeIndex32 = RIGHT_NODE( nodeIndex32, uint32Array );\r\n\t\t\t\tnodeIndex16 = nodeIndex32 * 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// return the end offset of the triangle range\r\n\t\t\treturn OFFSET( nodeIndex32, uint32Array ) + COUNT( nodeIndex16, uint16Array );\r\n\r\n\t\t}\r\n\r\n\t\tlet nodeIndex16 = nodeIndex32 * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\r\n\r\n\t\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\r\n\t\tif ( isLeaf ) {\r\n\r\n\t\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\r\n\t\t\tconst count = COUNT( nodeIndex16, uint16Array );\r\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, _box1 );\r\n\t\t\treturn intersectsRangeFunc( offset, count, false, depth, nodeIndexByteOffset + nodeIndex32, _box1 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = LEFT_NODE( nodeIndex32 );\r\n\t\t\tconst right = RIGHT_NODE( nodeIndex32, uint32Array );\r\n\t\t\tlet c1 = left;\r\n\t\t\tlet c2 = right;\r\n\r\n\t\t\tlet score1, score2;\r\n\t\t\tlet box1, box2;\r\n\t\t\tif ( nodeScoreFunc ) {\r\n\r\n\t\t\t\tbox1 = _box1;\r\n\t\t\t\tbox2 = _box2;\r\n\r\n\t\t\t\t// bounding data is not offset\r\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c1 ), float32Array, box1 );\r\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c2 ), float32Array, box2 );\r\n\r\n\t\t\t\tscore1 = nodeScoreFunc( box1 );\r\n\t\t\t\tscore2 = nodeScoreFunc( box2 );\r\n\r\n\t\t\t\tif ( score2 < score1 ) {\r\n\r\n\t\t\t\t\tc1 = right;\r\n\t\t\t\t\tc2 = left;\r\n\r\n\t\t\t\t\tconst temp = score1;\r\n\t\t\t\t\tscore1 = score2;\r\n\t\t\t\t\tscore2 = temp;\r\n\r\n\t\t\t\t\tbox1 = box2;\r\n\t\t\t\t\t// box2 is always set before use below\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Check box 1 intersection\r\n\t\t\tif ( ! box1 ) {\r\n\r\n\t\t\t\tbox1 = _box1;\r\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c1 ), float32Array, box1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst isC1Leaf = IS_LEAF( c1 * 2, uint16Array );\r\n\t\t\tconst c1Intersection = intersectsBoundsFunc( box1, isC1Leaf, score1, depth + 1, nodeIndexByteOffset + c1 );\r\n\r\n\t\t\tlet c1StopTraversal;\r\n\t\t\tif ( c1Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst offset = getLeftOffset( c1 );\r\n\t\t\t\tconst end = getRightEndOffset( c1 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc1StopTraversal = intersectsRangeFunc( offset, count, true, depth + 1, nodeIndexByteOffset + c1, box1 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc1StopTraversal =\r\n\t\t\t\t\tc1Intersection &&\r\n\t\t\t\t\tshapecastTraverse(\r\n\t\t\t\t\t\tc1,\r\n\t\t\t\t\t\tgeometry,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsRangeFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tnodeIndexByteOffset,\r\n\t\t\t\t\t\tdepth + 1\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c1StopTraversal ) return true;\r\n\r\n\t\t\t// Check box 2 intersection\r\n\t\t\t// cached box2 will have been overwritten by previous traversal\r\n\t\t\tbox2 = _box2;\r\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( c2 ), float32Array, box2 );\r\n\r\n\t\t\tconst isC2Leaf = IS_LEAF( c2 * 2, uint16Array );\r\n\t\t\tconst c2Intersection = intersectsBoundsFunc( box2, isC2Leaf, score2, depth + 1, nodeIndexByteOffset + c2 );\r\n\r\n\t\t\tlet c2StopTraversal;\r\n\t\t\tif ( c2Intersection === CONTAINED ) {\r\n\r\n\t\t\t\tconst offset = getLeftOffset( c2 );\r\n\t\t\t\tconst end = getRightEndOffset( c2 );\r\n\t\t\t\tconst count = end - offset;\r\n\r\n\t\t\t\tc2StopTraversal = intersectsRangeFunc( offset, count, true, depth + 1, nodeIndexByteOffset + c2, box2 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tc2StopTraversal =\r\n\t\t\t\t\tc2Intersection &&\r\n\t\t\t\t\tshapecastTraverse(\r\n\t\t\t\t\t\tc2,\r\n\t\t\t\t\t\tgeometry,\r\n\t\t\t\t\t\tintersectsBoundsFunc,\r\n\t\t\t\t\t\tintersectsRangeFunc,\r\n\t\t\t\t\t\tnodeScoreFunc,\r\n\t\t\t\t\t\tnodeIndexByteOffset,\r\n\t\t\t\t\t\tdepth + 1\r\n\t\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( c2StopTraversal ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n} )();\r\n\r\nexport const intersectsGeometry = ( function () {\r\n\r\n\tconst triangle = new ExtendedTriangle();\r\n\tconst triangle2 = new ExtendedTriangle();\r\n\tconst invertedMat = new Matrix4();\r\n\r\n\tconst obb = new OrientedBox();\r\n\tconst obb2 = new OrientedBox();\r\n\r\n\treturn function intersectsGeometry( nodeIndex32, geometry, otherGeometry, geometryToBvh, cachedObb = null ) {\r\n\r\n\t\tlet nodeIndex16 = nodeIndex32 * 2, float32Array = _float32Array, uint16Array = _uint16Array, uint32Array = _uint32Array;\r\n\r\n\t\tif ( cachedObb === null ) {\r\n\r\n\t\t\tif ( ! otherGeometry.boundingBox ) {\r\n\r\n\t\t\t\totherGeometry.computeBoundingBox();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\r\n\t\t\tcachedObb = obb;\r\n\r\n\t\t}\r\n\r\n\t\tconst isLeaf = IS_LEAF( nodeIndex16, uint16Array );\r\n\t\tif ( isLeaf ) {\r\n\r\n\t\t\tconst thisGeometry = geometry;\r\n\t\t\tconst thisIndex = thisGeometry.index;\r\n\t\t\tconst thisPos = thisGeometry.attributes.position;\r\n\r\n\t\t\tconst index = otherGeometry.index;\r\n\t\t\tconst pos = otherGeometry.attributes.position;\r\n\r\n\t\t\tconst offset = OFFSET( nodeIndex32, uint32Array );\r\n\t\t\tconst count = COUNT( nodeIndex16, uint16Array );\r\n\r\n\t\t\t// get the inverse of the geometry matrix so we can transform our triangles into the\r\n\t\t\t// geometry space we're trying to test. We assume there are fewer triangles being checked\r\n\t\t\t// here.\r\n\t\t\tinvertedMat.copy( geometryToBvh ).invert();\r\n\r\n\t\t\tif ( otherGeometry.boundsTree ) {\r\n\r\n\t\t\t\tarrayToBox( BOUNDING_DATA_INDEX( nodeIndex32 ), float32Array, obb2 );\r\n\t\t\t\tobb2.matrix.copy( invertedMat );\r\n\t\t\t\tobb2.needsUpdate = true;\r\n\r\n\t\t\t\tconst res = otherGeometry.boundsTree.shapecast( {\r\n\r\n\t\t\t\t\tintersectsBounds: box => obb2.intersectsBox( box ),\r\n\r\n\t\t\t\t\tintersectsTriangle: tri => {\r\n\r\n\t\t\t\t\t\ttri.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\ttri.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\ttri.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\ttri.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tfor ( let i = offset * 3, l = ( count + offset ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\t\t\tsetTriangle( triangle2, i, thisIndex, thisPos );\r\n\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\r\n\t\t\t\t\t\t\tif ( tri.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t\treturn res;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( let i = offset * 3, l = ( count + offset * 3 ); i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t// this triangle needs to be transformed into the current BVH coordinate frame\r\n\t\t\t\t\tsetTriangle( triangle, i, thisIndex, thisPos );\r\n\t\t\t\t\ttriangle.a.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.b.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.c.applyMatrix4( invertedMat );\r\n\t\t\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\t\t\tfor ( let i2 = 0, l2 = index.count; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\t\tsetTriangle( triangle2, i2, index, pos );\r\n\t\t\t\t\t\ttriangle2.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tif ( triangle.intersectsTriangle( triangle2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst left = nodeIndex32 + 8;\r\n\t\t\tconst right = uint32Array[ nodeIndex32 + 6 ];\r\n\r\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( left ), float32Array, boundingBox );\r\n\t\t\tconst leftIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( left, geometry, otherGeometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( leftIntersection ) return true;\r\n\r\n\t\t\tarrayToBox( BOUNDING_DATA_INDEX( right ), float32Array, boundingBox );\r\n\t\t\tconst rightIntersection =\r\n\t\t\t\tcachedObb.intersectsBox( boundingBox ) &&\r\n\t\t\t\tintersectsGeometry( right, geometry, otherGeometry, geometryToBvh, cachedObb );\r\n\r\n\t\t\tif ( rightIntersection ) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nfunction intersectRay( nodeIndex32, array, ray, target ) {\r\n\r\n\tarrayToBox( nodeIndex32, array, boundingBox );\r\n\treturn ray.intersectBox( boundingBox, target );\r\n\r\n}\r\n\r\nconst bufferStack = [];\r\nlet _prevBuffer;\r\nlet _float32Array;\r\nlet _uint16Array;\r\nlet _uint32Array;\r\nexport function setBuffer( buffer ) {\r\n\r\n\tif ( _prevBuffer ) {\r\n\r\n\t\tbufferStack.push( _prevBuffer );\r\n\r\n\t}\r\n\r\n\t_prevBuffer = buffer;\r\n\t_float32Array = new Float32Array( buffer );\r\n\t_uint16Array = new Uint16Array( buffer );\r\n\t_uint32Array = new Uint32Array( buffer );\r\n\r\n}\r\n\r\nexport function clearBuffer() {\r\n\r\n\t_prevBuffer = null;\r\n\t_float32Array = null;\r\n\t_uint16Array = null;\r\n\t_uint32Array = null;\r\n\r\n\tif ( bufferStack.length ) {\r\n\r\n\t\tsetBuffer( bufferStack.pop() );\r\n\r\n\t}\r\n\r\n}\r\n","import { Vector3, BufferAttribute, Box3, FrontSide, Matrix4 } from 'three';\r\nimport { CENTER, BYTES_PER_NODE, IS_LEAFNODE_FLAG } from './Constants.js';\r\nimport { buildPackedTree } from './buildFunctions.js';\r\nimport {\r\n\traycast,\r\n\traycastFirst,\r\n\tshapecast,\r\n\tintersectsGeometry,\r\n\tsetBuffer,\r\n\tclearBuffer,\r\n} from './castFunctions.js';\r\nimport { OrientedBox } from '../math/OrientedBox.js';\r\nimport { ExtendedTriangle } from '../math/ExtendedTriangle.js';\r\nimport { PrimitivePool } from '../utils/PrimitivePool.js';\r\nimport { arrayToBox } from '../utils/ArrayBoxUtilities.js';\r\nimport { iterateOverTriangles, setTriangle } from '../utils/TriangleUtilities.js';\r\nimport { convertRaycastIntersect } from '../utils/GeometryRayIntersectUtilities.js';\r\n\r\nconst SKIP_GENERATION = Symbol( 'skip tree generation' );\r\n\r\nconst aabb = /* @__PURE__ */ new Box3();\r\nconst aabb2 = /* @__PURE__ */ new Box3();\r\nconst tempMatrix = /* @__PURE__ */ new Matrix4();\r\nconst obb = /* @__PURE__ */ new OrientedBox();\r\nconst obb2 = /* @__PURE__ */ new OrientedBox();\r\nconst temp = /* @__PURE__ */ new Vector3();\r\nconst temp1 = /* @__PURE__ */ new Vector3();\r\nconst temp2 = /* @__PURE__ */ new Vector3();\r\nconst temp3 = /* @__PURE__ */ new Vector3();\r\nconst temp4 = /* @__PURE__ */ new Vector3();\r\nconst tempBox = /* @__PURE__ */ new Box3();\r\nconst trianglePool = /* @__PURE__ */ new PrimitivePool( () => new ExtendedTriangle() );\r\n\r\nexport class MeshBVH {\r\n\r\n\tstatic serialize( bvh, options = {} ) {\r\n\r\n\t\tif ( options.isBufferGeometry ) {\r\n\r\n\t\t\tconsole.warn( 'MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature.' );\r\n\r\n\t\t\treturn MeshBVH.serialize(\r\n\t\t\t\targuments[ 0 ],\r\n\t\t\t\t{\r\n\t\t\t\t\tcloneBuffers: arguments[ 2 ] === undefined ? true : arguments[ 2 ],\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t\toptions = {\r\n\t\t\tcloneBuffers: true,\r\n\t\t\t...options,\r\n\t\t};\r\n\r\n\t\tconst geometry = bvh.geometry;\r\n\t\tconst rootData = bvh._roots;\r\n\t\tconst indexAttribute = geometry.getIndex();\r\n\t\tlet result;\r\n\t\tif ( options.cloneBuffers ) {\r\n\r\n\t\t\tresult = {\r\n\t\t\t\troots: rootData.map( root => root.slice() ),\r\n\t\t\t\tindex: indexAttribute.array.slice(),\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = {\r\n\t\t\t\troots: rootData,\r\n\t\t\t\tindex: indexAttribute.array,\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tstatic deserialize( data, geometry, options = {} ) {\r\n\r\n\t\tif ( typeof options === 'boolean' ) {\r\n\r\n\t\t\tconsole.warn( 'MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature.' );\r\n\r\n\t\t\treturn MeshBVH.deserialize(\r\n\t\t\t\targuments[ 0 ],\r\n\t\t\t\targuments[ 1 ],\r\n\t\t\t\t{\r\n\t\t\t\t\tsetIndex: arguments[ 2 ] === undefined ? true : arguments[ 2 ],\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t}\r\n\r\n\t\toptions = {\r\n\t\t\tsetIndex: true,\r\n\t\t\t...options,\r\n\t\t};\r\n\r\n\t\tconst { index, roots } = data;\r\n\t\tconst bvh = new MeshBVH( geometry, { ...options, [ SKIP_GENERATION ]: true } );\r\n\t\tbvh._roots = roots;\r\n\r\n\t\tif ( options.setIndex ) {\r\n\r\n\t\t\tconst indexAttribute = geometry.getIndex();\r\n\t\t\tif ( indexAttribute === null ) {\r\n\r\n\t\t\t\tconst newIndex = new BufferAttribute( data.index, 1, false );\r\n\t\t\t\tgeometry.setIndex( newIndex );\r\n\r\n\t\t\t} else if ( indexAttribute.array !== index ) {\r\n\r\n\t\t\t\tindexAttribute.array.set( index );\r\n\t\t\t\tindexAttribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn bvh;\r\n\r\n\t}\r\n\r\n\tconstructor( geometry, options = {} ) {\r\n\r\n\t\tif ( ! geometry.isBufferGeometry ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: Only BufferGeometries are supported.' );\r\n\r\n\t\t} else if ( geometry.index && geometry.index.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.' );\r\n\r\n\t\t}\r\n\r\n\t\t// default options\r\n\t\toptions = Object.assign( {\r\n\r\n\t\t\tstrategy: CENTER,\r\n\t\t\tmaxDepth: 40,\r\n\t\t\tmaxLeafTris: 10,\r\n\t\t\tverbose: true,\r\n\t\t\tuseSharedArrayBuffer: false,\r\n\t\t\tsetBoundingBox: true,\r\n\t\t\tonProgress: null,\r\n\r\n\t\t\t// undocumented options\r\n\r\n\t\t\t// Whether to skip generating the tree. Used for deserialization.\r\n\t\t\t[ SKIP_GENERATION ]: false,\r\n\r\n\t\t}, options );\r\n\r\n\t\tif ( options.useSharedArrayBuffer && typeof SharedArrayBuffer === 'undefined' ) {\r\n\r\n\t\t\tthrow new Error( 'MeshBVH: SharedArrayBuffer is not available.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis._roots = null;\r\n\t\tif ( ! options[ SKIP_GENERATION ] ) {\r\n\r\n\t\t\tthis._roots = buildPackedTree( geometry, options );\r\n\r\n\t\t\tif ( ! geometry.boundingBox && options.setBoundingBox ) {\r\n\r\n\t\t\t\tgeometry.boundingBox = this.getBoundingBox( new Box3() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// retain references to the geometry so we can use them it without having to\r\n\t\t// take a geometry reference in every function.\r\n\t\tthis.geometry = geometry;\r\n\r\n\t}\r\n\r\n\trefit( nodeIndices = null ) {\r\n\r\n\t\tif ( nodeIndices && Array.isArray( nodeIndices ) ) {\r\n\r\n\t\t\tnodeIndices = new Set( nodeIndices );\r\n\r\n\t\t}\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst indexArr = geometry.index.array;\r\n\t\tconst posAttr = geometry.attributes.position;\r\n\t\tconst posArr = posAttr.array;\r\n\r\n\t\t// support for an interleaved position buffer\r\n\t\tconst bufferOffset = posAttr.offset || 0;\r\n\t\tlet stride = 3;\r\n\t\tif ( posAttr.isInterleavedBufferAttribute ) {\r\n\r\n\t\t\tstride = posAttr.data.stride;\r\n\r\n\t\t}\r\n\r\n\t\tlet buffer, uint32Array, uint16Array, float32Array;\r\n\t\tlet byteOffset = 0;\r\n\t\tconst roots = this._roots;\r\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\r\n\r\n\t\t\tbuffer = roots[ i ];\r\n\t\t\tuint32Array = new Uint32Array( buffer );\r\n\t\t\tuint16Array = new Uint16Array( buffer );\r\n\t\t\tfloat32Array = new Float32Array( buffer );\r\n\r\n\t\t\t_traverse( 0, byteOffset );\r\n\t\t\tbyteOffset += buffer.byteLength;\r\n\r\n\t\t}\r\n\r\n\t\tfunction _traverse( node32Index, byteOffset, force = false ) {\r\n\r\n\t\t\tconst node16Index = node32Index * 2;\r\n\t\t\tconst isLeaf = uint16Array[ node16Index + 15 ] === IS_LEAFNODE_FLAG;\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tconst offset = uint32Array[ node32Index + 6 ];\r\n\t\t\t\tconst count = uint16Array[ node16Index + 14 ];\r\n\r\n\t\t\t\tlet minx = Infinity;\r\n\t\t\t\tlet miny = Infinity;\r\n\t\t\t\tlet minz = Infinity;\r\n\t\t\t\tlet maxx = - Infinity;\r\n\t\t\t\tlet maxy = - Infinity;\r\n\t\t\t\tlet maxz = - Infinity;\r\n\t\t\t\tfor ( let i = 3 * offset, l = 3 * ( offset + count ); i < l; i ++ ) {\r\n\r\n\t\t\t\t\tconst index = indexArr[ i ] * stride + bufferOffset;\r\n\t\t\t\t\tconst x = posArr[ index + 0 ];\r\n\t\t\t\t\tconst y = posArr[ index + 1 ];\r\n\t\t\t\t\tconst z = posArr[ index + 2 ];\r\n\r\n\t\t\t\t\tif ( x < minx ) minx = x;\r\n\t\t\t\t\tif ( x > maxx ) maxx = x;\r\n\r\n\t\t\t\t\tif ( y < miny ) miny = y;\r\n\t\t\t\t\tif ( y > maxy ) maxy = y;\r\n\r\n\t\t\t\t\tif ( z < minz ) minz = z;\r\n\t\t\t\t\tif ( z > maxz ) maxz = z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\tfloat32Array[ node32Index + 0 ] !== minx ||\r\n\t\t\t\t\tfloat32Array[ node32Index + 1 ] !== miny ||\r\n\t\t\t\t\tfloat32Array[ node32Index + 2 ] !== minz ||\r\n\r\n\t\t\t\t\tfloat32Array[ node32Index + 3 ] !== maxx ||\r\n\t\t\t\t\tfloat32Array[ node32Index + 4 ] !== maxy ||\r\n\t\t\t\t\tfloat32Array[ node32Index + 5 ] !== maxz\r\n\t\t\t\t) {\r\n\r\n\t\t\t\t\tfloat32Array[ node32Index + 0 ] = minx;\r\n\t\t\t\t\tfloat32Array[ node32Index + 1 ] = miny;\r\n\t\t\t\t\tfloat32Array[ node32Index + 2 ] = minz;\r\n\r\n\t\t\t\t\tfloat32Array[ node32Index + 3 ] = maxx;\r\n\t\t\t\t\tfloat32Array[ node32Index + 4 ] = maxy;\r\n\t\t\t\t\tfloat32Array[ node32Index + 5 ] = maxz;\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconst left = node32Index + 8;\r\n\t\t\t\tconst right = uint32Array[ node32Index + 6 ];\r\n\r\n\t\t\t\t// the identifying node indices provided by the shapecast function include offsets of all\r\n\t\t\t\t// root buffers to guarantee they're unique between roots so offset left and right indices here.\r\n\t\t\t\tconst offsetLeft = left + byteOffset;\r\n\t\t\t\tconst offsetRight = right + byteOffset;\r\n\t\t\t\tlet forceChildren = force;\r\n\t\t\t\tlet includesLeft = false;\r\n\t\t\t\tlet includesRight = false;\r\n\r\n\t\t\t\tif ( nodeIndices ) {\r\n\r\n\t\t\t\t\t// if we see that neither the left or right child are included in the set that need to be updated\r\n\t\t\t\t\t// then we assume that all children need to be updated.\r\n\t\t\t\t\tif ( ! forceChildren ) {\r\n\r\n\t\t\t\t\t\tincludesLeft = nodeIndices.has( offsetLeft );\r\n\t\t\t\t\t\tincludesRight = nodeIndices.has( offsetRight );\r\n\t\t\t\t\t\tforceChildren = ! includesLeft && ! includesRight;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tincludesLeft = true;\r\n\t\t\t\t\tincludesRight = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst traverseLeft = forceChildren || includesLeft;\r\n\t\t\t\tconst traverseRight = forceChildren || includesRight;\r\n\r\n\t\t\t\tlet leftChange = false;\r\n\t\t\t\tif ( traverseLeft ) {\r\n\r\n\t\t\t\t\tleftChange = _traverse( left, byteOffset, forceChildren );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet rightChange = false;\r\n\t\t\t\tif ( traverseRight ) {\r\n\r\n\t\t\t\t\trightChange = _traverse( right, byteOffset, forceChildren );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst didChange = leftChange || rightChange;\r\n\t\t\t\tif ( didChange ) {\r\n\r\n\t\t\t\t\tfor ( let i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\tconst lefti = left + i;\r\n\t\t\t\t\t\tconst righti = right + i;\r\n\t\t\t\t\t\tconst minLeftValue = float32Array[ lefti ];\r\n\t\t\t\t\t\tconst maxLeftValue = float32Array[ lefti + 3 ];\r\n\t\t\t\t\t\tconst minRightValue = float32Array[ righti ];\r\n\t\t\t\t\t\tconst maxRightValue = float32Array[ righti + 3 ];\r\n\r\n\t\t\t\t\t\tfloat32Array[ node32Index + i ] = minLeftValue < minRightValue ? minLeftValue : minRightValue;\r\n\t\t\t\t\t\tfloat32Array[ node32Index + i + 3 ] = maxLeftValue > maxRightValue ? maxLeftValue : maxRightValue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn didChange;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ttraverse( callback, rootIndex = 0 ) {\r\n\r\n\t\tconst buffer = this._roots[ rootIndex ];\r\n\t\tconst uint32Array = new Uint32Array( buffer );\r\n\t\tconst uint16Array = new Uint16Array( buffer );\r\n\t\t_traverse( 0 );\r\n\r\n\t\tfunction _traverse( node32Index, depth = 0 ) {\r\n\r\n\t\t\tconst node16Index = node32Index * 2;\r\n\t\t\tconst isLeaf = uint16Array[ node16Index + 15 ] === IS_LEAFNODE_FLAG;\r\n\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\tconst offset = uint32Array[ node32Index + 6 ];\r\n\t\t\t\tconst count = uint16Array[ node16Index + 14 ];\r\n\t\t\t\tcallback( depth, isLeaf, new Float32Array( buffer, node32Index * 4, 6 ), offset, count );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// TODO: use node functions here\r\n\t\t\t\tconst left = node32Index + BYTES_PER_NODE / 4;\r\n\t\t\t\tconst right = uint32Array[ node32Index + 6 ];\r\n\t\t\t\tconst splitAxis = uint32Array[ node32Index + 7 ];\r\n\t\t\t\tconst stopTraversal = callback( depth, isLeaf, new Float32Array( buffer, node32Index * 4, 6 ), splitAxis );\r\n\r\n\t\t\t\tif ( ! stopTraversal ) {\r\n\r\n\t\t\t\t\t_traverse( left, depth + 1 );\r\n\t\t\t\t\t_traverse( right, depth + 1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Core Cast Functions */\r\n\traycast( ray, materialOrSide = FrontSide ) {\r\n\r\n\t\tconst roots = this._roots;\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst intersects = [];\r\n\t\tconst isMaterial = materialOrSide.isMaterial;\r\n\t\tconst isArrayMaterial = Array.isArray( materialOrSide );\r\n\r\n\t\tconst groups = geometry.groups;\r\n\t\tconst side = isMaterial ? materialOrSide.side : materialOrSide;\r\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst materialSide = isArrayMaterial ? materialOrSide[ groups[ i ].materialIndex ].side : side;\r\n\t\t\tconst startCount = intersects.length;\r\n\r\n\t\t\tsetBuffer( roots[ i ] );\r\n\t\t\traycast( 0, geometry, materialSide, ray, intersects );\r\n\t\t\tclearBuffer();\r\n\r\n\t\t\tif ( isArrayMaterial ) {\r\n\r\n\t\t\t\tconst materialIndex = groups[ i ].materialIndex;\r\n\t\t\t\tfor ( let j = startCount, jl = intersects.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tintersects[ j ].face.materialIndex = materialIndex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn intersects;\r\n\r\n\t}\r\n\r\n\traycastFirst( ray, materialOrSide = FrontSide ) {\r\n\r\n\t\tconst roots = this._roots;\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst isMaterial = materialOrSide.isMaterial;\r\n\t\tconst isArrayMaterial = Array.isArray( materialOrSide );\r\n\r\n\t\tlet closestResult = null;\r\n\r\n\t\tconst groups = geometry.groups;\r\n\t\tconst side = isMaterial ? materialOrSide.side : materialOrSide;\r\n\t\tfor ( let i = 0, l = roots.length; i < l; i ++ ) {\r\n\r\n\t\t\tconst materialSide = isArrayMaterial ? materialOrSide[ groups[ i ].materialIndex ].side : side;\r\n\r\n\t\t\tsetBuffer( roots[ i ] );\r\n\t\t\tconst result = raycastFirst( 0, geometry, materialSide, ray );\r\n\t\t\tclearBuffer();\r\n\r\n\t\t\tif ( result != null && ( closestResult == null || result.distance < closestResult.distance ) ) {\r\n\r\n\t\t\t\tclosestResult = result;\r\n\t\t\t\tif ( isArrayMaterial ) {\r\n\r\n\t\t\t\t\tresult.face.materialIndex = groups[ i ].materialIndex;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn closestResult;\r\n\r\n\t}\r\n\r\n\tintersectsGeometry( otherGeometry, geomToMesh ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tlet result = false;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tsetBuffer( root );\r\n\t\t\tresult = intersectsGeometry( 0, geometry, otherGeometry, geomToMesh );\r\n\t\t\tclearBuffer();\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tshapecast( callbacks, _intersectsTriangleFunc, _orderNodesFunc ) {\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tif ( callbacks instanceof Function ) {\r\n\r\n\t\t\tif ( _intersectsTriangleFunc ) {\r\n\r\n\t\t\t\t// Support the previous function signature that provided three sequential index buffer\r\n\t\t\t\t// indices here.\r\n\t\t\t\tconst originalTriangleFunc = _intersectsTriangleFunc;\r\n\t\t\t\t_intersectsTriangleFunc = ( tri, index, contained, depth ) => {\r\n\r\n\t\t\t\t\tconst i3 = index * 3;\r\n\t\t\t\t\treturn originalTriangleFunc( tri, i3, i3 + 1, i3 + 2, contained, depth );\r\n\r\n\t\t\t\t};\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcallbacks = {\r\n\r\n\t\t\t\tboundsTraverseOrder: _orderNodesFunc,\r\n\t\t\t\tintersectsBounds: callbacks,\r\n\t\t\t\tintersectsTriangle: _intersectsTriangleFunc,\r\n\t\t\t\tintersectsRange: null,\r\n\r\n\t\t\t};\r\n\r\n\t\t\tconsole.warn( 'MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.' );\r\n\r\n\t\t}\r\n\r\n\t\tconst triangle = trianglePool.getPrimitive();\r\n\t\tlet {\r\n\t\t\tboundsTraverseOrder,\r\n\t\t\tintersectsBounds,\r\n\t\t\tintersectsRange,\r\n\t\t\tintersectsTriangle,\r\n\t\t} = callbacks;\r\n\r\n\t\tif ( intersectsRange && intersectsTriangle ) {\r\n\r\n\t\t\tconst originalIntersectsRange = intersectsRange;\r\n\t\t\tintersectsRange = ( offset, count, contained, depth, nodeIndex ) => {\r\n\r\n\t\t\t\tif ( ! originalIntersectsRange( offset, count, contained, depth, nodeIndex ) ) {\r\n\r\n\t\t\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangle, contained, depth, triangle );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t};\r\n\r\n\t\t} else if ( ! intersectsRange ) {\r\n\r\n\t\t\tif ( intersectsTriangle ) {\r\n\r\n\t\t\t\tintersectsRange = ( offset, count, contained, depth ) => {\r\n\r\n\t\t\t\t\treturn iterateOverTriangles( offset, count, geometry, intersectsTriangle, contained, depth, triangle );\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tintersectsRange = ( offset, count, contained ) => {\r\n\r\n\t\t\t\t\treturn contained;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tlet result = false;\r\n\t\tlet byteOffset = 0;\r\n\t\tfor ( const root of this._roots ) {\r\n\r\n\t\t\tsetBuffer( root );\r\n\t\t\tresult = shapecast( 0, geometry, intersectsBounds, intersectsRange, boundsTraverseOrder, byteOffset );\r\n\t\t\tclearBuffer();\r\n\r\n\t\t\tif ( result ) {\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbyteOffset += root.byteLength;\r\n\r\n\t\t}\r\n\r\n\t\ttrianglePool.releasePrimitive( triangle );\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\tbvhcast( otherBvh, matrixToLocal, callbacks ) {\r\n\r\n\t\t// BVHCast function for intersecting two BVHs against each other. Ultimately just uses two recursive shapecast calls rather\r\n\t\t// than an approach that walks down the tree (see bvhcast.js file for more info).\r\n\r\n\t\tlet {\r\n\t\t\tintersectsRanges,\r\n\t\t\tintersectsTriangles,\r\n\t\t} = callbacks;\r\n\r\n\t\tconst indexAttr = this.geometry.index;\r\n\t\tconst positionAttr = this.geometry.attributes.position;\r\n\r\n\t\tconst otherIndexAttr = otherBvh.geometry.index;\r\n\t\tconst otherPositionAttr = otherBvh.geometry.attributes.position;\r\n\r\n\t\ttempMatrix.copy( matrixToLocal ).invert();\r\n\r\n\t\tconst triangle = trianglePool.getPrimitive();\r\n\t\tconst triangle2 = trianglePool.getPrimitive();\r\n\r\n\t\tif ( intersectsTriangles ) {\r\n\r\n\t\t\tfunction iterateOverDoubleTriangles( offset1, count1, offset2, count2, depth1, index1, depth2, index2 ) {\r\n\r\n\t\t\t\tfor ( let i2 = offset2, l2 = offset2 + count2; i2 < l2; i2 ++ ) {\r\n\r\n\t\t\t\t\tsetTriangle( triangle2, i2 * 3, otherIndexAttr, otherPositionAttr );\r\n\t\t\t\t\ttriangle2.a.applyMatrix4( matrixToLocal );\r\n\t\t\t\t\ttriangle2.b.applyMatrix4( matrixToLocal );\r\n\t\t\t\t\ttriangle2.c.applyMatrix4( matrixToLocal );\r\n\t\t\t\t\ttriangle2.needsUpdate = true;\r\n\r\n\t\t\t\t\tfor ( let i1 = offset1, l1 = offset1 + count1; i1 < l1; i1 ++ ) {\r\n\r\n\t\t\t\t\t\tsetTriangle( triangle, i1 * 3, indexAttr, positionAttr );\r\n\t\t\t\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tif ( intersectsTriangles( triangle, triangle2, i1, i2, depth1, index1, depth2, index2 ) ) {\r\n\r\n\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( intersectsRanges ) {\r\n\r\n\t\t\t\tconst originalIntersectsRanges = intersectsRanges;\r\n\t\t\t\tintersectsRanges = function ( offset1, count1, offset2, count2, depth1, index1, depth2, index2 ) {\r\n\r\n\t\t\t\t\tif ( ! originalIntersectsRanges( offset1, count1, offset2, count2, depth1, index1, depth2, index2 ) ) {\r\n\r\n\t\t\t\t\t\treturn iterateOverDoubleTriangles( offset1, count1, offset2, count2, depth1, index1, depth2, index2 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tintersectsRanges = iterateOverDoubleTriangles;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\totherBvh.getBoundingBox( aabb2 );\r\n\t\taabb2.applyMatrix4( matrixToLocal );\r\n\t\tconst result = this.shapecast( {\r\n\r\n\t\t\tintersectsBounds: box => aabb2.intersectsBox( box ),\r\n\r\n\t\t\tintersectsRange: ( offset1, count1, contained, depth1, nodeIndex1, box ) => {\r\n\r\n\t\t\t\taabb.copy( box );\r\n\t\t\t\taabb.applyMatrix4( tempMatrix );\r\n\t\t\t\treturn otherBvh.shapecast( {\r\n\r\n\t\t\t\t\tintersectsBounds: box => aabb.intersectsBox( box ),\r\n\r\n\t\t\t\t\tintersectsRange: ( offset2, count2, contained, depth2, nodeIndex2 ) => {\r\n\r\n\t\t\t\t\t\treturn intersectsRanges( offset1, count1, offset2, count2, depth1, nodeIndex1, depth2, nodeIndex2 );\r\n\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\ttrianglePool.releasePrimitive( triangle );\r\n\t\ttrianglePool.releasePrimitive( triangle2 );\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/* Derived Cast Functions */\r\n\tintersectsBox( box, boxToMesh ) {\r\n\r\n\t\tobb.set( box.min, box.max, boxToMesh );\r\n\t\tobb.needsUpdate = true;\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\t{\r\n\t\t\t\tintersectsBounds: box => obb.intersectsBox( box ),\r\n\t\t\t\tintersectsTriangle: tri => obb.intersectsTriangle( tri )\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tintersectsSphere( sphere ) {\r\n\r\n\t\treturn this.shapecast(\r\n\t\t\t{\r\n\t\t\t\tintersectsBounds: box => sphere.intersectsBox( box ),\r\n\t\t\t\tintersectsTriangle: tri => tri.intersectsSphere( sphere )\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tclosestPointToGeometry( otherGeometry, geometryToBvh, target1 = { }, target2 = { }, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\tif ( ! otherGeometry.boundingBox ) {\r\n\r\n\t\t\totherGeometry.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tobb.set( otherGeometry.boundingBox.min, otherGeometry.boundingBox.max, geometryToBvh );\r\n\t\tobb.needsUpdate = true;\r\n\r\n\t\tconst geometry = this.geometry;\r\n\t\tconst pos = geometry.attributes.position;\r\n\t\tconst index = geometry.index;\r\n\t\tconst otherPos = otherGeometry.attributes.position;\r\n\t\tconst otherIndex = otherGeometry.index;\r\n\t\tconst triangle = trianglePool.getPrimitive();\r\n\t\tconst triangle2 = trianglePool.getPrimitive();\r\n\r\n\t\tlet tempTarget1 = temp1;\r\n\t\tlet tempTargetDest1 = temp2;\r\n\t\tlet tempTarget2 = null;\r\n\t\tlet tempTargetDest2 = null;\r\n\r\n\t\tif ( target2 ) {\r\n\r\n\t\t\ttempTarget2 = temp3;\r\n\t\t\ttempTargetDest2 = temp4;\r\n\r\n\t\t}\r\n\r\n\t\tlet closestDistance = Infinity;\r\n\t\tlet closestDistanceTriIndex = null;\r\n\t\tlet closestDistanceOtherTriIndex = null;\r\n\t\ttempMatrix.copy( geometryToBvh ).invert();\r\n\t\tobb2.matrix.copy( tempMatrix );\r\n\t\tthis.shapecast(\r\n\t\t\t{\r\n\r\n\t\t\t\tboundsTraverseOrder: box => {\r\n\r\n\t\t\t\t\treturn obb.distanceToBox( box );\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\r\n\r\n\t\t\t\t\tif ( score < closestDistance && score < maxThreshold ) {\r\n\r\n\t\t\t\t\t\t// if we know the triangles of this bounds will be intersected next then\r\n\t\t\t\t\t\t// save the bounds to use during triangle checks.\r\n\t\t\t\t\t\tif ( isLeaf ) {\r\n\r\n\t\t\t\t\t\t\tobb2.min.copy( box.min );\r\n\t\t\t\t\t\t\tobb2.max.copy( box.max );\r\n\t\t\t\t\t\t\tobb2.needsUpdate = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tintersectsRange: ( offset, count ) => {\r\n\r\n\t\t\t\t\tif ( otherGeometry.boundsTree ) {\r\n\r\n\t\t\t\t\t\t// if the other geometry has a bvh then use the accelerated path where we use shapecast to find\r\n\t\t\t\t\t\t// the closest bounds in the other geometry to check.\r\n\t\t\t\t\t\treturn otherGeometry.boundsTree.shapecast( {\r\n\t\t\t\t\t\t\tboundsTraverseOrder: box => {\r\n\r\n\t\t\t\t\t\t\t\treturn obb2.distanceToBox( box );\r\n\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\r\n\r\n\t\t\t\t\t\t\t\treturn score < closestDistance && score < maxThreshold;\r\n\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tintersectsRange: ( otherOffset, otherCount ) => {\r\n\r\n\t\t\t\t\t\t\t\tfor ( let i2 = otherOffset * 3, l2 = ( otherOffset + otherCount ) * 3; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tsetTriangle( triangle2, i2, otherIndex, otherPos );\r\n\t\t\t\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\r\n\r\n\t\t\t\t\t\t\t\t\tfor ( let i = offset * 3, l = ( offset + count ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\t\t\t\t\t\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\t\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\r\n\t\t\t\t\t\t\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tclosestDistance = dist;\r\n\t\t\t\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i / 3;\r\n\t\t\t\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2 / 3;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\r\n\t\t\t\t\t\t\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t} );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// If no bounds tree then we'll just check every triangle.\r\n\t\t\t\t\t\tconst triCount = otherIndex ? otherIndex.count : otherPos.count;\r\n\t\t\t\t\t\tfor ( let i2 = 0, l2 = triCount; i2 < l2; i2 += 3 ) {\r\n\r\n\t\t\t\t\t\t\tsetTriangle( triangle2, i2, otherIndex, otherPos );\r\n\t\t\t\t\t\t\ttriangle2.a.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\t\ttriangle2.b.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\t\ttriangle2.c.applyMatrix4( geometryToBvh );\r\n\t\t\t\t\t\t\ttriangle2.needsUpdate = true;\r\n\r\n\t\t\t\t\t\t\tfor ( let i = offset * 3, l = ( offset + count ) * 3; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\t\tsetTriangle( triangle, i, index, pos );\r\n\t\t\t\t\t\t\t\ttriangle.needsUpdate = true;\r\n\r\n\t\t\t\t\t\t\t\tconst dist = triangle.distanceToTriangle( triangle2, tempTarget1, tempTarget2 );\r\n\t\t\t\t\t\t\t\tif ( dist < closestDistance ) {\r\n\r\n\t\t\t\t\t\t\t\t\ttempTargetDest1.copy( tempTarget1 );\r\n\r\n\t\t\t\t\t\t\t\t\tif ( tempTargetDest2 ) {\r\n\r\n\t\t\t\t\t\t\t\t\t\ttempTargetDest2.copy( tempTarget2 );\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tclosestDistance = dist;\r\n\t\t\t\t\t\t\t\t\tclosestDistanceTriIndex = i / 3;\r\n\t\t\t\t\t\t\t\t\tclosestDistanceOtherTriIndex = i2 / 3;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t// stop traversal if we find a point that's under the given threshold\r\n\t\t\t\t\t\t\t\tif ( dist < minThreshold ) {\r\n\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t}\r\n\r\n\t\t);\r\n\r\n\t\ttrianglePool.releasePrimitive( triangle );\r\n\t\ttrianglePool.releasePrimitive( triangle2 );\r\n\r\n\t\tif ( closestDistance === Infinity ) return null;\r\n\r\n\t\tif ( ! target1.point ) target1.point = tempTargetDest1.clone();\r\n\t\telse target1.point.copy( tempTargetDest1 );\r\n\t\ttarget1.distance = closestDistance,\r\n\t\ttarget1.faceIndex = closestDistanceTriIndex;\r\n\r\n\t\tif ( target2 ) {\r\n\r\n\t\t\tif ( ! target2.point ) target2.point = tempTargetDest2.clone();\r\n\t\t\telse target2.point.copy( tempTargetDest2 );\r\n\t\t\ttarget2.point.applyMatrix4( tempMatrix );\r\n\t\t\ttempTargetDest1.applyMatrix4( tempMatrix );\r\n\t\t\ttarget2.distance = tempTargetDest1.sub( target2.point ).length();\r\n\t\t\ttarget2.faceIndex = closestDistanceOtherTriIndex;\r\n\r\n\t\t}\r\n\r\n\t\treturn target1;\r\n\r\n\t}\r\n\r\n\tclosestPointToPoint( point, target = { }, minThreshold = 0, maxThreshold = Infinity ) {\r\n\r\n\t\t// early out if under minThreshold\r\n\t\t// skip checking if over maxThreshold\r\n\t\t// set minThreshold = maxThreshold to quickly check if a point is within a threshold\r\n\t\t// returns Infinity if no value found\r\n\t\tconst minThresholdSq = minThreshold * minThreshold;\r\n\t\tconst maxThresholdSq = maxThreshold * maxThreshold;\r\n\t\tlet closestDistanceSq = Infinity;\r\n\t\tlet closestDistanceTriIndex = null;\r\n\t\tthis.shapecast(\r\n\r\n\t\t\t{\r\n\r\n\t\t\t\tboundsTraverseOrder: box => {\r\n\r\n\t\t\t\t\ttemp.copy( point ).clamp( box.min, box.max );\r\n\t\t\t\t\treturn temp.distanceToSquared( point );\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tintersectsBounds: ( box, isLeaf, score ) => {\r\n\r\n\t\t\t\t\treturn score < closestDistanceSq && score < maxThresholdSq;\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tintersectsTriangle: ( tri, triIndex ) => {\r\n\r\n\t\t\t\t\ttri.closestPointToPoint( point, temp );\r\n\t\t\t\t\tconst distSq = point.distanceToSquared( temp );\r\n\t\t\t\t\tif ( distSq < closestDistanceSq ) {\r\n\r\n\t\t\t\t\t\ttemp1.copy( temp );\r\n\t\t\t\t\t\tclosestDistanceSq = distSq;\r\n\t\t\t\t\t\tclosestDistanceTriIndex = triIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( distSq < minThresholdSq ) {\r\n\r\n\t\t\t\t\t\treturn true;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t}\r\n\r\n\t\t);\r\n\r\n\t\tif ( closestDistanceSq === Infinity ) return null;\r\n\r\n\t\tconst closestDistance = Math.sqrt( closestDistanceSq );\r\n\r\n\t\tif ( ! target.point ) target.point = temp1.clone();\r\n\t\telse target.point.copy( temp1 );\r\n\t\ttarget.distance = closestDistance,\r\n\t\ttarget.faceIndex = closestDistanceTriIndex;\r\n\r\n\t\treturn target;\r\n\r\n\t}\r\n\r\n\tgetBoundingBox( target ) {\r\n\r\n\t\ttarget.makeEmpty();\r\n\r\n\t\tconst roots = this._roots;\r\n\t\troots.forEach( buffer => {\r\n\r\n\t\t\tarrayToBox( 0, new Float32Array( buffer ), tempBox );\r\n\t\t\ttarget.union( tempBox );\r\n\r\n\t\t} );\r\n\r\n\t\treturn target;\r\n\r\n\t}\r\n\r\n}\r\n\r\n// Deprecation\r\nconst originalRaycast = MeshBVH.prototype.raycast;\r\nMeshBVH.prototype.raycast = function ( ...args ) {\r\n\r\n\tif ( args[ 0 ].isMesh ) {\r\n\r\n\t\tconsole.warn( 'MeshBVH: The function signature and results frame for \"raycast\" has changed. See docs for new signature.' );\r\n\t\tconst [\r\n\t\t\tmesh, raycaster, ray, intersects,\r\n\t\t] = args;\r\n\r\n\t\tconst results = originalRaycast.call( this, ray, mesh.material );\r\n\t\tresults.forEach( hit => {\r\n\r\n\t\t\thit = convertRaycastIntersect( hit, mesh, raycaster );\r\n\t\t\tif ( hit ) {\r\n\r\n\t\t\t\tintersects.push( hit );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn intersects;\r\n\r\n\t} else {\r\n\r\n\t\treturn originalRaycast.apply( this, args );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst originalRaycastFirst = MeshBVH.prototype.raycastFirst;\r\nMeshBVH.prototype.raycastFirst = function ( ...args ) {\r\n\r\n\tif ( args[ 0 ].isMesh ) {\r\n\r\n\t\tconsole.warn( 'MeshBVH: The function signature and results frame for \"raycastFirst\" has changed. See docs for new signature.' );\r\n\t\tconst [\r\n\t\t\tmesh, raycaster, ray,\r\n\t\t] = args;\r\n\r\n\t\treturn convertRaycastIntersect( originalRaycastFirst.call( this, ray, mesh.material ), mesh, raycaster );\r\n\r\n\t} else {\r\n\r\n\t\treturn originalRaycastFirst.apply( this, args );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst originalClosestPointToPoint = MeshBVH.prototype.closestPointToPoint;\r\nMeshBVH.prototype.closestPointToPoint = function ( ...args ) {\r\n\r\n\r\n\tif ( args[ 0 ].isMesh ) {\r\n\r\n\t\tconsole.warn( 'MeshBVH: The function signature and results frame for \"closestPointToPoint\" has changed. See docs for new signature.' );\r\n\r\n\t\targs.unshift();\r\n\r\n\t\tconst target = args[ 1 ];\r\n\t\tconst result = {};\r\n\t\targs[ 1 ] = result;\r\n\r\n\t\toriginalClosestPointToPoint.apply( this, args );\r\n\r\n\t\tif ( target ) {\r\n\r\n\t\t\ttarget.copy( result.point );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.distance;\r\n\r\n\t} else {\r\n\r\n\t\treturn originalClosestPointToPoint.apply( this, args );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst originalClosestPointToGeometry = MeshBVH.prototype.closestPointToGeometry;\r\nMeshBVH.prototype.closestPointToGeometry = function ( ...args ) {\r\n\r\n\tconst target1 = args[ 2 ];\r\n\tconst target2 = args[ 3 ];\r\n\tif ( target1 && target1.isVector3 || target2 && target2.isVector3 ) {\r\n\r\n\t\tconsole.warn( 'MeshBVH: The function signature and results frame for \"closestPointToGeometry\" has changed. See docs for new signature.' );\r\n\r\n\t\tconst result1 = {};\r\n\t\tconst result2 = {};\r\n\t\tconst geometryToBvh = args[ 1 ];\r\n\t\targs[ 2 ] = result1;\r\n\t\targs[ 3 ] = result2;\r\n\r\n\t\toriginalClosestPointToGeometry.apply( this, args );\r\n\r\n\t\tif ( target1 ) {\r\n\r\n\t\t\ttarget1.copy( result1.point );\r\n\r\n\t\t}\r\n\r\n\t\tif ( target2 ) {\r\n\r\n\t\t\ttarget2.copy( result2.point ).applyMatrix4( geometryToBvh );\r\n\r\n\t\t}\r\n\r\n\t\treturn result1.distance;\r\n\r\n\t} else {\r\n\r\n\t\treturn originalClosestPointToGeometry.apply( this, args );\r\n\r\n\t}\r\n\r\n};\r\n\r\nconst originalRefit = MeshBVH.prototype.refit;\r\nMeshBVH.prototype.refit = function ( ...args ) {\r\n\r\n\tconst nodeIndices = args[ 0 ];\r\n\tconst terminationIndices = args[ 1 ];\r\n\tif ( terminationIndices && ( terminationIndices instanceof Set || Array.isArray( terminationIndices ) ) ) {\r\n\r\n\t\tconsole.warn( 'MeshBVH: The function signature for \"refit\" has changed. See docs for new signature.' );\r\n\r\n\t\tconst newNodeIndices = new Set();\r\n\t\tterminationIndices.forEach( v => newNodeIndices.add( v ) );\r\n\t\tif ( nodeIndices ) {\r\n\r\n\t\t\tnodeIndices.forEach( v => newNodeIndices.add( v ) );\r\n\r\n\t\t}\r\n\r\n\t\toriginalRefit.call( this, newNodeIndices );\r\n\r\n\t} else {\r\n\r\n\t\toriginalRefit.apply( this, args );\r\n\r\n\t}\r\n\r\n};\r\n\r\n[\r\n\t'intersectsGeometry',\r\n\t'shapecast',\r\n\t'intersectsBox',\r\n\t'intersectsSphere',\r\n].forEach( name => {\r\n\r\n\tconst originalFunc = MeshBVH.prototype[ name ];\r\n\tMeshBVH.prototype[ name ] = function ( ...args ) {\r\n\r\n\t\tif ( args[ 0 ] === null || args[ 0 ].isMesh ) {\r\n\r\n\t\t\targs.shift();\r\n\t\t\tconsole.warn( `MeshBVH: The function signature for \"${ name }\" has changed and no longer takes Mesh. See docs for new signature.` );\r\n\r\n\t\t}\r\n\r\n\t\treturn originalFunc.apply( this, args );\r\n\r\n\t};\r\n\r\n} );\r\n","import { Ray, Matrix4, Mesh } from 'three';\r\nimport { convertRaycastIntersect } from './GeometryRayIntersectUtilities.js';\r\nimport { MeshBVH } from '../core/MeshBVH.js';\r\n\r\nconst ray = /* @__PURE__ */ new Ray();\r\nconst tmpInverseMatrix = /* @__PURE__ */ new Matrix4();\r\nconst origMeshRaycastFunc = Mesh.prototype.raycast;\r\n\r\nexport function acceleratedRaycast( raycaster, intersects ) {\r\n\r\n\tif ( this.geometry.boundsTree ) {\r\n\r\n\t\tif ( this.material === undefined ) return;\r\n\r\n\t\ttmpInverseMatrix.copy( this.matrixWorld ).invert();\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( tmpInverseMatrix );\r\n\r\n\t\tconst bvh = this.geometry.boundsTree;\r\n\t\tif ( raycaster.firstHitOnly === true ) {\r\n\r\n\t\t\tconst hit = convertRaycastIntersect( bvh.raycastFirst( ray, this.material ), this, raycaster );\r\n\t\t\tif ( hit ) {\r\n\r\n\t\t\t\tintersects.push( hit );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst hits = bvh.raycast( ray, this.material );\r\n\t\t\tfor ( let i = 0, l = hits.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tconst hit = convertRaycastIntersect( hits[ i ], this, raycaster );\r\n\t\t\t\tif ( hit ) {\r\n\r\n\t\t\t\t\tintersects.push( hit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\torigMeshRaycastFunc.call( this, raycaster, intersects );\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport function computeBoundsTree( options ) {\r\n\r\n\tthis.boundsTree = new MeshBVH( this, options );\r\n\treturn this.boundsTree;\r\n\r\n}\r\n\r\nexport function disposeBoundsTree() {\r\n\r\n\tthis.boundsTree = null;\r\n\r\n}\r\n","import * as React from 'react';\nimport { acceleratedRaycast, computeBoundsTree, disposeBoundsTree } from 'three-mesh-bvh';\n\nfunction useBVH(mesh, options) {\n  React.useEffect(() => {\n    if (mesh.current) {\n      mesh.current.raycast = acceleratedRaycast;\n      const geometry = mesh.current.geometry;\n      geometry.computeBoundsTree = computeBoundsTree;\n      geometry.disposeBoundsTree = disposeBoundsTree;\n      geometry.computeBoundsTree(options);\n      return () => {\n        if (geometry.boundsTree) {\n          geometry.disposeBoundsTree();\n        }\n      };\n    }\n  }, [mesh, options]);\n}\n\nexport { useBVH };\n","import { Frustum, Vector3 } from 'three';\n\n/**\n * This is a class to check whether objects are in a selection area in 3D space\n */\n\nconst SelectionBox = (() => {\n  const frustum = new Frustum();\n  const center = new Vector3();\n  const tmpPoint = new Vector3();\n  const vecNear = new Vector3();\n  const vecTopLeft = new Vector3();\n  const vecTopRight = new Vector3();\n  const vecDownRight = new Vector3();\n  const vecDownLeft = new Vector3();\n  const vecFarTopLeft = new Vector3();\n  const vecFarTopRight = new Vector3();\n  const vecFarDownRight = new Vector3();\n  const vecFarDownLeft = new Vector3();\n  const vectemp1 = new Vector3();\n  const vectemp2 = new Vector3();\n  const vectemp3 = new Vector3();\n\n  class SelectionBox {\n    constructor(camera, scene, deep) {\n      this.camera = camera;\n      this.scene = scene;\n      this.startPoint = new Vector3();\n      this.endPoint = new Vector3();\n      this.collection = [];\n      this.deep = deep || Number.MAX_VALUE;\n    }\n\n    select(startPoint, endPoint) {\n      this.startPoint = startPoint || this.startPoint;\n      this.endPoint = endPoint || this.endPoint;\n      this.collection = [];\n      this.updateFrustum(this.startPoint, this.endPoint);\n      this.searchChildInFrustum(frustum, this.scene);\n      return this.collection;\n    }\n\n    updateFrustum(startPoint, endPoint) {\n      startPoint = startPoint || this.startPoint;\n      endPoint = endPoint || this.endPoint; // Avoid invalid frustum\n\n      if (startPoint.x === endPoint.x) {\n        endPoint.x += Number.EPSILON;\n      }\n\n      if (startPoint.y === endPoint.y) {\n        endPoint.y += Number.EPSILON;\n      }\n\n      this.camera.updateProjectionMatrix();\n      this.camera.updateMatrixWorld();\n\n      if (this.camera.isPerspectiveCamera) {\n        tmpPoint.copy(startPoint);\n        tmpPoint.x = Math.min(startPoint.x, endPoint.x);\n        tmpPoint.y = Math.max(startPoint.y, endPoint.y);\n        endPoint.x = Math.max(startPoint.x, endPoint.x);\n        endPoint.y = Math.min(startPoint.y, endPoint.y);\n        vecNear.setFromMatrixPosition(this.camera.matrixWorld);\n        vecTopLeft.copy(tmpPoint);\n        vecTopRight.set(endPoint.x, tmpPoint.y, 0);\n        vecDownRight.copy(endPoint);\n        vecDownLeft.set(tmpPoint.x, endPoint.y, 0);\n        vecTopLeft.unproject(this.camera);\n        vecTopRight.unproject(this.camera);\n        vecDownRight.unproject(this.camera);\n        vecDownLeft.unproject(this.camera);\n        vectemp1.copy(vecTopLeft).sub(vecNear);\n        vectemp2.copy(vecTopRight).sub(vecNear);\n        vectemp3.copy(vecDownRight).sub(vecNear);\n        vectemp1.normalize();\n        vectemp2.normalize();\n        vectemp3.normalize();\n        vectemp1.multiplyScalar(this.deep);\n        vectemp2.multiplyScalar(this.deep);\n        vectemp3.multiplyScalar(this.deep);\n        vectemp1.add(vecNear);\n        vectemp2.add(vecNear);\n        vectemp3.add(vecNear);\n        var planes = frustum.planes;\n        planes[0].setFromCoplanarPoints(vecNear, vecTopLeft, vecTopRight);\n        planes[1].setFromCoplanarPoints(vecNear, vecTopRight, vecDownRight);\n        planes[2].setFromCoplanarPoints(vecDownRight, vecDownLeft, vecNear);\n        planes[3].setFromCoplanarPoints(vecDownLeft, vecTopLeft, vecNear);\n        planes[4].setFromCoplanarPoints(vecTopRight, vecDownRight, vecDownLeft);\n        planes[5].setFromCoplanarPoints(vectemp3, vectemp2, vectemp1);\n        planes[5].normal.multiplyScalar(-1);\n      } else if (this.camera.isOrthographicCamera) {\n        const left = Math.min(startPoint.x, endPoint.x);\n        const top = Math.max(startPoint.y, endPoint.y);\n        const right = Math.max(startPoint.x, endPoint.x);\n        const down = Math.min(startPoint.y, endPoint.y);\n        vecTopLeft.set(left, top, -1);\n        vecTopRight.set(right, top, -1);\n        vecDownRight.set(right, down, -1);\n        vecDownLeft.set(left, down, -1);\n        vecFarTopLeft.set(left, top, 1);\n        vecFarTopRight.set(right, top, 1);\n        vecFarDownRight.set(right, down, 1);\n        vecFarDownLeft.set(left, down, 1);\n        vecTopLeft.unproject(this.camera);\n        vecTopRight.unproject(this.camera);\n        vecDownRight.unproject(this.camera);\n        vecDownLeft.unproject(this.camera);\n        vecFarTopLeft.unproject(this.camera);\n        vecFarTopRight.unproject(this.camera);\n        vecFarDownRight.unproject(this.camera);\n        vecFarDownLeft.unproject(this.camera);\n        var planes = frustum.planes;\n        planes[0].setFromCoplanarPoints(vecTopLeft, vecFarTopLeft, vecFarTopRight);\n        planes[1].setFromCoplanarPoints(vecTopRight, vecFarTopRight, vecFarDownRight);\n        planes[2].setFromCoplanarPoints(vecFarDownRight, vecFarDownLeft, vecDownLeft);\n        planes[3].setFromCoplanarPoints(vecFarDownLeft, vecFarTopLeft, vecTopLeft);\n        planes[4].setFromCoplanarPoints(vecTopRight, vecDownRight, vecDownLeft);\n        planes[5].setFromCoplanarPoints(vecFarDownRight, vecFarTopRight, vecFarTopLeft);\n        planes[5].normal.multiplyScalar(-1);\n      } else {\n        console.error('THREE.SelectionBox: Unsupported camera type.');\n      }\n    }\n\n    searchChildInFrustum(frustum, object) {\n      if (object.isMesh || object.isLine || object.isPoints) {\n        if (object.material !== undefined) {\n          if (object.geometry.boundingSphere === null) object.geometry.computeBoundingSphere();\n          center.copy(object.geometry.boundingSphere.center);\n          center.applyMatrix4(object.matrixWorld);\n\n          if (frustum.containsPoint(center)) {\n            this.collection.push(object);\n          }\n        }\n      }\n\n      if (object.children.length > 0) {\n        for (let x = 0; x < object.children.length; x++) {\n          this.searchChildInFrustum(frustum, object.children[x]);\n        }\n      }\n    }\n\n  }\n\n  return SelectionBox;\n})();\n\nexport { SelectionBox };\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as THREE from 'three';\nimport { SelectionBox } from 'three-stdlib';\nimport { useThree } from '@react-three/fiber';\nimport shallow from 'zustand/shallow';\n\nconst context = /*#__PURE__*/React.createContext([]);\nfunction Select({\n  box,\n  multiple,\n  children,\n  onChange,\n  border = '1px solid #55aaff',\n  backgroundColor = 'rgba(75, 160, 255, 0.1)',\n  filter: customFilter = item => item,\n  ...props\n}) {\n  const {\n    setEvents,\n    camera,\n    raycaster,\n    gl,\n    controls,\n    size,\n    get\n  } = useThree();\n  const [hovered, hover] = React.useState(false);\n  const [active, dispatch] = React.useReducer((state, {\n    object,\n    shift\n  }) => {\n    if (object === undefined) return [];else if (Array.isArray(object)) return object;else if (!shift) return state[0] === object ? [] : [object];else if (state.includes(object)) return state.filter(o => o !== object);else return [object, ...state];\n  }, []);\n  React.useEffect(() => void (onChange == null ? void 0 : onChange(active)), [active]);\n  const onClick = React.useCallback(e => {\n    e.stopPropagation();\n    dispatch({\n      object: customFilter([e.object])[0],\n      shift: multiple && e.shiftKey\n    });\n  }, []);\n  const onPointerMissed = React.useCallback(e => !hovered && dispatch({}), [hovered]);\n  const ref = React.useRef(null);\n  React.useEffect(() => {\n    if (!box || !multiple) return;\n    const selBox = new SelectionBox(camera, ref.current);\n    const element = document.createElement('div');\n    element.style.pointerEvents = 'none';\n    element.style.border = border;\n    element.style.backgroundColor = backgroundColor;\n    element.style.position = 'fixed';\n    const startPoint = new THREE.Vector2();\n    const pointTopLeft = new THREE.Vector2();\n    const pointBottomRight = new THREE.Vector2();\n    const oldRaycasterEnabled = get().events.enabled;\n    const oldControlsEnabled = controls == null ? void 0 : controls.enabled;\n    let isDown = false;\n\n    function prepareRay(event, vec) {\n      const {\n        offsetX,\n        offsetY\n      } = event;\n      const {\n        width,\n        height\n      } = size;\n      vec.set(offsetX / width * 2 - 1, -(offsetY / height) * 2 + 1);\n    }\n\n    function onSelectStart(event) {\n      var _gl$domElement$parent;\n\n      if (controls) controls.enabled = false;\n      setEvents({\n        enabled: false\n      });\n      isDown = true;\n      (_gl$domElement$parent = gl.domElement.parentElement) == null ? void 0 : _gl$domElement$parent.appendChild(element);\n      element.style.left = `${event.clientX}px`;\n      element.style.top = `${event.clientY}px`;\n      element.style.width = '0px';\n      element.style.height = '0px';\n      startPoint.x = event.clientX;\n      startPoint.y = event.clientY;\n    }\n\n    function onSelectMove(event) {\n      pointBottomRight.x = Math.max(startPoint.x, event.clientX);\n      pointBottomRight.y = Math.max(startPoint.y, event.clientY);\n      pointTopLeft.x = Math.min(startPoint.x, event.clientX);\n      pointTopLeft.y = Math.min(startPoint.y, event.clientY);\n      element.style.left = `${pointTopLeft.x}px`;\n      element.style.top = `${pointTopLeft.y}px`;\n      element.style.width = `${pointBottomRight.x - pointTopLeft.x}px`;\n      element.style.height = `${pointBottomRight.y - pointTopLeft.y}px`;\n    }\n\n    function onSelectOver() {\n      if (isDown) {\n        var _element$parentElemen;\n\n        if (controls) controls.enabled = oldControlsEnabled;\n        setEvents({\n          enabled: oldRaycasterEnabled\n        });\n        isDown = false;\n        (_element$parentElemen = element.parentElement) == null ? void 0 : _element$parentElemen.removeChild(element);\n      }\n    }\n\n    function pointerDown(event) {\n      if (event.shiftKey) {\n        onSelectStart(event);\n        prepareRay(event, selBox.startPoint);\n      }\n    }\n\n    let previous = [];\n\n    function pointerMove(event) {\n      if (isDown) {\n        onSelectMove(event);\n        prepareRay(event, selBox.endPoint);\n        const allSelected = selBox.select().sort(o => o.uuid).filter(o => o.isMesh);\n\n        if (!shallow(allSelected, previous)) {\n          previous = allSelected;\n          dispatch({\n            object: customFilter(allSelected)\n          });\n        }\n      }\n    }\n\n    function pointerUp(event) {\n      if (isDown) onSelectOver();\n    }\n\n    document.addEventListener('pointerdown', pointerDown, {\n      passive: true\n    });\n    document.addEventListener('pointermove', pointerMove, {\n      passive: true,\n      capture: true\n    });\n    document.addEventListener('pointerup', pointerUp, {\n      passive: true\n    });\n    return () => {\n      document.removeEventListener('pointerdown', pointerDown);\n      document.removeEventListener('pointermove', pointerMove);\n      document.removeEventListener('pointerup', pointerUp);\n    };\n  }, [size, raycaster, camera, controls, gl]);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: ref,\n    onClick: onClick,\n    onPointerOver: () => hover(true),\n    onPointerOut: () => hover(false),\n    onPointerMissed: onPointerMissed\n  }, props), /*#__PURE__*/React.createElement(context.Provider, {\n    value: active\n  }, children));\n}\nfunction useSelect() {\n  return React.useContext(context);\n}\n\nexport { Select, useSelect };\n","import * as React from 'react';\n\nfunction useCursor(hovered, onPointerOver = 'pointer', onPointerOut = 'auto') {\n  React.useEffect(() => {\n    if (hovered) {\n      document.body.style.cursor = onPointerOver;\n      return () => void (document.body.style.cursor = onPointerOut);\n    }\n  }, [hovered]);\n}\n\nexport { useCursor };\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import superPropBase from \"./superPropBase.js\";\nimport defineProperty from \"./defineProperty.js\";\n\nfunction set(target, property, value, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.set) {\n    set = Reflect.set;\n  } else {\n    set = function set(target, property, value, receiver) {\n      var base = superPropBase(target, property);\n      var desc;\n\n      if (base) {\n        desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.set) {\n          desc.set.call(receiver, value);\n          return true;\n        } else if (!desc.writable) {\n          return false;\n        }\n      }\n\n      desc = Object.getOwnPropertyDescriptor(receiver, property);\n\n      if (desc) {\n        if (!desc.writable) {\n          return false;\n        }\n\n        desc.value = value;\n        Object.defineProperty(receiver, property, desc);\n      } else {\n        defineProperty(receiver, property, value);\n      }\n\n      return true;\n    };\n  }\n\n  return set(target, property, value, receiver);\n}\n\nexport default function _set(target, property, value, receiver, isStrict) {\n  var s = set(target, property, value, receiver || target);\n\n  if (!s && isStrict) {\n    throw new Error('failed to set property');\n  }\n\n  return value;\n}","\"use strict\";\n/**\n * postprocessing v6.28.1 build Wed Jun 22 2022\n * https://github.com/pmndrs/postprocessing\n * Copyright 2015-2022 Raoul van Rschen\n * @license Zlib\n */\n\n// src/core/Disposable.js\nvar Disposable = class {\n  dispose() {\n  }\n};\n\n// src/core/EffectComposer.js\nimport {\n  DepthStencilFormat,\n  DepthTexture,\n  LinearFilter as LinearFilter2,\n  REVISION as REVISION3,\n  sRGBEncoding as sRGBEncoding7,\n  UnsignedByteType as UnsignedByteType11,\n  UnsignedIntType,\n  UnsignedInt248Type,\n  Vector2 as Vector216,\n  WebGLMultisampleRenderTarget,\n  WebGLRenderTarget as WebGLRenderTarget11\n} from \"three\";\n\n// src/passes/AdaptiveLuminancePass.js\nimport { NearestFilter, WebGLRenderTarget as WebGLRenderTarget2 } from \"three\";\n\n// src/materials/AdaptiveLuminanceMaterial.js\nimport { NoBlending, ShaderMaterial, Uniform } from \"three\";\n\n// src/materials/glsl/adaptive-luminance.frag\nvar adaptive_luminance_default = \"#include <packing>\\n#define packFloatToRGBA(v) packDepthToRGBA(v)\\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\\nuniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));\\n#if __VERSION__ < 300\\nfloat l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\\n#else\\nfloat l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\\n#endif\\nl0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}\";\n\n// src/materials/glsl/common.vert\nvar common_default = \"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/AdaptiveLuminanceMaterial.js\nvar AdaptiveLuminanceMaterial = class extends ShaderMaterial {\n  constructor() {\n    super({\n      name: \"AdaptiveLuminanceMaterial\",\n      defines: {\n        MIP_LEVEL_1X1: \"0.0\"\n      },\n      uniforms: {\n        luminanceBuffer0: new Uniform(null),\n        luminanceBuffer1: new Uniform(null),\n        minLuminance: new Uniform(0.01),\n        deltaTime: new Uniform(0),\n        tau: new Uniform(1)\n      },\n      extensions: {\n        shaderTextureLOD: true\n      },\n      blending: NoBlending,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: adaptive_luminance_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set luminanceBuffer0(value) {\n    this.uniforms.luminanceBuffer0.value = value;\n  }\n  setLuminanceBuffer0(value) {\n    this.uniforms.luminanceBuffer0.value = value;\n  }\n  set luminanceBuffer1(value) {\n    this.uniforms.luminanceBuffer1.value = value;\n  }\n  setLuminanceBuffer1(value) {\n    this.uniforms.luminanceBuffer1.value = value;\n  }\n  set mipLevel1x1(value) {\n    this.defines.MIP_LEVEL_1X1 = value.toFixed(1);\n    this.needsUpdate = true;\n  }\n  setMipLevel1x1(value) {\n    this.mipLevel1x1 = value;\n  }\n  set deltaTime(value) {\n    this.uniforms.deltaTime.value = value;\n  }\n  setDeltaTime(value) {\n    this.uniforms.deltaTime.value = value;\n  }\n  get minLuminance() {\n    return this.uniforms.minLuminance.value;\n  }\n  set minLuminance(value) {\n    this.uniforms.minLuminance.value = value;\n  }\n  getMinLuminance() {\n    return this.uniforms.minLuminance.value;\n  }\n  setMinLuminance(value) {\n    this.uniforms.minLuminance.value = value;\n  }\n  get adaptationRate() {\n    return this.uniforms.tau.value;\n  }\n  set adaptationRate(value) {\n    this.uniforms.tau.value = value;\n  }\n  getAdaptationRate() {\n    return this.uniforms.tau.value;\n  }\n  setAdaptationRate(value) {\n    this.uniforms.tau.value = value;\n  }\n};\n\n// src/materials/BokehMaterial.js\nimport { NoBlending as NoBlending2, ShaderMaterial as ShaderMaterial2, Uniform as Uniform2, Vector2 } from \"three\";\n\n// src/materials/glsl/convolution.bokeh.frag\nvar convolution_bokeh_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#if PASS == 1\\nuniform vec4 kernel64[32];\\n#else\\nuniform vec4 kernel16[8];\\n#endif\\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform vec2 scale;varying vec2 vUv;void main(){\\n#ifdef FOREGROUND\\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale.y;\\n#else\\nfloat CoC=texture2D(cocBuffer,vUv).g*scale.y;\\n#endif\\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\\n#ifdef FOREGROUND\\nvec2 step=texelSize*scale.x*max(CoC,CoCNearFar.g*scale.y);\\n#else\\nvec2 step=texelSize*scale.x*CoC;\\n#endif\\n#if PASS == 1\\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\\n#else\\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\\n#endif\\n}}\";\n\n// src/materials/BokehMaterial.js\nvar BokehMaterial = class extends ShaderMaterial2 {\n  constructor(fill = false, foreground = false) {\n    super({\n      name: \"BokehMaterial\",\n      defines: {\n        PASS: fill ? \"2\" : \"1\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform2(null),\n        cocBuffer: new Uniform2(null),\n        texelSize: new Uniform2(new Vector2()),\n        kernel64: new Uniform2(null),\n        kernel16: new Uniform2(null),\n        scale: new Uniform2(new Vector2(1, 1))\n      },\n      blending: NoBlending2,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_bokeh_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    if (foreground) {\n      this.defines.FOREGROUND = \"1\";\n    }\n    this.generateKernel();\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set cocBuffer(value) {\n    this.uniforms.cocBuffer.value = value;\n  }\n  setCoCBuffer(value) {\n    this.uniforms.cocBuffer.value = value;\n  }\n  set resolutionScale(value) {\n    this.uniforms.scale.value.x = value;\n  }\n  get scale() {\n    return this.uniforms.scale.value.y;\n  }\n  set scale(value) {\n    this.uniforms.scale.value.y = value;\n  }\n  getScale(value) {\n    return this.scale;\n  }\n  setScale(value) {\n    this.scale = value;\n  }\n  generateKernel() {\n    const GOLDEN_ANGLE = 2.39996323;\n    const points64 = new Float64Array(128);\n    const points16 = new Float64Array(32);\n    let i64 = 0, i16 = 0;\n    for (let i = 0, sqrt80 = Math.sqrt(80); i < 80; ++i) {\n      const theta = i * GOLDEN_ANGLE;\n      const r = Math.sqrt(i) / sqrt80;\n      const u = r * Math.cos(theta), v3 = r * Math.sin(theta);\n      if (i % 5 === 0) {\n        points16[i16++] = u;\n        points16[i16++] = v3;\n      } else {\n        points64[i64++] = u;\n        points64[i64++] = v3;\n      }\n    }\n    this.uniforms.kernel64.value = points64;\n    this.uniforms.kernel16.value = points16;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/CircleOfConfusionMaterial.js\nimport { BasicDepthPacking, NoBlending as NoBlending3, PerspectiveCamera, ShaderMaterial as ShaderMaterial3, Uniform as Uniform3 } from \"three\";\n\n// src/utils/getTextureDecoding.js\nimport {\n  LinearEncoding,\n  REVISION,\n  RGBAFormat,\n  sRGBEncoding,\n  UnsignedByteType\n} from \"three\";\nfunction getTextureDecoding(texture, isWebGL2) {\n  let decoding = \"texel\";\n  if (texture !== null) {\n    const revision = Number.parseInt(REVISION);\n    const sRGB8Alpha8 = isWebGL2 && revision >= 133 && revision !== 135 && texture.format === RGBAFormat && texture.type === UnsignedByteType && texture.encoding === sRGBEncoding;\n    if (!sRGB8Alpha8) {\n      switch (texture.encoding) {\n        case sRGBEncoding:\n          decoding = \"sRGBToLinear(texel)\";\n          break;\n        case LinearEncoding:\n          decoding = \"texel\";\n          break;\n        default:\n          throw new Error(`Unsupported encoding: ${texture.encoding}`);\n      }\n    }\n  }\n  return decoding;\n}\n\n// src/utils/orthographicDepthToViewZ.js\nfunction orthographicDepthToViewZ(depth, near, far) {\n  return depth * (near - far) - near;\n}\n\n// src/utils/viewZToOrthographicDepth.js\nfunction viewZToOrthographicDepth(viewZ, near, far) {\n  return Math.min(Math.max((viewZ + near) / (near - far), 0), 1);\n}\n\n// src/materials/glsl/circle-of-confusion.frag\nvar circle_of_confusion_default = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}void main(){float depth=readDepth(vUv);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}\";\n\n// src/materials/CircleOfConfusionMaterial.js\nvar CircleOfConfusionMaterial = class extends ShaderMaterial3 {\n  constructor(camera) {\n    super({\n      name: \"CircleOfConfusionMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform3(null),\n        focusDistance: new Uniform3(0),\n        focusRange: new Uniform3(0),\n        cameraNear: new Uniform3(0.3),\n        cameraFar: new Uniform3(1e3)\n      },\n      blending: NoBlending3,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: circle_of_confusion_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.uniforms.focalLength = this.uniforms.focusRange;\n    this.adoptCameraSettings(camera);\n  }\n  get near() {\n    return this.uniforms.cameraNear.value;\n  }\n  get far() {\n    return this.uniforms.cameraFar.value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  get focusDistance() {\n    return this.uniforms.focusDistance.value;\n  }\n  set focusDistance(value) {\n    this.uniforms.focusDistance.value = value;\n  }\n  get worldFocusDistance() {\n    return -orthographicDepthToViewZ(this.focusDistance, this.near, this.far);\n  }\n  set worldFocusDistance(value) {\n    this.focusDistance = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  getFocusDistance(value) {\n    this.uniforms.focusDistance.value = value;\n  }\n  setFocusDistance(value) {\n    this.uniforms.focusDistance.value = value;\n  }\n  get focalLength() {\n    return this.focusRange;\n  }\n  set focalLength(value) {\n    this.focusRange = value;\n  }\n  get focusRange() {\n    return this.uniforms.focusRange.value;\n  }\n  set focusRange(value) {\n    this.uniforms.focusRange.value = value;\n  }\n  get worldFocusRange() {\n    return -orthographicDepthToViewZ(this.focusRange, this.near, this.far);\n  }\n  set worldFocusRange(value) {\n    this.focusRange = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  getFocalLength(value) {\n    return this.focusRange;\n  }\n  setFocalLength(value) {\n    this.focusRange = value;\n  }\n  adoptCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n      if (camera instanceof PerspectiveCamera) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n};\n\n// src/materials/KawaseBlurMaterial.js\nimport { NoBlending as NoBlending4, ShaderMaterial as ShaderMaterial4, Uniform as Uniform4, Vector2 as Vector22, Vector4 } from \"three\";\n\n// src/enums/BlendFunction.js\nvar BlendFunction = {\n  SKIP: 9,\n  SET: 30,\n  ADD: 0,\n  ALPHA: 1,\n  AVERAGE: 2,\n  COLOR: 3,\n  COLOR_BURN: 4,\n  COLOR_DODGE: 5,\n  DARKEN: 6,\n  DIFFERENCE: 7,\n  DIVIDE: 8,\n  DST: 9,\n  EXCLUSION: 10,\n  HARD_LIGHT: 11,\n  HARD_MIX: 12,\n  HUE: 13,\n  INVERT: 14,\n  INVERT_RGB: 15,\n  LIGHTEN: 16,\n  LINEAR_BURN: 17,\n  LINEAR_DODGE: 18,\n  LINEAR_LIGHT: 19,\n  LUMINOSITY: 20,\n  MULTIPLY: 21,\n  NEGATION: 22,\n  NORMAL: 23,\n  OVERLAY: 24,\n  PIN_LIGHT: 25,\n  REFLECT: 26,\n  SATURATION: 27,\n  SCREEN: 28,\n  SOFT_LIGHT: 29,\n  SRC: 30,\n  SUBTRACT: 31,\n  VIVID_LIGHT: 32\n};\n\n// src/enums/ColorChannel.js\nvar ColorChannel = {\n  RED: 0,\n  GREEN: 1,\n  BLUE: 2,\n  ALPHA: 3\n};\n\n// src/enums/DepthCopyMode.js\nvar DepthCopyMode = {\n  FULL: 0,\n  SINGLE: 1\n};\n\n// src/enums/DepthTestStrategy.js\nvar DepthTestStrategy = {\n  DEFAULT: 0,\n  KEEP_MAX_DEPTH: 1,\n  DISCARD_MAX_DEPTH: 2\n};\n\n// src/enums/EdgeDetectionMode.js\nvar EdgeDetectionMode = {\n  DEPTH: 0,\n  LUMA: 1,\n  COLOR: 2\n};\n\n// src/enums/EffectAttribute.js\nvar EffectAttribute = {\n  NONE: 0,\n  DEPTH: 1,\n  CONVOLUTION: 2\n};\n\n// src/enums/EffectShaderSection.js\nvar EffectShaderSection = {\n  FRAGMENT_HEAD: \"FRAGMENT_HEAD\",\n  FRAGMENT_MAIN_UV: \"FRAGMENT_MAIN_UV\",\n  FRAGMENT_MAIN_IMAGE: \"FRAGMENT_MAIN_IMAGE\",\n  VERTEX_HEAD: \"VERTEX_HEAD\",\n  VERTEX_MAIN_SUPPORT: \"VERTEX_MAIN_SUPPORT\"\n};\n\n// src/enums/GlitchMode.js\nvar GlitchMode = {\n  DISABLED: 0,\n  SPORADIC: 1,\n  CONSTANT_MILD: 2,\n  CONSTANT_WILD: 3\n};\n\n// src/enums/KernelSize.js\nvar KernelSize = {\n  VERY_SMALL: 0,\n  SMALL: 1,\n  MEDIUM: 2,\n  LARGE: 3,\n  VERY_LARGE: 4,\n  HUGE: 5\n};\n\n// src/enums/LUTOperation.js\nvar LUTOperation = {\n  SCALE_UP: \"lut.scaleup\"\n};\n\n// src/enums/MaskFunction.js\nvar MaskFunction = {\n  DISCARD: 0,\n  MULTIPLY: 1,\n  MULTIPLY_RGB_SET_ALPHA: 2\n};\n\n// src/enums/PredicationMode.js\nvar PredicationMode = {\n  DISABLED: 0,\n  DEPTH: 1,\n  CUSTOM: 2\n};\n\n// src/enums/SMAAPreset.js\nvar SMAAPreset = {\n  LOW: 0,\n  MEDIUM: 1,\n  HIGH: 2,\n  ULTRA: 3\n};\n\n// src/enums/ToneMappingMode.js\nvar ToneMappingMode = {\n  REINHARD: 0,\n  REINHARD2: 1,\n  REINHARD2_ADAPTIVE: 2,\n  OPTIMIZED_CINEON: 3,\n  ACES_FILMIC: 4\n};\n\n// src/enums/VignetteTechnique.js\nvar VignetteTechnique = {\n  DEFAULT: 0,\n  ESKIL: 1\n};\n\n// src/enums/WebGLExtension.js\nvar WebGLExtension = {\n  DERIVATIVES: \"derivatives\",\n  FRAG_DEPTH: \"fragDepth\",\n  DRAW_BUFFERS: \"drawBuffers\",\n  SHADER_TEXTURE_LOD: \"shaderTextureLOD\"\n};\n\n// src/materials/glsl/convolution.kawase.frag\nvar convolution_kawase_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.kawase.vert\nvar convolution_kawase_default2 = \"uniform vec4 texelSize;uniform float kernel;uniform vec2 scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale.x*scale.y;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/KawaseBlurMaterial.js\nvar kernelPresets = [\n  new Float32Array([0, 0]),\n  new Float32Array([0, 1, 1]),\n  new Float32Array([0, 1, 1, 2]),\n  new Float32Array([0, 1, 2, 2, 3]),\n  new Float32Array([0, 1, 2, 3, 4, 4, 5]),\n  new Float32Array([0, 1, 2, 3, 4, 5, 7, 8, 9, 10])\n];\nvar KawaseBlurMaterial = class extends ShaderMaterial4 {\n  constructor(texelSize = new Vector4()) {\n    super({\n      name: \"KawaseBlurMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform4(null),\n        texelSize: new Uniform4(new Vector4()),\n        scale: new Uniform4(new Vector22(1, 1)),\n        kernel: new Uniform4(0)\n      },\n      blending: NoBlending4,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_kawase_default,\n      vertexShader: convolution_kawase_default2\n    });\n    this.toneMapped = false;\n    this.setTexelSize(texelSize.x, texelSize.y);\n    this.kernelSize = KernelSize.MEDIUM;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.inputBuffer = value;\n  }\n  get kernelSequence() {\n    return kernelPresets[this.kernelSize];\n  }\n  set resolutionScale(value) {\n    this.uniforms.scale.value.x = value;\n  }\n  get scale() {\n    return this.uniforms.scale.value.y;\n  }\n  set scale(value) {\n    this.uniforms.scale.value.y = value;\n  }\n  getScale() {\n    return this.uniforms.scale.value;\n  }\n  setScale(value) {\n    this.uniforms.scale.value = value;\n  }\n  getKernel() {\n    return null;\n  }\n  get kernel() {\n    return this.uniforms.kernel.value;\n  }\n  set kernel(value) {\n    this.uniforms.kernel.value = value;\n  }\n  setKernel(value) {\n    this.kernel = value;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y, x * 0.5, y * 0.5);\n  }\n  setSize(width, height) {\n    const x = 1 / width, y = 1 / height;\n    this.uniforms.texelSize.value.set(x, y, x * 0.5, y * 0.5);\n  }\n};\n\n// src/materials/CopyMaterial.js\nimport { NoBlending as NoBlending5, ShaderMaterial as ShaderMaterial5, Uniform as Uniform5 } from \"three\";\n\n// src/materials/glsl/copy.frag\nvar copy_default = \"#include <common>\\n#include <dithering_pars_fragment>\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\\n#include <encodings_fragment>\\n#include <dithering_fragment>\\n}\";\n\n// src/materials/CopyMaterial.js\nvar CopyMaterial = class extends ShaderMaterial5 {\n  constructor() {\n    super({\n      name: \"CopyMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform5(null),\n        opacity: new Uniform5(1)\n      },\n      blending: NoBlending5,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: copy_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  getOpacity(value) {\n    return this.uniforms.opacity.value;\n  }\n  setOpacity(value) {\n    this.uniforms.opacity.value = value;\n  }\n};\n\n// src/materials/DepthComparisonMaterial.js\nimport { NoBlending as NoBlending6, PerspectiveCamera as PerspectiveCamera2, RGBADepthPacking, ShaderMaterial as ShaderMaterial6, Uniform as Uniform6 } from \"three\";\n\n// src/materials/glsl/depth-comparison.frag\nvar depth_comparison_default = \"#include <packing>\\n#include <clipping_planes_pars_fragment>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <clipping_planes_fragment>\\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);\\n#if DEPTH_PACKING == 3201\\nfloat fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\\n#else\\nfloat fragCoordZ=texture2D(depthBuffer,projTexCoord).r;\\n#endif\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#else\\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#endif\\nfloat depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}\";\n\n// src/materials/glsl/depth-comparison.vert\nvar depth_comparison_default2 = \"#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <skinbase_vertex>\\n#include <begin_vertex>\\n#include <morphtarget_vertex>\\n#include <skinning_vertex>\\n#include <project_vertex>\\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\\n#include <clipping_planes_vertex>\\n}\";\n\n// src/materials/DepthComparisonMaterial.js\nvar DepthComparisonMaterial = class extends ShaderMaterial6 {\n  constructor(depthTexture = null, camera) {\n    super({\n      name: \"DepthComparisonMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform6(null),\n        cameraNear: new Uniform6(0.3),\n        cameraFar: new Uniform6(1e3)\n      },\n      blending: NoBlending6,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_comparison_default,\n      vertexShader: depth_comparison_default2\n    });\n    this.toneMapped = false;\n    this.depthBuffer = depthTexture;\n    this.depthPacking = RGBADepthPacking;\n    this.adoptCameraSettings(camera);\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = RGBADepthPacking) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  adoptCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n      if (camera instanceof PerspectiveCamera2) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n};\n\n// src/materials/DepthCopyMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking2, NoBlending as NoBlending7, ShaderMaterial as ShaderMaterial7, Uniform as Uniform7, Vector2 as Vector23 } from \"three\";\n\n// src/materials/glsl/depth-copy.frag\nvar depth_copy_default = \"#include <packing>\\n#if INPUT_DEPTH_PACKING == 3201\\nuniform lowp sampler2D depthBuffer;\\n#else\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\n#endif\\nvarying vec2 vUv;void main(){\\n#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING\\ngl_FragColor=texture2D(depthBuffer,vUv);\\n#else\\n#if INPUT_DEPTH_PACKING == 3201\\nfloat depth=unpackRGBAToDepth(texture2D(depthBuffer,vUv));gl_FragColor=vec4(vec3(depth),1.0);\\n#else\\nfloat depth=texture2D(depthBuffer,vUv).r;gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);\\n#endif\\n#endif\\n}\";\n\n// src/materials/glsl/depth-copy.vert\nvar depth_copy_default2 = \"varying vec2 vUv;\\n#if DEPTH_COPY_MODE == 1\\nuniform vec2 texelPosition;\\n#endif\\nvoid main(){\\n#if DEPTH_COPY_MODE == 1\\nvUv=texelPosition;\\n#else\\nvUv=position.xy*0.5+0.5;\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/DepthCopyMaterial.js\nvar DepthCopyMaterial = class extends ShaderMaterial7 {\n  constructor() {\n    super({\n      name: \"DepthCopyMaterial\",\n      defines: {\n        INPUT_DEPTH_PACKING: \"0\",\n        OUTPUT_DEPTH_PACKING: \"0\",\n        DEPTH_COPY_MODE: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform7(null),\n        texelPosition: new Uniform7(new Vector23())\n      },\n      blending: NoBlending7,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_copy_default,\n      vertexShader: depth_copy_default2\n    });\n    this.toneMapped = false;\n    this.depthCopyMode = DepthCopyMode.FULL;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set inputDepthPacking(value) {\n    this.defines.INPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get outputDepthPacking() {\n    return Number(this.defines.OUTPUT_DEPTH_PACKING);\n  }\n  set outputDepthPacking(value) {\n    this.defines.OUTPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking2) {\n    this.depthBuffer = buffer;\n    this.inputDepthPacking = depthPacking;\n  }\n  getInputDepthPacking() {\n    return Number(this.defines.INPUT_DEPTH_PACKING);\n  }\n  setInputDepthPacking(value) {\n    this.defines.INPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getOutputDepthPacking() {\n    return Number(this.defines.OUTPUT_DEPTH_PACKING);\n  }\n  setOutputDepthPacking(value) {\n    this.defines.OUTPUT_DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get texelPosition() {\n    return this.uniforms.texelPosition.value;\n  }\n  getTexelPosition() {\n    return this.uniforms.texelPosition.value;\n  }\n  setTexelPosition(value) {\n    this.uniforms.texelPosition.value = value;\n  }\n  get mode() {\n    return this.depthCopyMode;\n  }\n  set mode(value) {\n    this.depthCopyMode = value;\n    this.defines.DEPTH_COPY_MODE = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getMode() {\n    return this.mode;\n  }\n  setMode(value) {\n    this.mode = value;\n  }\n};\n\n// src/materials/DepthDownsamplingMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking3, NoBlending as NoBlending8, ShaderMaterial as ShaderMaterial8, Uniform as Uniform8, Vector2 as Vector24 } from \"three\";\n\n// src/materials/glsl/depth-downsampling.frag\nvar depth_downsampling_default = \"#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\n#ifdef DOWNSAMPLE_NORMALS\\nuniform lowp sampler2D normalBuffer;\\n#endif\\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])/4.0;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);\\n#ifdef DOWNSAMPLE_NORMALS\\nvec2 uvs[4];uvs[0]=vUv0;uvs[1]=vUv1;uvs[2]=vUv2;uvs[3]=vUv3;vec3 n=texture2D(normalBuffer,uvs[index]).rgb;\\n#else\\nvec3 n=vec3(0.0);\\n#endif\\ngl_FragColor=vec4(n,d[index]);}\";\n\n// src/materials/glsl/depth-downsampling.vert\nvar depth_downsampling_default2 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/DepthDownsamplingMaterial.js\nvar DepthDownsamplingMaterial = class extends ShaderMaterial8 {\n  constructor() {\n    super({\n      name: \"DepthDownsamplingMaterial\",\n      defines: {\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform8(null),\n        normalBuffer: new Uniform8(null),\n        texelSize: new Uniform8(new Vector24())\n      },\n      blending: NoBlending8,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_downsampling_default,\n      vertexShader: depth_downsampling_default2\n    });\n    this.toneMapped = false;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking3) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  set normalBuffer(value) {\n    this.uniforms.normalBuffer.value = value;\n    if (value !== null) {\n      this.defines.DOWNSAMPLE_NORMALS = \"1\";\n    } else {\n      delete this.defines.DOWNSAMPLE_NORMALS;\n    }\n    this.needsUpdate = true;\n  }\n  setNormalBuffer(value) {\n    this.normalBuffer = value;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/DepthMaskMaterial.js\nimport {\n  AlwaysDepth,\n  BasicDepthPacking as BasicDepthPacking4,\n  EqualDepth,\n  GreaterDepth,\n  GreaterEqualDepth,\n  LessDepth,\n  LessEqualDepth,\n  NeverDepth,\n  NoBlending as NoBlending9,\n  NotEqualDepth,\n  PerspectiveCamera as PerspectiveCamera3,\n  ShaderMaterial as ShaderMaterial9,\n  Uniform as Uniform9,\n  Vector2 as Vector25\n} from \"three\";\n\n// src/materials/glsl/depth-mask.frag\nvar depth_mask_default = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\\n#else\\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\\n#endif\\nuniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#endif\\n}varying vec2 vUv;void main(){vec2 depth;\\n#if DEPTH_PACKING_0 == 3201\\ndepth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\\n#else\\ndepth.x=texture2D(depthBuffer0,vUv).r;\\n#endif\\n#if DEPTH_PACKING_1 == 3201\\ndepth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\\n#else\\ndepth.y=texture2D(depthBuffer1,vUv).r;\\n#endif\\nbool isMaxDepth=(depth.x==1.0);\\n#ifdef PERSPECTIVE_CAMERA\\ndepth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);\\n#endif\\n#if DEPTH_TEST_STRATEGY == 0\\nbool keep=depthTest(depth.x,depth.y);\\n#elif DEPTH_TEST_STRATEGY == 1\\nbool keep=isMaxDepth||depthTest(depth.x,depth.y);\\n#else\\nbool keep=!isMaxDepth&&depthTest(depth.x,depth.y);\\n#endif\\nif(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}\";\n\n// src/materials/DepthMaskMaterial.js\nvar DepthMaskMaterial = class extends ShaderMaterial9 {\n  constructor() {\n    super({\n      name: \"DepthMaskMaterial\",\n      defines: {\n        DEPTH_EPSILON: \"0.0001\",\n        DEPTH_PACKING_0: \"0\",\n        DEPTH_PACKING_1: \"0\",\n        DEPTH_TEST_STRATEGY: DepthTestStrategy.KEEP_MAX_DEPTH\n      },\n      uniforms: {\n        inputBuffer: new Uniform9(null),\n        depthBuffer0: new Uniform9(null),\n        depthBuffer1: new Uniform9(null),\n        cameraNearFar: new Uniform9(new Vector25(1, 1))\n      },\n      blending: NoBlending9,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: depth_mask_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.depthMode = LessDepth;\n  }\n  set depthBuffer0(value) {\n    this.uniforms.depthBuffer0.value = value;\n  }\n  set depthPacking0(value) {\n    this.defines.DEPTH_PACKING_0 = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer0(buffer, depthPacking = BasicDepthPacking4) {\n    this.depthBuffer0 = buffer;\n    this.depthPacking0 = depthPacking;\n  }\n  set depthBuffer1(value) {\n    this.uniforms.depthBuffer1.value = value;\n  }\n  set depthPacking1(value) {\n    this.defines.DEPTH_PACKING_1 = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer1(buffer, depthPacking = BasicDepthPacking4) {\n    this.depthBuffer1 = buffer;\n    this.depthPacking1 = depthPacking;\n  }\n  get maxDepthStrategy() {\n    return Number(this.defines.DEPTH_TEST_STRATEGY);\n  }\n  set maxDepthStrategy(value) {\n    this.defines.DEPTH_TEST_STRATEGY = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  get keepFar() {\n    return this.maxDepthStrategy;\n  }\n  set keepFar(value) {\n    this.maxDepthStrategy = value ? DepthTestStrategy.KEEP_MAX_DEPTH : DepthTestStrategy.DISCARD_MAX_DEPTH;\n  }\n  getMaxDepthStrategy() {\n    return this.maxDepthStrategy;\n  }\n  setMaxDepthStrategy(value) {\n    this.maxDepthStrategy = value;\n  }\n  get epsilon() {\n    return Number(this.defines.DEPTH_EPSILON);\n  }\n  set epsilon(value) {\n    this.defines.DEPTH_EPSILON = value.toFixed(16);\n    this.needsUpdate = true;\n  }\n  getEpsilon() {\n    return this.epsilon;\n  }\n  setEpsilon(value) {\n    this.epsilon = value;\n  }\n  get depthMode() {\n    return Number(this.defines.DEPTH_MODE);\n  }\n  set depthMode(value) {\n    let depthTest;\n    switch (value) {\n      case NeverDepth:\n        depthTest = \"false\";\n        break;\n      case AlwaysDepth:\n        depthTest = \"true\";\n        break;\n      case EqualDepth:\n        depthTest = \"abs(d1 - d0) <= DEPTH_EPSILON\";\n        break;\n      case NotEqualDepth:\n        depthTest = \"abs(d1 - d0) > DEPTH_EPSILON\";\n        break;\n      case LessDepth:\n        depthTest = \"d0 > d1\";\n        break;\n      case LessEqualDepth:\n        depthTest = \"d0 >= d1\";\n        break;\n      case GreaterEqualDepth:\n        depthTest = \"d0 <= d1\";\n        break;\n      case GreaterDepth:\n      default:\n        depthTest = \"d0 < d1\";\n        break;\n    }\n    this.defines.DEPTH_MODE = value.toFixed(0);\n    this.defines[\"depthTest(d0, d1)\"] = depthTest;\n    this.needsUpdate = true;\n  }\n  getDepthMode() {\n    return this.depthMode;\n  }\n  setDepthMode(mode) {\n    this.depthMode = mode;\n  }\n  adoptCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n      if (camera instanceof PerspectiveCamera3) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n};\n\n// src/materials/DownsamplingMaterial.js\nimport { NoBlending as NoBlending10, ShaderMaterial as ShaderMaterial10, Uniform as Uniform10, Vector2 as Vector26 } from \"three\";\n\n// src/materials/glsl/convolution.downsampling.frag\nvar convolution_downsampling_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform vec2 texelSize;uniform vec3 kernel[SAMPLES];varying vec2 vUv;void main(){vec4 c=vec4(0.0);for(int i=0;i<SAMPLES;++i){vec2 uv=vUv+kernel[i].xy*texelSize;c+=kernel[i].z*texture2D(inputBuffer,uv);}gl_FragColor=c;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/DownsamplingMaterial.js\nvar DownsamplingMaterial = class extends ShaderMaterial10 {\n  constructor() {\n    super({\n      name: \"DownsamplingMaterial\",\n      defines: {\n        SAMPLES: \"13\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform10(null),\n        texelSize: new Uniform10(new Vector26()),\n        kernel: new Uniform10(new Float32Array([\n          -1,\n          1,\n          0.125,\n          1,\n          1,\n          0.125,\n          -1,\n          -1,\n          0.125,\n          1,\n          -1,\n          0.125,\n          -2,\n          2,\n          0.0555555,\n          0,\n          2,\n          0.0555555,\n          2,\n          2,\n          0.0555555,\n          -2,\n          0,\n          0.0555555,\n          0,\n          0,\n          0.0555555,\n          2,\n          0,\n          0.0555555,\n          -2,\n          -2,\n          0.0555555,\n          0,\n          -2,\n          0.0555555,\n          2,\n          -2,\n          0.0555555\n        ]))\n      },\n      blending: NoBlending10,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_downsampling_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/EdgeDetectionMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking5, NoBlending as NoBlending11, ShaderMaterial as ShaderMaterial11, Uniform as Uniform11, Vector2 as Vector27 } from \"three\";\n\n// src/materials/glsl/edge-detection.frag\nvar edge_detection_default = \"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\\n#if EDGE_DETECTION_MODE != 0\\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\\n#endif\\n#if EDGE_DETECTION_MODE == 1\\n#include <common>\\n#endif\\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\\n#elif PREDICATION_MODE == 2\\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\\n#endif\\n#if PREDICATION_MODE != 0\\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\\n#endif\\n#if EDGE_DETECTION_MODE != 0\\nuniform sampler2D inputBuffer;\\n#endif\\nvoid main(){\\n#if EDGE_DETECTION_MODE == 0\\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\\n#elif PREDICATION_MODE != 0\\nvec2 threshold=calculatePredicatedThreshold();\\n#else\\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\\n#endif\\n#if EDGE_DETECTION_MODE == 0\\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\\n#elif EDGE_DETECTION_MODE == 1\\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\\n#elif EDGE_DETECTION_MODE == 2\\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\\n#endif\\n}\";\n\n// src/materials/glsl/edge-detection.vert\nvar edge_detection_default2 = \"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\\n#if EDGE_DETECTION_MODE != 0\\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\\n#endif\\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\\n#if EDGE_DETECTION_MODE != 0\\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/EdgeDetectionMaterial.js\nvar EdgeDetectionMaterial = class extends ShaderMaterial11 {\n  constructor(texelSize = new Vector27(), mode = EdgeDetectionMode.COLOR) {\n    super({\n      name: \"EdgeDetectionMaterial\",\n      defines: {\n        LOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\n        EDGE_THRESHOLD: \"0.1\",\n        DEPTH_THRESHOLD: \"0.01\",\n        PREDICATION_MODE: \"0\",\n        PREDICATION_THRESHOLD: \"0.01\",\n        PREDICATION_SCALE: \"2.0\",\n        PREDICATION_STRENGTH: \"1.0\",\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform11(null),\n        depthBuffer: new Uniform11(null),\n        predicationBuffer: new Uniform11(null),\n        texelSize: new Uniform11(texelSize)\n      },\n      blending: NoBlending11,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: edge_detection_default,\n      vertexShader: edge_detection_default2\n    });\n    this.toneMapped = false;\n    this.edgeDetectionMode = mode;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking5) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  get edgeDetectionMode() {\n    return Number(this.defines.EDGE_DETECTION_MODE);\n  }\n  set edgeDetectionMode(value) {\n    this.defines.EDGE_DETECTION_MODE = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getEdgeDetectionMode() {\n    return this.edgeDetectionMode;\n  }\n  setEdgeDetectionMode(value) {\n    this.edgeDetectionMode = value;\n  }\n  get localContrastAdaptationFactor() {\n    return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR);\n  }\n  set localContrastAdaptationFactor(value) {\n    this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getLocalContrastAdaptationFactor() {\n    return this.localContrastAdaptationFactor;\n  }\n  setLocalContrastAdaptationFactor(value) {\n    this.localContrastAdaptationFactor = value;\n  }\n  get edgeDetectionThreshold() {\n    return Number(this.defines.EDGE_THRESHOLD);\n  }\n  set edgeDetectionThreshold(value) {\n    this.defines.EDGE_THRESHOLD = value.toFixed(\"6\");\n    this.defines.DEPTH_THRESHOLD = (value * 0.1).toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getEdgeDetectionThreshold() {\n    return this.edgeDetectionThreshold;\n  }\n  setEdgeDetectionThreshold(value) {\n    this.edgeDetectionThreshold = value;\n  }\n  get predicationMode() {\n    return Number(this.defines.PREDICATION_MODE);\n  }\n  set predicationMode(value) {\n    this.defines.PREDICATION_MODE = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  getPredicationMode() {\n    return this.predicationMode;\n  }\n  setPredicationMode(value) {\n    this.predicationMode = value;\n  }\n  set predicationBuffer(value) {\n    this.uniforms.predicationBuffer.value = value;\n  }\n  setPredicationBuffer(value) {\n    this.uniforms.predicationBuffer.value = value;\n  }\n  get predicationThreshold() {\n    return Number(this.defines.PREDICATION_THRESHOLD);\n  }\n  set predicationThreshold(value) {\n    this.defines.PREDICATION_THRESHOLD = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getPredicationThreshold() {\n    return this.predicationThreshold;\n  }\n  setPredicationThreshold(value) {\n    this.predicationThreshold = value;\n  }\n  get predicationScale() {\n    return Number(this.defines.PREDICATION_SCALE);\n  }\n  set predicationScale(value) {\n    this.defines.PREDICATION_SCALE = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getPredicationScale() {\n    return this.predicationScale;\n  }\n  setPredicationScale(value) {\n    this.predicationScale = value;\n  }\n  get predicationStrength() {\n    return Number(this.defines.PREDICATION_STRENGTH);\n  }\n  set predicationStrength(value) {\n    this.defines.PREDICATION_STRENGTH = value.toFixed(\"6\");\n    this.needsUpdate = true;\n  }\n  getPredicationStrength() {\n    return this.predicationStrength;\n  }\n  setPredicationStrength(value) {\n    this.predicationStrength = value;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/EffectMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking6, NoBlending as NoBlending12, PerspectiveCamera as PerspectiveCamera4, REVISION as REVISION2, ShaderMaterial as ShaderMaterial12, Uniform as Uniform12, Vector2 as Vector28 } from \"three\";\n\n// src/materials/glsl/effect.frag\nvar effect_default = \"#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#define packFloatToRGBA(v) packDepthToRGBA(v)\\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\\n#if THREE_REVISION >= 137\\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\\n#endif\\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\\n#ifdef ENCODE_OUTPUT\\n#include <encodings_fragment>\\n#endif\\n#include <dithering_fragment>\\n}\";\n\n// src/materials/glsl/effect.vert\nvar effect_default2 = \"uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/EffectMaterial.js\nvar EffectMaterial = class extends ShaderMaterial12 {\n  constructor(shaderParts, defines, uniforms, camera, dithering = false) {\n    super({\n      name: \"EffectMaterial\",\n      defines: {\n        THREE_REVISION: REVISION2.replace(/\\D+/g, \"\"),\n        DEPTH_PACKING: \"0\",\n        ENCODE_OUTPUT: \"1\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform12(null),\n        depthBuffer: new Uniform12(null),\n        resolution: new Uniform12(new Vector28()),\n        texelSize: new Uniform12(new Vector28()),\n        cameraNear: new Uniform12(0.3),\n        cameraFar: new Uniform12(1e3),\n        aspect: new Uniform12(1),\n        time: new Uniform12(0)\n      },\n      blending: NoBlending12,\n      depthWrite: false,\n      depthTest: false,\n      dithering\n    });\n    this.toneMapped = false;\n    if (shaderParts) {\n      this.setShaderParts(shaderParts);\n    }\n    if (defines) {\n      this.setDefines(defines);\n    }\n    if (uniforms) {\n      this.setUniforms(uniforms);\n    }\n    this.adoptCameraSettings(camera);\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get depthBuffer() {\n    return this.uniforms.depthBuffer.value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  get depthPacking() {\n    return Number(this.defines.DEPTH_PACKING);\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking6) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  setShaderData(data) {\n    this.setShaderParts(data.shaderParts);\n    this.setDefines(data.defines);\n    this.setUniforms(data.uniforms);\n    this.setExtensions(data.extensions);\n  }\n  setShaderParts(shaderParts) {\n    this.fragmentShader = effect_default.replace(EffectShaderSection.FRAGMENT_HEAD, shaderParts.get(EffectShaderSection.FRAGMENT_HEAD) ?? \"\").replace(EffectShaderSection.FRAGMENT_MAIN_UV, shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV) ?? \"\").replace(EffectShaderSection.FRAGMENT_MAIN_IMAGE, shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE) ?? \"\");\n    this.vertexShader = effect_default2.replace(EffectShaderSection.VERTEX_HEAD, shaderParts.get(EffectShaderSection.VERTEX_HEAD) ?? \"\").replace(EffectShaderSection.VERTEX_MAIN_SUPPORT, shaderParts.get(EffectShaderSection.VERTEX_MAIN_SUPPORT) ?? \"\");\n    this.needsUpdate = true;\n    return this;\n  }\n  setDefines(defines) {\n    for (const entry of defines.entries()) {\n      this.defines[entry[0]] = entry[1];\n    }\n    this.needsUpdate = true;\n    return this;\n  }\n  setUniforms(uniforms) {\n    for (const entry of uniforms.entries()) {\n      this.uniforms[entry[0]] = entry[1];\n    }\n    return this;\n  }\n  setExtensions(extensions) {\n    this.extensions = {};\n    for (const extension of extensions) {\n      this.extensions[extension] = true;\n    }\n    return this;\n  }\n  get encodeOutput() {\n    return this.defines.ENCODE_OUTPUT !== void 0;\n  }\n  set encodeOutput(value) {\n    if (this.encodeOutput !== value) {\n      if (value) {\n        this.defines.ENCODE_OUTPUT = \"1\";\n      } else {\n        delete this.defines.ENCODE_OUTPUT;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  isOutputEncodingEnabled(value) {\n    return this.encodeOutput;\n  }\n  setOutputEncodingEnabled(value) {\n    this.encodeOutput = value;\n  }\n  get time() {\n    return this.uniforms.time.value;\n  }\n  set time(value) {\n    this.uniforms.time.value = value;\n  }\n  setDeltaTime(value) {\n    this.uniforms.time.value += value;\n  }\n  adoptCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNear.value = camera.near;\n      this.uniforms.cameraFar.value = camera.far;\n      if (camera instanceof PerspectiveCamera4) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  setSize(width, height) {\n    const uniforms = this.uniforms;\n    uniforms.resolution.value.set(width, height);\n    uniforms.texelSize.value.set(1 / width, 1 / height);\n    uniforms.aspect.value = width / height;\n  }\n  static get Section() {\n    return EffectShaderSection;\n  }\n};\n\n// src/materials/GaussianBlurMaterial.js\nimport { NoBlending as NoBlending13, ShaderMaterial as ShaderMaterial13, Uniform as Uniform13, Vector2 as Vector29 } from \"three\";\n\n// src/materials/glsl/convolution.gaussian.frag\nvar convolution_gaussian_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform vec2 kernel[STEPS];varying vec2 vOffset;varying vec2 vUv;void main(){vec4 result=texture2D(inputBuffer,vUv)*kernel[0].y;for(int i=1;i<STEPS;++i){vec2 offset=kernel[i].x*vOffset;vec4 c0=texture2D(inputBuffer,vUv+offset);vec4 c1=texture2D(inputBuffer,vUv-offset);result+=(c0+c1)*kernel[i].y;}gl_FragColor=result;\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/glsl/convolution.gaussian.vert\nvar convolution_gaussian_default2 = \"uniform vec2 texelSize;uniform vec2 direction;uniform vec2 scale;varying vec2 vOffset;varying vec2 vUv;void main(){vOffset=direction*texelSize*scale.x*scale.y;vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/GaussianBlurMaterial.js\nvar GaussianBlurMaterial = class extends ShaderMaterial13 {\n  constructor({ kernelSize = 35 } = {}) {\n    super({\n      name: \"GaussianBlurMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform13(null),\n        texelSize: new Uniform13(new Vector29()),\n        direction: new Uniform13(new Vector29()),\n        kernel: new Uniform13(null),\n        scale: new Uniform13(new Vector29(1, 1))\n      },\n      blending: NoBlending13,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_gaussian_default,\n      vertexShader: convolution_gaussian_default2\n    });\n    this.toneMapped = false;\n    this._kernelSize = 0;\n    this.kernelSize = kernelSize;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get kernelSize() {\n    return this._kernelSize;\n  }\n  set kernelSize(value) {\n    this._kernelSize = value;\n    this.generateKernel(value);\n  }\n  get direction() {\n    return this.uniforms.direction.value;\n  }\n  set resolutionScale(value) {\n    this.uniforms.scale.value.x = value;\n  }\n  get scale() {\n    return this.uniforms.scale.value.y;\n  }\n  set scale(value) {\n    this.uniforms.scale.value.y = value;\n  }\n  generateKernel(kernelSize) {\n    const kernel = new GaussKernel(kernelSize);\n    const steps = kernel.linearSteps;\n    const kernelData = new Float64Array(steps * 2);\n    for (let i = 0, j = 0; i < steps; ++i) {\n      kernelData[j++] = kernel.linearOffsets[i];\n      kernelData[j++] = kernel.linearWeights[i];\n    }\n    this.uniforms.kernel.value = kernelData;\n    this.defines.STEPS = steps.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/GodRaysMaterial.js\nimport { NoBlending as NoBlending14, ShaderMaterial as ShaderMaterial14, Uniform as Uniform14 } from \"three\";\n\n// src/materials/glsl/convolution.god-rays.frag\nvar convolution_god_rays_default = \"#include <common>\\n#include <dithering_pars_fragment>\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\\n#include <dithering_fragment>\\n}\";\n\n// src/materials/GodRaysMaterial.js\nvar GodRaysMaterial = class extends ShaderMaterial14 {\n  constructor(lightPosition) {\n    super({\n      name: \"GodRaysMaterial\",\n      defines: {\n        SAMPLES_INT: \"60\",\n        SAMPLES_FLOAT: \"60.0\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform14(null),\n        lightPosition: new Uniform14(lightPosition),\n        density: new Uniform14(1),\n        decay: new Uniform14(1),\n        weight: new Uniform14(1),\n        exposure: new Uniform14(1),\n        clampMax: new Uniform14(1)\n      },\n      blending: NoBlending14,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_god_rays_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get lightPosition() {\n    return this.uniforms.lightPosition.value;\n  }\n  getLightPosition() {\n    return this.uniforms.lightPosition.value;\n  }\n  setLightPosition(value) {\n    this.uniforms.lightPosition.value = value;\n  }\n  get density() {\n    return this.uniforms.density.value;\n  }\n  set density(value) {\n    this.uniforms.density.value = value;\n  }\n  getDensity() {\n    return this.uniforms.density.value;\n  }\n  setDensity(value) {\n    this.uniforms.density.value = value;\n  }\n  get decay() {\n    return this.uniforms.decay.value;\n  }\n  set decay(value) {\n    this.uniforms.decay.value = value;\n  }\n  getDecay() {\n    return this.uniforms.decay.value;\n  }\n  setDecay(value) {\n    this.uniforms.decay.value = value;\n  }\n  get weight() {\n    return this.uniforms.weight.value;\n  }\n  set weight(value) {\n    this.uniforms.weight.value = value;\n  }\n  getWeight() {\n    return this.uniforms.weight.value;\n  }\n  setWeight(value) {\n    this.uniforms.weight.value = value;\n  }\n  get exposure() {\n    return this.uniforms.exposure.value;\n  }\n  set exposure(value) {\n    this.uniforms.exposure.value = value;\n  }\n  getExposure() {\n    return this.uniforms.exposure.value;\n  }\n  setExposure(value) {\n    this.uniforms.exposure.value = value;\n  }\n  get maxIntensity() {\n    return this.uniforms.clampMax.value;\n  }\n  set maxIntensity(value) {\n    this.uniforms.clampMax.value = value;\n  }\n  getMaxIntensity() {\n    return this.uniforms.clampMax.value;\n  }\n  setMaxIntensity(value) {\n    this.uniforms.clampMax.value = value;\n  }\n  get samples() {\n    return Number(this.defines.SAMPLES_INT);\n  }\n  set samples(value) {\n    const s = Math.floor(value);\n    this.defines.SAMPLES_INT = s.toFixed(0);\n    this.defines.SAMPLES_FLOAT = s.toFixed(1);\n    this.needsUpdate = true;\n  }\n  getSamples() {\n    return this.samples;\n  }\n  setSamples(value) {\n    this.samples = value;\n  }\n};\n\n// src/materials/LuminanceMaterial.js\nimport { NoBlending as NoBlending15, ShaderMaterial as ShaderMaterial15, Uniform as Uniform15 } from \"three\";\n\n// src/materials/glsl/luminance.frag\nvar luminance_default = \"#include <common>\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#ifdef RANGE\\nuniform vec2 range;\\n#elif defined(THRESHOLD)\\nuniform float threshold;uniform float smoothing;\\n#endif\\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\\n#ifdef RANGE\\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\\n#elif defined(THRESHOLD)\\nl=smoothstep(threshold,threshold+smoothing,l);\\n#endif\\n#ifdef COLOR\\ngl_FragColor=vec4(texel.rgb*l,l);\\n#else\\ngl_FragColor=vec4(l);\\n#endif\\n}\";\n\n// src/materials/LuminanceMaterial.js\nvar LuminanceMaterial = class extends ShaderMaterial15 {\n  constructor(colorOutput = false, luminanceRange = null) {\n    super({\n      name: \"LuminanceMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform15(null),\n        threshold: new Uniform15(0),\n        smoothing: new Uniform15(1),\n        range: new Uniform15(null)\n      },\n      blending: NoBlending15,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: luminance_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.colorOutput = colorOutput;\n    this.luminanceRange = luminanceRange;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get threshold() {\n    return this.uniforms.threshold.value;\n  }\n  set threshold(value) {\n    if (this.smoothing > 0 || value > 0) {\n      this.defines.THRESHOLD = \"1\";\n    } else {\n      delete this.defines.THRESHOLD;\n    }\n    this.uniforms.threshold.value = value;\n  }\n  getThreshold() {\n    return this.threshold;\n  }\n  setThreshold(value) {\n    this.threshold = value;\n  }\n  get smoothing() {\n    return this.uniforms.smoothing.value;\n  }\n  set smoothing(value) {\n    if (this.threshold > 0 || value > 0) {\n      this.defines.THRESHOLD = \"1\";\n    } else {\n      delete this.defines.THRESHOLD;\n    }\n    this.uniforms.smoothing.value = value;\n  }\n  getSmoothingFactor() {\n    return this.smoothing;\n  }\n  setSmoothingFactor(value) {\n    this.smoothing = value;\n  }\n  get useThreshold() {\n    return this.threshold > 0 || this.smoothing > 0;\n  }\n  set useThreshold(value) {\n  }\n  get colorOutput() {\n    return this.defines.COLOR !== void 0;\n  }\n  set colorOutput(value) {\n    if (value) {\n      this.defines.COLOR = \"1\";\n    } else {\n      delete this.defines.COLOR;\n    }\n    this.needsUpdate = true;\n  }\n  isColorOutputEnabled(value) {\n    return this.colorOutput;\n  }\n  setColorOutputEnabled(value) {\n    this.colorOutput = value;\n  }\n  get useRange() {\n    return this.luminanceRange !== null;\n  }\n  set useRange(value) {\n    this.luminanceRange = null;\n  }\n  get luminanceRange() {\n    return this.uniforms.range.value;\n  }\n  set luminanceRange(value) {\n    if (value !== null) {\n      this.defines.RANGE = \"1\";\n    } else {\n      delete this.defines.RANGE;\n    }\n    this.uniforms.range.value = value;\n    this.needsUpdate = true;\n  }\n  getLuminanceRange() {\n    return this.luminanceRange;\n  }\n  setLuminanceRange(value) {\n    this.luminanceRange = value;\n  }\n};\n\n// src/materials/MaskMaterial.js\nimport { NoBlending as NoBlending16, ShaderMaterial as ShaderMaterial16, Uniform as Uniform16, UnsignedByteType as UnsignedByteType2 } from \"three\";\n\n// src/materials/glsl/mask.frag\nvar mask_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\n#ifdef MASK_PRECISION_HIGH\\nuniform mediump sampler2D maskTexture;\\n#else\\nuniform lowp sampler2D maskTexture;\\n#endif\\n#if MASK_FUNCTION != 0\\nuniform float strength;\\n#endif\\nvarying vec2 vUv;void main(){\\n#if COLOR_CHANNEL == 0\\nfloat mask=texture2D(maskTexture,vUv).r;\\n#elif COLOR_CHANNEL == 1\\nfloat mask=texture2D(maskTexture,vUv).g;\\n#elif COLOR_CHANNEL == 2\\nfloat mask=texture2D(maskTexture,vUv).b;\\n#else\\nfloat mask=texture2D(maskTexture,vUv).a;\\n#endif\\n#if MASK_FUNCTION == 0\\n#ifdef INVERTED\\nmask=step(mask,0.0);\\n#else\\nmask=1.0-step(mask,0.0);\\n#endif\\n#else\\nmask=clamp(mask*strength,0.0,1.0);\\n#ifdef INVERTED\\nmask=1.0-mask;\\n#endif\\n#endif\\n#if MASK_FUNCTION == 2\\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\\n#else\\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\\n#endif\\n}\";\n\n// src/materials/MaskMaterial.js\nvar MaskMaterial = class extends ShaderMaterial16 {\n  constructor(maskTexture = null) {\n    super({\n      name: \"MaskMaterial\",\n      uniforms: {\n        maskTexture: new Uniform16(maskTexture),\n        inputBuffer: new Uniform16(null),\n        strength: new Uniform16(1)\n      },\n      blending: NoBlending16,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: mask_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n    this.setColorChannel(ColorChannel.RED);\n    this.setMaskFunction(MaskFunction.DISCARD);\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set maskTexture(value) {\n    this.uniforms.maskTexture.value = value;\n    delete this.defines.MASK_PRECISION_HIGH;\n    if (value.type !== UnsignedByteType2) {\n      this.defines.MASK_PRECISION_HIGH = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  setMaskTexture(value) {\n    this.maskTexture = value;\n  }\n  set colorChannel(value) {\n    this.defines.COLOR_CHANNEL = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setColorChannel(value) {\n    this.colorChannel = value;\n  }\n  set maskFunction(value) {\n    this.defines.MASK_FUNCTION = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setMaskFunction(value) {\n    this.maskFunction = value;\n  }\n  get inverted() {\n    return this.defines.INVERTED !== void 0;\n  }\n  set inverted(value) {\n    if (this.inverted && !value) {\n      delete this.defines.INVERTED;\n    } else if (value) {\n      this.defines.INVERTED = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n  get strength() {\n    return this.uniforms.strength.value;\n  }\n  set strength(value) {\n    this.uniforms.strength.value = value;\n  }\n  getStrength() {\n    return this.strength;\n  }\n  setStrength(value) {\n    this.strength = value;\n  }\n};\n\n// src/materials/OutlineMaterial.js\nimport { NoBlending as NoBlending17, ShaderMaterial as ShaderMaterial17, Uniform as Uniform17, Vector2 as Vector210 } from \"three\";\n\n// src/materials/glsl/outline.frag\nvar outline_default = \"uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}\";\n\n// src/materials/glsl/outline.vert\nvar outline_default2 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/OutlineMaterial.js\nvar OutlineMaterial = class extends ShaderMaterial17 {\n  constructor(texelSize = new Vector210()) {\n    super({\n      name: \"OutlineMaterial\",\n      uniforms: {\n        inputBuffer: new Uniform17(null),\n        texelSize: new Uniform17(new Vector210())\n      },\n      blending: NoBlending17,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: outline_default,\n      vertexShader: outline_default2\n    });\n    this.toneMapped = false;\n    this.setTexelSize(texelSize.x, texelSize.y);\n    this.uniforms.maskTexture = this.uniforms.inputBuffer;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/materials/SMAAWeightsMaterial.js\nimport { NoBlending as NoBlending18, ShaderMaterial as ShaderMaterial18, Uniform as Uniform18, Vector2 as Vector211 } from \"three\";\n\n// src/materials/glsl/smaa-weights.frag\nvar smaa_weights_default = \"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\\n#if __VERSION__ < 300\\n#define round(v) floor(v + 0.5)\\n#endif\\n#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;\\n#endif\\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\\n#if !defined(DISABLE_DIAG_DETECTION)\\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\\n#endif\\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\\n#if !defined(DISABLE_DIAG_DETECTION)\\n}else{e.r=0.0;}\\n#endif\\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}\";\n\n// src/materials/glsl/smaa-weights.vert\nvar smaa_weights_default2 = \"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/SMAAWeightsMaterial.js\nvar SMAAWeightsMaterial = class extends ShaderMaterial18 {\n  constructor(texelSize = new Vector211(), resolution = new Vector211()) {\n    super({\n      name: \"SMAAWeightsMaterial\",\n      defines: {\n        MAX_SEARCH_STEPS_INT: \"16\",\n        MAX_SEARCH_STEPS_FLOAT: \"16.0\",\n        MAX_SEARCH_STEPS_DIAG_INT: \"8\",\n        MAX_SEARCH_STEPS_DIAG_FLOAT: \"8.0\",\n        CORNER_ROUNDING: \"25\",\n        CORNER_ROUNDING_NORM: \"0.25\",\n        AREATEX_MAX_DISTANCE: \"16.0\",\n        AREATEX_MAX_DISTANCE_DIAG: \"20.0\",\n        AREATEX_PIXEL_SIZE: \"(1.0 / vec2(160.0, 560.0))\",\n        AREATEX_SUBTEX_SIZE: \"(1.0 / 7.0)\",\n        SEARCHTEX_SIZE: \"vec2(66.0, 33.0)\",\n        SEARCHTEX_PACKED_SIZE: \"vec2(64.0, 16.0)\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform18(null),\n        searchTexture: new Uniform18(null),\n        areaTexture: new Uniform18(null),\n        resolution: new Uniform18(resolution),\n        texelSize: new Uniform18(texelSize)\n      },\n      blending: NoBlending18,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: smaa_weights_default,\n      vertexShader: smaa_weights_default2\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  setInputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  get searchTexture() {\n    return this.uniforms.searchTexture.value;\n  }\n  set searchTexture(value) {\n    this.uniforms.searchTexture.value = value;\n  }\n  get areaTexture() {\n    return this.uniforms.areaTexture.value;\n  }\n  set areaTexture(value) {\n    this.uniforms.areaTexture.value = value;\n  }\n  setLookupTextures(search, area2) {\n    this.searchTexture = search;\n    this.areaTexture = area2;\n  }\n  get orthogonalSearchSteps() {\n    return Number(this.defines.MAX_SEARCH_STEPS_INT);\n  }\n  set orthogonalSearchSteps(value) {\n    const s = Math.min(Math.max(value, 0), 112);\n    this.defines.MAX_SEARCH_STEPS_INT = s.toFixed(\"0\");\n    this.defines.MAX_SEARCH_STEPS_FLOAT = s.toFixed(\"1\");\n    this.needsUpdate = true;\n  }\n  setOrthogonalSearchSteps(value) {\n    this.orthogonalSearchSteps = value;\n  }\n  get diagonalSearchSteps() {\n    return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT);\n  }\n  set diagonalSearchSteps(value) {\n    const s = Math.min(Math.max(value, 0), 20);\n    this.defines.MAX_SEARCH_STEPS_DIAG_INT = s.toFixed(\"0\");\n    this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT = s.toFixed(\"1\");\n    this.needsUpdate = true;\n  }\n  setDiagonalSearchSteps(value) {\n    this.diagonalSearchSteps = value;\n  }\n  get diagonalDetection() {\n    return this.defines.DISABLE_DIAG_DETECTION === void 0;\n  }\n  set diagonalDetection(value) {\n    if (value) {\n      delete this.defines.DISABLE_DIAG_DETECTION;\n    } else {\n      this.defines.DISABLE_DIAG_DETECTION = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  isDiagonalDetectionEnabled() {\n    return this.diagonalDetection;\n  }\n  setDiagonalDetectionEnabled(value) {\n    this.diagonalDetection = value;\n  }\n  get cornerRounding() {\n    return Number(this.defines.CORNER_ROUNDING);\n  }\n  set cornerRounding(value) {\n    const r = Math.min(Math.max(value, 0), 100);\n    this.defines.CORNER_ROUNDING = r.toFixed(\"4\");\n    this.defines.CORNER_ROUNDING_NORM = (r / 100).toFixed(\"4\");\n    this.needsUpdate = true;\n  }\n  setCornerRounding(value) {\n    this.cornerRounding = value;\n  }\n  get cornerDetection() {\n    return this.defines.DISABLE_CORNER_DETECTION === void 0;\n  }\n  set cornerDetection(value) {\n    if (value) {\n      delete this.defines.DISABLE_CORNER_DETECTION;\n    } else {\n      this.defines.DISABLE_CORNER_DETECTION = \"1\";\n    }\n    this.needsUpdate = true;\n  }\n  isCornerRoundingEnabled() {\n    return this.cornerDetection;\n  }\n  setCornerRoundingEnabled(value) {\n    this.cornerDetection = value;\n  }\n  setSize(width, height) {\n    const uniforms = this.uniforms;\n    uniforms.texelSize.value.set(1 / width, 1 / height);\n    uniforms.resolution.value.set(width, height);\n  }\n};\n\n// src/materials/SSAOMaterial.js\nimport { BasicDepthPacking as BasicDepthPacking7, Matrix4, NoBlending as NoBlending19, PerspectiveCamera as PerspectiveCamera5, ShaderMaterial as ShaderMaterial19, Uniform as Uniform19, Vector2 as Vector212 } from \"three\";\n\n// src/materials/glsl/ssao.frag\nvar ssao_default = \"#include <common>\\n#include <packing>\\n#ifdef NORMAL_DEPTH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#else\\nuniform lowp sampler2D normalBuffer;\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nfloat readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}\\n#endif\\nuniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float minRadiusScale;uniform float intensity;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\\n#endif\\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){\\n#ifdef DISTANCE_SCALING\\nfloat radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;\\n#else\\nfloat radius=RADIUS;\\n#endif\\nfloat noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float invSamples=1.0/SAMPLES_FLOAT;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*invSamples;float angle=alpha*rings+baseAngle;vec2 coord=alpha*radius*vec2(cos(angle),sin(angle))*texelSize+uv;if(coord.s<0.0||coord.s>1.0||coord.t<0.0||coord.t>1.0){continue;}\\n#ifdef NORMAL_DEPTH\\nfloat sampleDepth=texture2D(normalDepthBuffer,coord).a;\\n#else\\nfloat sampleDepth=readDepth(coord);\\n#endif\\nfloat viewZ=getViewZ(sampleDepth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\\n#else\\nfloat linearSampleDepth=sampleDepth;\\n#endif\\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coord,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\\n#ifdef NORMAL_DEPTH\\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\\n#else\\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).rgb,readDepth(vUv));\\n#endif\\nfloat ao=1.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao-=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,1.0,d);ao=clamp(pow(ao,abs(intensity)),0.0,1.0);}gl_FragColor.r=ao;}\";\n\n// src/materials/glsl/ssao.vert\nvar ssao_default2 = \"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n// src/materials/SSAOMaterial.js\nvar SSAOMaterial = class extends ShaderMaterial19 {\n  constructor(camera) {\n    super({\n      name: \"SSAOMaterial\",\n      defines: {\n        SAMPLES_INT: \"0\",\n        SAMPLES_FLOAT: \"0.0\",\n        SPIRAL_TURNS: \"0.0\",\n        RADIUS: \"1.0\",\n        RADIUS_SQ: \"1.0\",\n        DISTANCE_SCALING: \"1\",\n        DEPTH_PACKING: \"0\"\n      },\n      uniforms: {\n        depthBuffer: new Uniform19(null),\n        normalBuffer: new Uniform19(null),\n        normalDepthBuffer: new Uniform19(null),\n        noiseTexture: new Uniform19(null),\n        inverseProjectionMatrix: new Uniform19(new Matrix4()),\n        projectionMatrix: new Uniform19(new Matrix4()),\n        texelSize: new Uniform19(new Vector212()),\n        cameraNearFar: new Uniform19(new Vector212()),\n        distanceCutoff: new Uniform19(new Vector212()),\n        proximityCutoff: new Uniform19(new Vector212()),\n        noiseScale: new Uniform19(new Vector212()),\n        minRadiusScale: new Uniform19(0.33),\n        intensity: new Uniform19(1),\n        fade: new Uniform19(0.01),\n        bias: new Uniform19(0)\n      },\n      blending: NoBlending19,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: ssao_default,\n      vertexShader: ssao_default2\n    });\n    this.toneMapped = false;\n    this.adoptCameraSettings(camera);\n    this.resolution = new Vector212();\n    this.r = 1;\n  }\n  get near() {\n    return this.uniforms.cameraNearFar.value.x;\n  }\n  get far() {\n    return this.uniforms.cameraNearFar.value.y;\n  }\n  set normalDepthBuffer(value) {\n    this.uniforms.normalDepthBuffer.value = value;\n    if (value !== null) {\n      this.defines.NORMAL_DEPTH = \"1\";\n    } else {\n      delete this.defines.NORMAL_DEPTH;\n    }\n    this.needsUpdate = true;\n  }\n  setNormalDepthBuffer(value) {\n    this.normalDepthBuffer = value;\n  }\n  set normalBuffer(value) {\n    this.uniforms.normalBuffer.value = value;\n  }\n  setNormalBuffer(value) {\n    this.uniforms.normalBuffer.value = value;\n  }\n  set depthBuffer(value) {\n    this.uniforms.depthBuffer.value = value;\n  }\n  set depthPacking(value) {\n    this.defines.DEPTH_PACKING = value.toFixed(0);\n    this.needsUpdate = true;\n  }\n  setDepthBuffer(buffer, depthPacking = BasicDepthPacking7) {\n    this.depthBuffer = buffer;\n    this.depthPacking = depthPacking;\n  }\n  set noiseTexture(value) {\n    this.uniforms.noiseTexture.value = value;\n  }\n  setNoiseTexture(value) {\n    this.uniforms.noiseTexture.value = value;\n  }\n  get samples() {\n    return Number(this.defines.SAMPLES_INT);\n  }\n  set samples(value) {\n    this.defines.SAMPLES_INT = value.toFixed(0);\n    this.defines.SAMPLES_FLOAT = value.toFixed(1);\n    this.needsUpdate = true;\n  }\n  getSamples() {\n    return this.samples;\n  }\n  setSamples(value) {\n    this.samples = value;\n  }\n  get rings() {\n    return Number(this.defines.SPIRAL_TURNS);\n  }\n  set rings(value) {\n    this.defines.SPIRAL_TURNS = value.toFixed(1);\n    this.needsUpdate = true;\n  }\n  getRings() {\n    return this.rings;\n  }\n  setRings(value) {\n    this.rings = value;\n  }\n  get intensity() {\n    return this.uniforms.intensity.value;\n  }\n  set intensity(value) {\n    this.uniforms.intensity.value = value;\n  }\n  getIntensity() {\n    return this.uniforms.intensity.value;\n  }\n  setIntensity(value) {\n    this.uniforms.intensity.value = value;\n  }\n  get fade() {\n    return this.uniforms.fade.value;\n  }\n  set fade(value) {\n    this.uniforms.fade.value = value;\n  }\n  getFade() {\n    return this.uniforms.fade.value;\n  }\n  setFade(value) {\n    this.uniforms.fade.value = value;\n  }\n  get bias() {\n    return this.uniforms.bias.value;\n  }\n  set bias(value) {\n    this.uniforms.bias.value = value;\n  }\n  getBias() {\n    return this.uniforms.bias.value;\n  }\n  setBias(value) {\n    this.uniforms.bias.value = value;\n  }\n  get minRadiusScale() {\n    return this.uniforms.minRadiusScale.value;\n  }\n  set minRadiusScale(value) {\n    this.uniforms.minRadiusScale.value = value;\n  }\n  getMinRadiusScale() {\n    return this.uniforms.minRadiusScale.value;\n  }\n  setMinRadiusScale(value) {\n    this.uniforms.minRadiusScale.value = value;\n  }\n  updateRadius() {\n    const radius = this.r * this.resolution.height;\n    this.defines.RADIUS = radius.toFixed(11);\n    this.defines.RADIUS_SQ = (radius * radius).toFixed(11);\n    this.needsUpdate = true;\n  }\n  get radius() {\n    return this.r;\n  }\n  set radius(value) {\n    this.r = Math.min(Math.max(value, 1e-6), 1);\n    this.updateRadius();\n  }\n  getRadius() {\n    return this.radius;\n  }\n  setRadius(value) {\n    this.radius = value;\n  }\n  get distanceScaling() {\n    return this.defines.DISTANCE_SCALING !== void 0;\n  }\n  set distanceScaling(value) {\n    if (this.isDistanceScalingEnabled() !== value) {\n      if (value) {\n        this.defines.DISTANCE_SCALING = \"1\";\n      } else {\n        delete this.defines.DISTANCE_SCALING;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  isDistanceScalingEnabled() {\n    return this.distanceScaling;\n  }\n  setDistanceScalingEnabled(value) {\n    this.distanceScaling = value;\n  }\n  get distanceThreshold() {\n    return this.uniforms.distanceCutoff.value.x;\n  }\n  set distanceThreshold(value) {\n    this.uniforms.distanceCutoff.value.set(Math.min(Math.max(value, 0), 1), Math.min(Math.max(value + this.distanceFalloff, 0), 1));\n  }\n  get worldDistanceThreshold() {\n    return -orthographicDepthToViewZ(this.distanceThreshold, this.near, this.far);\n  }\n  set worldDistanceThreshold(value) {\n    this.distanceThreshold = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  get distanceFalloff() {\n    return this.uniforms.distanceCutoff.value.y - this.distanceThreshold;\n  }\n  set distanceFalloff(value) {\n    this.uniforms.distanceCutoff.value.y = Math.min(Math.max(this.distanceThreshold + value, 0), 1);\n  }\n  get worldDistanceFalloff() {\n    return -orthographicDepthToViewZ(this.distanceFalloff, this.near, this.far);\n  }\n  set worldDistanceFalloff(value) {\n    this.distanceFalloff = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  setDistanceCutoff(threshold, falloff) {\n    this.uniforms.distanceCutoff.value.set(Math.min(Math.max(threshold, 0), 1), Math.min(Math.max(threshold + falloff, 0), 1));\n  }\n  get proximityThreshold() {\n    return this.uniforms.proximityCutoff.value.x;\n  }\n  set proximityThreshold(value) {\n    this.uniforms.proximityCutoff.value.set(Math.min(Math.max(value, 0), 1), Math.min(Math.max(value + this.proximityFalloff, 0), 1));\n  }\n  get worldProximityThreshold() {\n    return -orthographicDepthToViewZ(this.proximityThreshold, this.near, this.far);\n  }\n  set worldProximityThreshold(value) {\n    this.proximityThreshold = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  get proximityFalloff() {\n    return this.uniforms.proximityCutoff.value.y - this.proximityThreshold;\n  }\n  set proximityFalloff(value) {\n    this.uniforms.proximityCutoff.value.y = Math.min(Math.max(this.proximityThreshold + value, 0), 1);\n  }\n  get worldProximityFalloff() {\n    return -orthographicDepthToViewZ(this.proximityFalloff, this.near, this.far);\n  }\n  set worldProximityFalloff(value) {\n    this.proximityFalloff = viewZToOrthographicDepth(-value, this.near, this.far);\n  }\n  setProximityCutoff(threshold, falloff) {\n    this.uniforms.proximityCutoff.value.set(Math.min(Math.max(threshold, 0), 1), Math.min(Math.max(threshold + falloff, 0), 1));\n  }\n  setTexelSize(x, y) {\n    this.uniforms.texelSize.value.set(x, y);\n  }\n  adoptCameraSettings(camera) {\n    if (camera) {\n      this.uniforms.cameraNearFar.value.set(camera.near, camera.far);\n      this.uniforms.projectionMatrix.value.copy(camera.projectionMatrix);\n      this.uniforms.inverseProjectionMatrix.value.copy(camera.projectionMatrix).invert();\n      if (camera instanceof PerspectiveCamera5) {\n        this.defines.PERSPECTIVE_CAMERA = \"1\";\n      } else {\n        delete this.defines.PERSPECTIVE_CAMERA;\n      }\n      this.needsUpdate = true;\n    }\n  }\n  setSize(width, height) {\n    const uniforms = this.uniforms;\n    const noiseTexture = uniforms.noiseTexture.value;\n    if (noiseTexture !== null) {\n      uniforms.noiseScale.value.set(width / noiseTexture.image.width, height / noiseTexture.image.height);\n    }\n    uniforms.texelSize.value.set(1 / width, 1 / height);\n    this.resolution.set(width, height);\n    this.updateRadius();\n  }\n};\n\n// src/materials/UpsamplingMaterial.js\nimport { NoBlending as NoBlending20, ShaderMaterial as ShaderMaterial20, Uniform as Uniform20, Vector2 as Vector213 } from \"three\";\n\n// src/materials/glsl/convolution.upsampling.frag\nvar convolution_upsampling_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\\n#else\\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\\n#endif\\nuniform float radius;uniform vec2 texelSize;uniform vec3 kernel[SAMPLES];varying vec2 vUv;vec4 textureClampToBorder(sampler2D map,const in vec2 uv){return(uv.s<0.0||uv.s>1.0||uv.t<0.0||uv.t>1.0)?vec4(0.0):texture2D(map,uv);}void main(){vec4 c=vec4(0.0);for(int i=0;i<SAMPLES;++i){vec2 uv=vUv+kernel[i].xy*texelSize;c+=kernel[i].z*textureClampToBorder(inputBuffer,uv);}vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\\n#include <encodings_fragment>\\n}\";\n\n// src/materials/UpsamplingMaterial.js\nvar UpsamplingMaterial = class extends ShaderMaterial20 {\n  constructor() {\n    super({\n      name: \"UpsamplingMaterial\",\n      defines: {\n        SAMPLES: \"9\"\n      },\n      uniforms: {\n        inputBuffer: new Uniform20(null),\n        supportBuffer: new Uniform20(null),\n        texelSize: new Uniform20(new Vector213()),\n        radius: new Uniform20(0.85),\n        kernel: new Uniform20(new Float32Array([\n          -1,\n          1,\n          0.0625,\n          0,\n          1,\n          0.125,\n          1,\n          1,\n          0.0625,\n          -1,\n          0,\n          0.125,\n          0,\n          0,\n          0.25,\n          1,\n          0,\n          0.125,\n          -1,\n          -1,\n          0.0625,\n          0,\n          -1,\n          0.125,\n          1,\n          -1,\n          0.0625\n        ]))\n      },\n      blending: NoBlending20,\n      depthWrite: false,\n      depthTest: false,\n      fragmentShader: convolution_upsampling_default,\n      vertexShader: common_default\n    });\n    this.toneMapped = false;\n  }\n  set inputBuffer(value) {\n    this.uniforms.inputBuffer.value = value;\n  }\n  set supportBuffer(value) {\n    this.uniforms.supportBuffer.value = value;\n  }\n  get radius() {\n    return this.uniforms.radius.value;\n  }\n  set radius(value) {\n    this.uniforms.radius.value = value;\n  }\n  setSize(width, height) {\n    this.uniforms.texelSize.value.set(1 / width, 1 / height);\n  }\n};\n\n// src/passes/CopyPass.js\nimport { LinearFilter, sRGBEncoding as sRGBEncoding2, UnsignedByteType as UnsignedByteType3, WebGLRenderTarget } from \"three\";\n\n// src/passes/Pass.js\nimport { BasicDepthPacking as BasicDepthPacking8, BufferAttribute, BufferGeometry, Camera, Mesh, Scene } from \"three\";\nvar dummyCamera = new Camera();\nvar geometry = null;\nfunction getFullscreenTriangle() {\n  if (geometry === null) {\n    const vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\n    const uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\n    geometry = new BufferGeometry();\n    if (geometry.setAttribute !== void 0) {\n      geometry.setAttribute(\"position\", new BufferAttribute(vertices, 3));\n      geometry.setAttribute(\"uv\", new BufferAttribute(uvs, 2));\n    } else {\n      geometry.addAttribute(\"position\", new BufferAttribute(vertices, 3));\n      geometry.addAttribute(\"uv\", new BufferAttribute(uvs, 2));\n    }\n  }\n  return geometry;\n}\nvar Pass = class {\n  constructor(name = \"Pass\", scene = new Scene(), camera = dummyCamera) {\n    this.name = name;\n    this.renderer = null;\n    this.scene = scene;\n    this.camera = camera;\n    this.screen = null;\n    this.rtt = true;\n    this.needsSwap = true;\n    this.needsDepthTexture = false;\n    this.enabled = true;\n  }\n  get renderToScreen() {\n    return !this.rtt;\n  }\n  set renderToScreen(value) {\n    if (this.rtt === value) {\n      const material = this.getFullscreenMaterial();\n      if (material !== null) {\n        material.needsUpdate = true;\n      }\n      this.rtt = !value;\n    }\n  }\n  setRenderer(renderer) {\n    this.renderer = renderer;\n  }\n  isEnabled() {\n    return this.enabled;\n  }\n  setEnabled(value) {\n    this.enabled = value;\n  }\n  get fullscreenMaterial() {\n    return this.screen !== null ? this.screen.material : null;\n  }\n  set fullscreenMaterial(value) {\n    let screen = this.screen;\n    if (screen !== null) {\n      screen.material = value;\n    } else {\n      screen = new Mesh(getFullscreenTriangle(), value);\n      screen.frustumCulled = false;\n      if (this.scene === null) {\n        this.scene = new Scene();\n      }\n      this.scene.add(screen);\n      this.screen = screen;\n    }\n  }\n  getFullscreenMaterial() {\n    return this.fullscreenMaterial;\n  }\n  setFullscreenMaterial(value) {\n    this.fullscreenMaterial = value;\n  }\n  getDepthTexture() {\n    return null;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking8) {\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    throw new Error(\"Render method not implemented!\");\n  }\n  setSize(width, height) {\n  }\n  initialize(renderer, alpha, frameBufferType) {\n  }\n  dispose() {\n    for (const key of Object.keys(this)) {\n      const property = this[key];\n      if (property !== null && typeof property.dispose === \"function\") {\n        if (property instanceof Scene || property === this.renderer) {\n          continue;\n        }\n        this[key].dispose();\n      }\n    }\n  }\n};\n\n// src/passes/CopyPass.js\nvar CopyPass = class extends Pass {\n  constructor(renderTarget, autoResize = true) {\n    super(\"CopyPass\");\n    this.fullscreenMaterial = new CopyMaterial();\n    this.needsSwap = false;\n    this.renderTarget = renderTarget;\n    if (renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget(1, 1, {\n        minFilter: LinearFilter,\n        magFilter: LinearFilter,\n        stencilBuffer: false,\n        depthBuffer: false\n      });\n      this.renderTarget.texture.name = \"CopyPass.Target\";\n    }\n    this.autoResize = autoResize;\n  }\n  get resize() {\n    return this.autoResize;\n  }\n  set resize(value) {\n    this.autoResize = value;\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  setAutoResizeEnabled(value) {\n    this.autoResize = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    this.fullscreenMaterial.inputBuffer = inputBuffer.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    if (this.autoResize) {\n      this.renderTarget.setSize(width, height);\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType3) {\n        this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding2) {\n        this.renderTarget.texture.encoding = sRGBEncoding2;\n      }\n    }\n  }\n};\n\n// src/passes/AdaptiveLuminancePass.js\nvar AdaptiveLuminancePass = class extends Pass {\n  constructor(luminanceBuffer, { minLuminance = 0.01, adaptationRate = 1 } = {}) {\n    super(\"AdaptiveLuminancePass\");\n    this.fullscreenMaterial = new AdaptiveLuminanceMaterial();\n    this.needsSwap = false;\n    this.renderTargetPrevious = new WebGLRenderTarget2(1, 1, {\n      minFilter: NearestFilter,\n      magFilter: NearestFilter,\n      depthBuffer: false\n    });\n    this.renderTargetPrevious.texture.name = \"Luminance.Previous\";\n    const material = this.fullscreenMaterial;\n    material.luminanceBuffer0 = this.renderTargetPrevious.texture;\n    material.luminanceBuffer1 = luminanceBuffer;\n    material.minLuminance = minLuminance;\n    material.adaptationRate = adaptationRate;\n    this.renderTargetAdapted = this.renderTargetPrevious.clone();\n    this.renderTargetAdapted.texture.name = \"Luminance.Adapted\";\n    this.copyPass = new CopyPass(this.renderTargetPrevious, false);\n  }\n  get texture() {\n    return this.renderTargetAdapted.texture;\n  }\n  getTexture() {\n    return this.renderTargetAdapted.texture;\n  }\n  set mipLevel1x1(value) {\n    this.fullscreenMaterial.mipLevel1x1 = value;\n  }\n  get adaptationRate() {\n    return this.fullscreenMaterial.adaptationRate;\n  }\n  set adaptationRate(value) {\n    this.fullscreenMaterial.adaptationRate = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    this.fullscreenMaterial.deltaTime = deltaTime;\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTargetAdapted);\n    renderer.render(this.scene, this.camera);\n    this.copyPass.render(renderer, this.renderTargetAdapted);\n  }\n};\n\n// src/passes/ClearMaskPass.js\nvar ClearMaskPass = class extends Pass {\n  constructor() {\n    super(\"ClearMaskPass\", null, null);\n    this.needsSwap = false;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const stencil = renderer.state.buffers.stencil;\n    stencil.setLocked(false);\n    stencil.setTest(false);\n  }\n};\n\n// src/passes/ClearPass.js\nimport { Color } from \"three\";\nvar color = new Color();\nvar ClearPass = class extends Pass {\n  constructor(color2 = true, depth = true, stencil = false) {\n    super(\"ClearPass\", null, null);\n    this.needsSwap = false;\n    this.color = color2;\n    this.depth = depth;\n    this.stencil = stencil;\n    this.overrideClearColor = null;\n    this.overrideClearAlpha = -1;\n  }\n  setClearFlags(color2, depth, stencil) {\n    this.color = color2;\n    this.depth = depth;\n    this.stencil = stencil;\n  }\n  getOverrideClearColor() {\n    return this.overrideClearColor;\n  }\n  setOverrideClearColor(value) {\n    this.overrideClearColor = value;\n  }\n  getOverrideClearAlpha() {\n    return this.overrideClearAlpha;\n  }\n  setOverrideClearAlpha(value) {\n    this.overrideClearAlpha = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const overrideClearColor = this.overrideClearColor;\n    const overrideClearAlpha = this.overrideClearAlpha;\n    const clearAlpha = renderer.getClearAlpha();\n    const hasOverrideClearColor = overrideClearColor !== null;\n    const hasOverrideClearAlpha = overrideClearAlpha >= 0;\n    if (hasOverrideClearColor) {\n      color.copy(renderer.getClearColor(color));\n      renderer.setClearColor(overrideClearColor, hasOverrideClearAlpha ? overrideClearAlpha : clearAlpha);\n    } else if (hasOverrideClearAlpha) {\n      renderer.setClearAlpha(overrideClearAlpha);\n    }\n    renderer.setRenderTarget(this.renderToScreen ? null : inputBuffer);\n    renderer.clear(this.color, this.depth, this.stencil);\n    if (hasOverrideClearColor) {\n      renderer.setClearColor(color, clearAlpha);\n    } else if (hasOverrideClearAlpha) {\n      renderer.setClearAlpha(clearAlpha);\n    }\n  }\n};\n\n// src/passes/DepthPass.js\nimport { Color as Color2, MeshDepthMaterial, NearestFilter as NearestFilter2, RGBADepthPacking as RGBADepthPacking2, WebGLRenderTarget as WebGLRenderTarget3 } from \"three\";\n\n// src/core/Resolution.js\nimport { EventDispatcher, Vector2 as Vector214 } from \"three\";\nvar AUTO_SIZE = -1;\nvar Resolution = class extends EventDispatcher {\n  constructor(resizable, width = AUTO_SIZE, height = AUTO_SIZE, scale = 1) {\n    super();\n    this.resizable = resizable;\n    this.base = new Vector214(1, 1);\n    this.preferred = new Vector214(width, height);\n    this.target = this.preferred;\n    this.s = scale;\n  }\n  get width() {\n    const { base, preferred, scale } = this;\n    let result;\n    if (preferred.width !== AUTO_SIZE) {\n      result = preferred.width;\n    } else if (preferred.height !== AUTO_SIZE) {\n      result = Math.round(preferred.height * (base.width / Math.max(base.height, 1)));\n    } else {\n      result = Math.round(base.width * scale);\n    }\n    return result;\n  }\n  set width(value) {\n    this.preferredWidth = value;\n  }\n  get height() {\n    const { base, preferred, scale } = this;\n    let result;\n    if (preferred.height !== AUTO_SIZE) {\n      result = preferred.height;\n    } else if (preferred.width !== AUTO_SIZE) {\n      result = Math.round(preferred.width / Math.max(base.width / Math.max(base.height, 1), 1));\n    } else {\n      result = Math.round(base.height * scale);\n    }\n    return result;\n  }\n  set height(value) {\n    this.preferredHeight = value;\n  }\n  getWidth() {\n    return this.width;\n  }\n  getHeight() {\n    return this.height;\n  }\n  get scale() {\n    return this.s;\n  }\n  set scale(value) {\n    if (this.s !== value) {\n      this.s = value;\n      this.preferred.setScalar(AUTO_SIZE);\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  getScale() {\n    return this.scale;\n  }\n  setScale(value) {\n    this.scale = value;\n  }\n  get baseWidth() {\n    return this.base.width;\n  }\n  set baseWidth(value) {\n    if (this.base.width !== value) {\n      this.base.width = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  getBaseWidth() {\n    return this.base.width;\n  }\n  setBaseWidth(value) {\n    if (this.base.width !== value) {\n      this.base.width = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  get baseHeight() {\n    return this.base.height;\n  }\n  set baseHeight(value) {\n    if (this.base.height !== value) {\n      this.base.height = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  getBaseHeight() {\n    return this.baseHeight;\n  }\n  setBaseHeight(value) {\n    this.baseHeight = value;\n  }\n  setBaseSize(width, height) {\n    if (this.base.width !== width || this.base.height !== height) {\n      this.base.set(width, height);\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  get preferredWidth() {\n    return this.preferred.width;\n  }\n  set preferredWidth(value) {\n    if (this.preferred.width !== value) {\n      this.preferred.width = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  getPreferredWidth() {\n    return this.preferredWidth;\n  }\n  setPreferredWidth(value) {\n    this.preferredWidth = value;\n  }\n  get preferredHeight() {\n    return this.preferred.height;\n  }\n  set preferredHeight(value) {\n    if (this.preferred.height !== value) {\n      this.preferred.height = value;\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  getPreferredHeight() {\n    return this.preferredHeight;\n  }\n  setPreferredHeight(value) {\n    this.preferredHeight = value;\n  }\n  setPreferredSize(width, height) {\n    if (this.preferred.width !== width || this.preferred.height !== height) {\n      this.preferred.set(width, height);\n      this.dispatchEvent({ type: \"change\" });\n      this.resizable.setSize(this.base.width, this.base.height);\n    }\n  }\n  copy(resolution) {\n    this.s = resolution.scale;\n    this.base.set(resolution.getBaseWidth(), resolution.getBaseHeight());\n    this.preferred.set(resolution.getPreferredWidth(), resolution.getPreferredHeight());\n    this.dispatchEvent({ type: \"change\" });\n    this.resizable.setSize(this.base.width, this.base.height);\n  }\n  static get AUTO_SIZE() {\n    return AUTO_SIZE;\n  }\n};\n\n// src/core/OverrideMaterialManager.js\nimport { BackSide, DoubleSide, FrontSide } from \"three\";\nvar workaroundEnabled = false;\nvar OverrideMaterialManager = class {\n  constructor(material = null) {\n    this.originalMaterials = /* @__PURE__ */ new Map();\n    this.material = null;\n    this.materials = null;\n    this.materialsBackSide = null;\n    this.materialsDoubleSide = null;\n    this.materialsFlatShaded = null;\n    this.materialsFlatShadedBackSide = null;\n    this.materialsFlatShadedDoubleSide = null;\n    this.setMaterial(material);\n    this.meshCount = 0;\n    this.replaceMaterial = (node) => {\n      if (node.isMesh) {\n        let materials;\n        if (node.material.flatShading) {\n          switch (node.material.side) {\n            case DoubleSide:\n              materials = this.materialsFlatShadedDoubleSide;\n              break;\n            case BackSide:\n              materials = this.materialsFlatShadedBackSide;\n              break;\n            default:\n              materials = this.materialsFlatShaded;\n              break;\n          }\n        } else {\n          switch (node.material.side) {\n            case DoubleSide:\n              materials = this.materialsDoubleSide;\n              break;\n            case BackSide:\n              materials = this.materialsBackSide;\n              break;\n            default:\n              materials = this.materials;\n              break;\n          }\n        }\n        this.originalMaterials.set(node, node.material);\n        if (node.isSkinnedMesh) {\n          node.material = materials[2];\n        } else if (node.isInstancedMesh) {\n          node.material = materials[1];\n        } else {\n          node.material = materials[0];\n        }\n        ++this.meshCount;\n      }\n    };\n  }\n  setMaterial(material) {\n    this.disposeMaterials();\n    this.material = material;\n    if (material !== null) {\n      const materials = this.materials = [\n        material.clone(),\n        material.clone(),\n        material.clone()\n      ];\n      for (const m2 of materials) {\n        m2.uniforms = Object.assign({}, material.uniforms);\n        m2.side = FrontSide;\n      }\n      materials[2].skinning = true;\n      this.materialsBackSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.side = BackSide;\n        return c2;\n      });\n      this.materialsDoubleSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.side = DoubleSide;\n        return c2;\n      });\n      this.materialsFlatShaded = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.flatShading = true;\n        return c2;\n      });\n      this.materialsFlatShadedBackSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.flatShading = true;\n        c2.side = BackSide;\n        return c2;\n      });\n      this.materialsFlatShadedDoubleSide = materials.map((m2) => {\n        const c2 = m2.clone();\n        c2.uniforms = Object.assign({}, material.uniforms);\n        c2.flatShading = true;\n        c2.side = DoubleSide;\n        return c2;\n      });\n    }\n  }\n  render(renderer, scene, camera) {\n    const shadowMapEnabled = renderer.shadowMap.enabled;\n    renderer.shadowMap.enabled = false;\n    if (workaroundEnabled) {\n      const originalMaterials = this.originalMaterials;\n      this.meshCount = 0;\n      scene.traverse(this.replaceMaterial);\n      renderer.render(scene, camera);\n      for (const entry of originalMaterials) {\n        entry[0].material = entry[1];\n      }\n      if (this.meshCount !== originalMaterials.size) {\n        originalMaterials.clear();\n      }\n    } else {\n      const overrideMaterial = scene.overrideMaterial;\n      scene.overrideMaterial = this.material;\n      renderer.render(scene, camera);\n      scene.overrideMaterial = overrideMaterial;\n    }\n    renderer.shadowMap.enabled = shadowMapEnabled;\n  }\n  disposeMaterials() {\n    if (this.material !== null) {\n      const materials = this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);\n      for (const m2 of materials) {\n        m2.dispose();\n      }\n    }\n  }\n  dispose() {\n    this.originalMaterials.clear();\n    this.disposeMaterials();\n  }\n  static get workaroundEnabled() {\n    return workaroundEnabled;\n  }\n  static set workaroundEnabled(value) {\n    workaroundEnabled = value;\n  }\n};\n\n// src/passes/RenderPass.js\nvar RenderPass = class extends Pass {\n  constructor(scene, camera, overrideMaterial = null) {\n    super(\"RenderPass\", scene, camera);\n    this.needsSwap = false;\n    this.clearPass = new ClearPass();\n    this.overrideMaterialManager = overrideMaterial === null ? null : new OverrideMaterialManager(overrideMaterial);\n    this.ignoreBackground = false;\n    this.skipShadowMapUpdate = false;\n    this.selection = null;\n  }\n  get renderToScreen() {\n    return super.renderToScreen;\n  }\n  set renderToScreen(value) {\n    super.renderToScreen = value;\n    this.clearPass.renderToScreen = value;\n  }\n  get overrideMaterial() {\n    const manager = this.overrideMaterialManager;\n    return manager !== null ? manager.material : null;\n  }\n  set overrideMaterial(value) {\n    const manager = this.overrideMaterialManager;\n    if (value !== null) {\n      if (manager !== null) {\n        manager.setMaterial(value);\n      } else {\n        this.overrideMaterialManager = new OverrideMaterialManager(value);\n      }\n    } else if (manager !== null) {\n      manager.dispose();\n      this.overrideMaterialManager = null;\n    }\n  }\n  getOverrideMaterial() {\n    return this.overrideMaterial;\n  }\n  setOverrideMaterial(value) {\n    this.overrideMaterial = value;\n  }\n  get clear() {\n    return this.clearPass.enabled;\n  }\n  set clear(value) {\n    this.clearPass.enabled = value;\n  }\n  getSelection() {\n    return this.selection;\n  }\n  setSelection(value) {\n    this.selection = value;\n  }\n  isBackgroundDisabled() {\n    return this.ignoreBackground;\n  }\n  setBackgroundDisabled(value) {\n    this.ignoreBackground = value;\n  }\n  isShadowMapDisabled() {\n    return this.skipShadowMapUpdate;\n  }\n  setShadowMapDisabled(value) {\n    this.skipShadowMapUpdate = value;\n  }\n  getClearPass() {\n    return this.clearPass;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const selection = this.selection;\n    const mask = camera.layers.mask;\n    const background = scene.background;\n    const shadowMapAutoUpdate = renderer.shadowMap.autoUpdate;\n    const renderTarget = this.renderToScreen ? null : inputBuffer;\n    if (selection !== null) {\n      camera.layers.set(selection.getLayer());\n    }\n    if (this.skipShadowMapUpdate) {\n      renderer.shadowMap.autoUpdate = false;\n    }\n    if (this.ignoreBackground || this.clearPass.overrideClearColor !== null) {\n      scene.background = null;\n    }\n    if (this.clearPass.enabled) {\n      this.clearPass.render(renderer, inputBuffer);\n    }\n    renderer.setRenderTarget(renderTarget);\n    if (this.overrideMaterialManager !== null) {\n      this.overrideMaterialManager.render(renderer, scene, camera);\n    } else {\n      renderer.render(scene, camera);\n    }\n    camera.layers.mask = mask;\n    scene.background = background;\n    renderer.shadowMap.autoUpdate = shadowMapAutoUpdate;\n  }\n};\n\n// src/passes/DepthPass.js\nvar DepthPass = class extends Pass {\n  constructor(scene, camera, {\n    renderTarget,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"DepthPass\");\n    this.needsSwap = false;\n    this.renderPass = new RenderPass(scene, camera, new MeshDepthMaterial({\n      depthPacking: RGBADepthPacking2\n    }));\n    const renderPass = this.renderPass;\n    renderPass.skipShadowMapUpdate = true;\n    renderPass.ignoreBackground = true;\n    const clearPass = renderPass.getClearPass();\n    clearPass.overrideClearColor = new Color2(16777215);\n    clearPass.overrideClearAlpha = 1;\n    this.renderTarget = renderTarget;\n    if (this.renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget3(1, 1, {\n        minFilter: NearestFilter2,\n        magFilter: NearestFilter2\n      });\n      this.renderTarget.texture.name = \"DepthPass.Target\";\n    }\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const renderTarget = this.renderToScreen ? null : this.renderTarget;\n    this.renderPass.render(renderer, renderTarget);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n};\n\n// src/passes/DepthDownsamplingPass.js\nimport { BasicDepthPacking as BasicDepthPacking9, FloatType, NearestFilter as NearestFilter3, WebGLRenderTarget as WebGLRenderTarget4 } from \"three\";\nvar DepthDownsamplingPass = class extends Pass {\n  constructor({\n    normalBuffer = null,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"DepthDownsamplingPass\");\n    const material = new DepthDownsamplingMaterial();\n    material.normalBuffer = normalBuffer;\n    this.fullscreenMaterial = material;\n    this.needsDepthTexture = true;\n    this.needsSwap = false;\n    this.renderTarget = new WebGLRenderTarget4(1, 1, {\n      minFilter: NearestFilter3,\n      magFilter: NearestFilter3,\n      depthBuffer: false,\n      type: FloatType\n    });\n    this.renderTarget.texture.name = \"DepthDownsamplingPass.Target\";\n    this.renderTarget.texture.generateMipmaps = false;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking9) {\n    this.fullscreenMaterial.depthBuffer = depthTexture;\n    this.fullscreenMaterial.depthPacking = depthPacking;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    this.fullscreenMaterial.setSize(width, height);\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (!renderer.capabilities.isWebGL2) {\n      throw new Error(\"The DepthDownsamplingPass requires WebGL 2\");\n    }\n  }\n};\n\n// src/passes/DepthPickingPass.js\nimport { FloatType as FloatType3, RGBADepthPacking as RGBADepthPacking4 } from \"three\";\n\n// src/passes/DepthCopyPass.js\nimport {\n  BasicDepthPacking as BasicDepthPacking10,\n  FloatType as FloatType2,\n  NearestFilter as NearestFilter4,\n  RGBADepthPacking as RGBADepthPacking3,\n  UnsignedByteType as UnsignedByteType4,\n  WebGLRenderTarget as WebGLRenderTarget5\n} from \"three\";\nvar DepthCopyPass = class extends Pass {\n  constructor({ depthPacking = RGBADepthPacking3 } = {}) {\n    super(\"DepthCopyPass\");\n    const material = new DepthCopyMaterial();\n    material.outputDepthPacking = depthPacking;\n    this.fullscreenMaterial = material;\n    this.needsDepthTexture = true;\n    this.needsSwap = false;\n    this.renderTarget = new WebGLRenderTarget5(1, 1, {\n      type: depthPacking === RGBADepthPacking3 ? UnsignedByteType4 : FloatType2,\n      minFilter: NearestFilter4,\n      magFilter: NearestFilter4,\n      depthBuffer: false\n    });\n    this.renderTarget.texture.name = \"DepthCopyPass.Target\";\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  get depthPacking() {\n    return this.fullscreenMaterial.outputDepthPacking;\n  }\n  getDepthPacking() {\n    return this.fullscreenMaterial.outputDepthPacking;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking10) {\n    this.fullscreenMaterial.depthBuffer = depthTexture;\n    this.fullscreenMaterial.inputDepthPacking = depthPacking;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    this.renderTarget.setSize(width, height);\n  }\n};\n\n// src/passes/DepthPickingPass.js\nvar unpackFactors = new Float32Array([\n  255 / 256 / 256 ** 3,\n  255 / 256 / 256 ** 2,\n  255 / 256 / 256,\n  255 / 256\n]);\nfunction unpackRGBAToDepth(packedDepth) {\n  return (packedDepth[0] * unpackFactors[0] + packedDepth[1] * unpackFactors[1] + packedDepth[2] * unpackFactors[2] + packedDepth[3] * unpackFactors[3]) / 255;\n}\nvar DepthPickingPass = class extends DepthCopyPass {\n  constructor({ depthPacking = RGBADepthPacking4, mode = DepthCopyMode.SINGLE } = {}) {\n    super({ depthPacking });\n    this.name = \"DepthPickingPass\";\n    this.fullscreenMaterial.mode = mode;\n    this.pixelBuffer = depthPacking === RGBADepthPacking4 ? new Uint8Array(4) : new Float32Array(4);\n    this.callback = null;\n  }\n  readDepth(ndc) {\n    this.fullscreenMaterial.texelPosition.set(ndc.x * 0.5 + 0.5, ndc.y * 0.5 + 0.5);\n    return new Promise((resolve) => {\n      this.callback = resolve;\n    });\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const material = this.fullscreenMaterial;\n    const mode = material.mode;\n    if (mode === DepthCopyMode.FULL) {\n      super.render(renderer);\n    }\n    if (this.callback !== null) {\n      const renderTarget = this.renderTarget;\n      const pixelBuffer = this.pixelBuffer;\n      const packed = renderTarget.texture.type !== FloatType3;\n      let x = 0, y = 0;\n      if (mode === DepthCopyMode.SINGLE) {\n        super.render(renderer);\n      } else {\n        const texelPosition = material.texelPosition;\n        x = Math.round(texelPosition.x * renderTarget.width);\n        y = Math.round(texelPosition.y * renderTarget.height);\n      }\n      renderer.readRenderTargetPixels(renderTarget, x, y, 1, 1, pixelBuffer);\n      this.callback(packed ? unpackRGBAToDepth(pixelBuffer) : pixelBuffer[0]);\n      this.callback = null;\n    }\n  }\n  setSize(width, height) {\n    if (this.fullscreenMaterial.mode === DepthCopyMode.FULL) {\n      super.setSize(width, height);\n    }\n  }\n};\n\n// src/passes/EffectPass.js\nimport { BasicDepthPacking as BasicDepthPacking11, UnsignedByteType as UnsignedByteType5, sRGBEncoding as sRGBEncoding3 } from \"three\";\nfunction prefixSubstrings(prefix, substrings, strings) {\n  for (const substring of substrings) {\n    const prefixed = \"$1\" + prefix + substring.charAt(0).toUpperCase() + substring.slice(1);\n    const regExp = new RegExp(\"([^\\\\.])(\\\\b\" + substring + \"\\\\b)\", \"g\");\n    for (const entry of strings.entries()) {\n      if (entry[1] !== null) {\n        strings.set(entry[0], entry[1].replace(regExp, prefixed));\n      }\n    }\n  }\n}\nfunction integrateEffect(prefix, effect, data) {\n  let fragmentShader = effect.getFragmentShader();\n  let vertexShader = effect.getVertexShader();\n  const mainImageExists = fragmentShader !== void 0 && /mainImage/.test(fragmentShader);\n  const mainUvExists = fragmentShader !== void 0 && /mainUv/.test(fragmentShader);\n  data.attributes |= effect.getAttributes();\n  if (fragmentShader === void 0) {\n    throw new Error(`Missing fragment shader (${effect.name})`);\n  } else if (mainUvExists && (data.attributes & EffectAttribute.CONVOLUTION) !== 0) {\n    throw new Error(`Effects that transform UVs are incompatible with convolution effects (${effect.name})`);\n  } else if (!mainImageExists && !mainUvExists) {\n    throw new Error(`Could not find mainImage or mainUv function (${effect.name})`);\n  } else {\n    const functionRegExp = /\\w+\\s+(\\w+)\\([\\w\\s,]*\\)\\s*{/g;\n    const shaderParts = data.shaderParts;\n    let fragmentHead = shaderParts.get(EffectShaderSection.FRAGMENT_HEAD) ?? \"\";\n    let fragmentMainUv = shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV) ?? \"\";\n    let fragmentMainImage = shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE) ?? \"\";\n    let vertexHead = shaderParts.get(EffectShaderSection.VERTEX_HEAD) ?? \"\";\n    let vertexMainSupport = shaderParts.get(EffectShaderSection.VERTEX_MAIN_SUPPORT) ?? \"\";\n    const varyings = /* @__PURE__ */ new Set();\n    const names = /* @__PURE__ */ new Set();\n    if (mainUvExists) {\n      fragmentMainUv += `\t${prefix}MainUv(UV);\n`;\n      data.uvTransformation = true;\n    }\n    if (vertexShader !== null && /mainSupport/.test(vertexShader)) {\n      const needsUv = /mainSupport *\\([\\w\\s]*?uv\\s*?\\)/.test(vertexShader);\n      vertexMainSupport += `\t${prefix}MainSupport(`;\n      vertexMainSupport += needsUv ? \"vUv);\\n\" : \");\\n\";\n      for (const m2 of vertexShader.matchAll(/(?:varying\\s+\\w+\\s+(\\w*))/g)) {\n        data.varyings.add(m2[1]);\n        varyings.add(m2[1]);\n        names.add(m2[1]);\n      }\n      for (const m2 of vertexShader.matchAll(functionRegExp)) {\n        names.add(m2[1]);\n      }\n    }\n    for (const m2 of fragmentShader.matchAll(functionRegExp)) {\n      names.add(m2[1]);\n    }\n    for (const d of effect.defines.keys()) {\n      names.add(d.replace(/\\([\\w\\s,]*\\)/g, \"\"));\n    }\n    for (const u of effect.uniforms.keys()) {\n      names.add(u);\n    }\n    names.delete(\"while\");\n    names.delete(\"for\");\n    names.delete(\"if\");\n    effect.uniforms.forEach((val, key) => data.uniforms.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), val));\n    effect.defines.forEach((val, key) => data.defines.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), val));\n    const shaders = /* @__PURE__ */ new Map([[\"fragment\", fragmentShader], [\"vertex\", vertexShader]]);\n    prefixSubstrings(prefix, names, data.defines);\n    prefixSubstrings(prefix, names, shaders);\n    fragmentShader = shaders.get(\"fragment\");\n    vertexShader = shaders.get(\"vertex\");\n    const blendMode = effect.blendMode;\n    data.blendModes.set(blendMode.blendFunction, blendMode);\n    if (mainImageExists) {\n      if (effect.inputColorSpace !== null && effect.inputColorSpace !== data.colorSpace) {\n        fragmentMainImage += effect.inputColorSpace === sRGBEncoding3 ? \"color0 = LinearTosRGB(color0);\\n\t\" : \"color0 = sRGBToLinear(color0);\\n\t\";\n      }\n      if (effect.outputColorSpace !== null) {\n        data.colorSpace = effect.outputColorSpace;\n      } else if (effect.inputColorSpace !== null) {\n        data.colorSpace = effect.inputColorSpace;\n      }\n      const depthParamRegExp = /MainImage *\\([\\w\\s,]*?depth[\\w\\s,]*?\\)/;\n      fragmentMainImage += `${prefix}MainImage(color0, UV, `;\n      if ((data.attributes & EffectAttribute.DEPTH) !== 0 && depthParamRegExp.test(fragmentShader)) {\n        fragmentMainImage += \"depth, \";\n        data.readDepth = true;\n      }\n      fragmentMainImage += \"color1);\\n\t\";\n      const blendOpacity = prefix + \"BlendOpacity\";\n      data.uniforms.set(blendOpacity, blendMode.opacity);\n      fragmentMainImage += `color0 = blend${blendMode.blendFunction}(color0, color1, ${blendOpacity});\n\n\t`;\n      fragmentHead += `uniform float ${blendOpacity};\n\n`;\n    }\n    fragmentHead += fragmentShader + \"\\n\";\n    if (vertexShader !== null) {\n      vertexHead += vertexShader + \"\\n\";\n    }\n    shaderParts.set(EffectShaderSection.FRAGMENT_HEAD, fragmentHead);\n    shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_UV, fragmentMainUv);\n    shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_IMAGE, fragmentMainImage);\n    shaderParts.set(EffectShaderSection.VERTEX_HEAD, vertexHead);\n    shaderParts.set(EffectShaderSection.VERTEX_MAIN_SUPPORT, vertexMainSupport);\n    if (effect.extensions !== null) {\n      for (const extension of effect.extensions) {\n        data.extensions.add(extension);\n      }\n    }\n  }\n}\nvar EffectPass = class extends Pass {\n  constructor(camera, ...effects) {\n    super(\"EffectPass\");\n    this.fullscreenMaterial = new EffectMaterial(null, null, null, camera);\n    this.listener = (event) => this.handleEvent(event);\n    this.effects = [];\n    this.setEffects(effects);\n    this.skipRendering = false;\n    this.minTime = 1;\n    this.maxTime = Number.POSITIVE_INFINITY;\n  }\n  get encodeOutput() {\n    return this.fullscreenMaterial.encodeOutput;\n  }\n  set encodeOutput(value) {\n    this.fullscreenMaterial.encodeOutput = value;\n  }\n  get dithering() {\n    return this.fullscreenMaterial.dithering;\n  }\n  set dithering(value) {\n    const material = this.fullscreenMaterial;\n    material.dithering = value;\n    material.needsUpdate = true;\n  }\n  setEffects(effects) {\n    for (const effect of this.effects) {\n      effect.removeEventListener(\"change\", this.listener);\n    }\n    this.effects = effects.sort((a, b) => b.attributes - a.attributes);\n    for (const effect of this.effects) {\n      effect.addEventListener(\"change\", this.listener);\n    }\n  }\n  updateMaterial() {\n    const data = new EffectShaderData();\n    let id = 0;\n    for (const effect of this.effects) {\n      if (effect.blendMode.blendFunction === BlendFunction.DST) {\n        data.attributes |= effect.getAttributes() & EffectAttribute.DEPTH;\n      } else if ((data.attributes & effect.getAttributes() & EffectAttribute.CONVOLUTION) !== 0) {\n        throw new Error(`Convolution effects cannot be merged (${effect.name})`);\n      } else {\n        integrateEffect(\"e\" + id++, effect, data);\n      }\n    }\n    let fragmentHead = data.shaderParts.get(EffectShaderSection.FRAGMENT_HEAD);\n    let fragmentMainImage = data.shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_IMAGE);\n    let fragmentMainUv = data.shaderParts.get(EffectShaderSection.FRAGMENT_MAIN_UV);\n    const blendRegExp = /\\bblend\\b/g;\n    for (const blendMode of data.blendModes.values()) {\n      fragmentHead += blendMode.getShaderCode().replace(blendRegExp, `blend${blendMode.blendFunction}`) + \"\\n\";\n    }\n    if ((data.attributes & EffectAttribute.DEPTH) !== 0) {\n      if (data.readDepth) {\n        fragmentMainImage = \"float depth = readDepth(UV);\\n\\n\t\" + fragmentMainImage;\n      }\n      this.needsDepthTexture = this.getDepthTexture() === null;\n    } else {\n      this.needsDepthTexture = false;\n    }\n    if (data.colorSpace === sRGBEncoding3) {\n      fragmentMainImage += \"color0 = sRGBToLinear(color0);\\n\t\";\n    }\n    if (data.uvTransformation) {\n      fragmentMainUv = \"vec2 transformedUv = vUv;\\n\" + fragmentMainUv;\n      data.defines.set(\"UV\", \"transformedUv\");\n    } else {\n      data.defines.set(\"UV\", \"vUv\");\n    }\n    data.shaderParts.set(EffectShaderSection.FRAGMENT_HEAD, fragmentHead);\n    data.shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_IMAGE, fragmentMainImage);\n    data.shaderParts.set(EffectShaderSection.FRAGMENT_MAIN_UV, fragmentMainUv);\n    data.shaderParts.forEach((value, key, map) => map.set(key, value?.trim().replace(/^#/, \"\\n#\")));\n    this.skipRendering = id === 0;\n    this.needsSwap = !this.skipRendering;\n    this.fullscreenMaterial.setShaderData(data);\n  }\n  recompile() {\n    this.updateMaterial();\n  }\n  getDepthTexture() {\n    return this.fullscreenMaterial.depthBuffer;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking11) {\n    this.fullscreenMaterial.depthBuffer = depthTexture;\n    this.fullscreenMaterial.depthPacking = depthPacking;\n    for (const effect of this.effects) {\n      effect.setDepthTexture(depthTexture, depthPacking);\n    }\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    for (const effect of this.effects) {\n      effect.update(renderer, inputBuffer, deltaTime);\n    }\n    if (!this.skipRendering || this.renderToScreen) {\n      const material = this.fullscreenMaterial;\n      material.inputBuffer = inputBuffer.texture;\n      material.time += deltaTime;\n      renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n      renderer.render(this.scene, this.camera);\n    }\n  }\n  setSize(width, height) {\n    this.fullscreenMaterial.setSize(width, height);\n    for (const effect of this.effects) {\n      effect.setSize(width, height);\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.renderer = renderer;\n    for (const effect of this.effects) {\n      effect.initialize(renderer, alpha, frameBufferType);\n    }\n    this.updateMaterial();\n    if (frameBufferType !== void 0 && frameBufferType !== UnsignedByteType5) {\n      this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n    }\n  }\n  dispose() {\n    super.dispose();\n    for (const effect of this.effects) {\n      effect.removeEventListener(\"change\", this.listener);\n      effect.dispose();\n    }\n  }\n  handleEvent(event) {\n    switch (event.type) {\n      case \"change\":\n        this.recompile();\n        break;\n    }\n  }\n};\n\n// src/passes/GaussianBlurPass.js\nimport { sRGBEncoding as sRGBEncoding4, UnsignedByteType as UnsignedByteType6, WebGLRenderTarget as WebGLRenderTarget6 } from \"three\";\nvar GaussianBlurPass = class extends Pass {\n  constructor({\n    kernelSize = 35,\n    iterations = 1,\n    resolutionScale = 1,\n    resolutionX = Resolution.AUTO_SIZE,\n    resolutionY = Resolution.AUTO_SIZE\n  } = {}) {\n    super(\"GaussianBlurPass\");\n    this.renderTargetA = new WebGLRenderTarget6(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"Blur.Target.A\";\n    this.renderTargetB = this.renderTargetA.clone();\n    this.renderTargetB.texture.name = \"Blur.Target.B\";\n    this.blurMaterial = new GaussianBlurMaterial({ kernelSize });\n    this.copyMaterial = new CopyMaterial();\n    this.copyMaterial.inputBuffer = this.renderTargetB.texture;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.iterations = iterations;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    const blurMaterial = this.blurMaterial;\n    this.fullscreenMaterial = blurMaterial;\n    let previousBuffer = inputBuffer;\n    for (let i = 0, l = Math.max(this.iterations, 1); i < l; ++i) {\n      blurMaterial.direction.set(1, 0);\n      blurMaterial.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(renderTargetA);\n      renderer.render(scene, camera);\n      blurMaterial.direction.set(0, 1);\n      blurMaterial.inputBuffer = renderTargetA.texture;\n      renderer.setRenderTarget(renderTargetB);\n      renderer.render(scene, camera);\n      previousBuffer = renderTargetB;\n    }\n    this.fullscreenMaterial = this.copyMaterial;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.blurMaterial.setSize(w, h);\n    this.blurMaterial.resolutionScale = resolution.scale;\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType6) {\n        this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding4) {\n        this.renderTargetA.texture.encoding = sRGBEncoding4;\n        this.renderTargetB.texture.encoding = sRGBEncoding4;\n      }\n    }\n  }\n};\n\n// src/passes/KawaseBlurPass.js\nimport { sRGBEncoding as sRGBEncoding5, UnsignedByteType as UnsignedByteType7, WebGLRenderTarget as WebGLRenderTarget7 } from \"three\";\nvar KawaseBlurPass = class extends Pass {\n  constructor({\n    kernelSize = KernelSize.MEDIUM,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"KawaseBlurPass\");\n    this.renderTargetA = new WebGLRenderTarget7(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"Blur.Target.A\";\n    this.renderTargetB = this.renderTargetA.clone();\n    this.renderTargetB.texture.name = \"Blur.Target.B\";\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.blurMaterial = new KawaseBlurMaterial();\n    this.copyMaterial = new CopyMaterial();\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get dithering() {\n    return this.copyMaterial.dithering;\n  }\n  set dithering(value) {\n    this.copyMaterial.dithering = value;\n  }\n  get kernelSize() {\n    return this.blurMaterial.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurMaterial.kernelSize = value;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get scale() {\n    return this.blurMaterial.scale;\n  }\n  set scale(value) {\n    this.blurMaterial.scale = value;\n  }\n  getScale() {\n    return this.blurMaterial.scale;\n  }\n  setScale(value) {\n    this.blurMaterial.scale = value;\n  }\n  getKernelSize() {\n    return this.kernelSize;\n  }\n  setKernelSize(value) {\n    this.kernelSize = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetB = this.renderTargetB;\n    const material = this.blurMaterial;\n    const kernelSequence = material.kernelSequence;\n    let previousBuffer = inputBuffer;\n    this.fullscreenMaterial = material;\n    for (let i = 0, l = kernelSequence.length; i < l; ++i) {\n      const buffer = (i & 1) === 0 ? renderTargetA : renderTargetB;\n      material.kernel = kernelSequence[i];\n      material.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(buffer);\n      renderer.render(scene, camera);\n      previousBuffer = buffer;\n    }\n    this.fullscreenMaterial = this.copyMaterial;\n    this.copyMaterial.inputBuffer = previousBuffer.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(scene, camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.blurMaterial.setSize(w, h);\n    this.blurMaterial.resolutionScale = resolution.scale;\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      if (frameBufferType !== UnsignedByteType7) {\n        this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding5) {\n        this.renderTargetA.texture.encoding = sRGBEncoding5;\n        this.renderTargetB.texture.encoding = sRGBEncoding5;\n      }\n    }\n  }\n  static get AUTO_SIZE() {\n    return Resolution.AUTO_SIZE;\n  }\n};\n\n// src/passes/LambdaPass.js\nvar LambdaPass = class extends Pass {\n  constructor(f) {\n    super(\"LambdaPass\", null, null);\n    this.needsSwap = false;\n    this.f = f;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    this.f();\n  }\n};\n\n// src/passes/LuminancePass.js\nimport { UnsignedByteType as UnsignedByteType8, WebGLRenderTarget as WebGLRenderTarget8 } from \"three\";\nvar LuminancePass = class extends Pass {\n  constructor({\n    renderTarget,\n    luminanceRange,\n    colorOutput,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"LuminancePass\");\n    this.fullscreenMaterial = new LuminanceMaterial(colorOutput, luminanceRange);\n    this.needsSwap = false;\n    this.renderTarget = renderTarget;\n    if (this.renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget8(1, 1, { depthBuffer: false });\n      this.renderTarget.texture.name = \"LuminancePass.Target\";\n    }\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const material = this.fullscreenMaterial;\n    material.inputBuffer = inputBuffer.texture;\n    renderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\n    renderer.render(this.scene, this.camera);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0 && frameBufferType !== UnsignedByteType8) {\n      this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n    }\n  }\n};\n\n// src/passes/MaskPass.js\nvar MaskPass = class extends Pass {\n  constructor(scene, camera) {\n    super(\"MaskPass\", scene, camera);\n    this.needsSwap = false;\n    this.clearPass = new ClearPass(false, false, true);\n    this.inverse = false;\n  }\n  get inverted() {\n    return this.inverse;\n  }\n  set inverted(value) {\n    this.inverse = value;\n  }\n  get clear() {\n    return this.clearPass.enabled;\n  }\n  set clear(value) {\n    this.clearPass.enabled = value;\n  }\n  getClearPass() {\n    return this.clearPass;\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const context = renderer.getContext();\n    const buffers = renderer.state.buffers;\n    const scene = this.scene;\n    const camera = this.camera;\n    const clearPass = this.clearPass;\n    const writeValue = this.inverted ? 0 : 1;\n    const clearValue = 1 - writeValue;\n    buffers.color.setMask(false);\n    buffers.depth.setMask(false);\n    buffers.color.setLocked(true);\n    buffers.depth.setLocked(true);\n    buffers.stencil.setTest(true);\n    buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n    buffers.stencil.setFunc(context.ALWAYS, writeValue, 4294967295);\n    buffers.stencil.setClear(clearValue);\n    buffers.stencil.setLocked(true);\n    if (this.clearPass.enabled) {\n      if (this.renderToScreen) {\n        clearPass.render(renderer, null);\n      } else {\n        clearPass.render(renderer, inputBuffer);\n        clearPass.render(renderer, outputBuffer);\n      }\n    }\n    if (this.renderToScreen) {\n      renderer.setRenderTarget(null);\n      renderer.render(scene, camera);\n    } else {\n      renderer.setRenderTarget(inputBuffer);\n      renderer.render(scene, camera);\n      renderer.setRenderTarget(outputBuffer);\n      renderer.render(scene, camera);\n    }\n    buffers.color.setLocked(false);\n    buffers.depth.setLocked(false);\n    buffers.stencil.setLocked(false);\n    buffers.stencil.setFunc(context.EQUAL, 1, 4294967295);\n    buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    buffers.stencil.setLocked(true);\n  }\n};\n\n// src/passes/MipmapBlurPass.js\nimport { sRGBEncoding as sRGBEncoding6, UnsignedByteType as UnsignedByteType9, Vector2 as Vector215, WebGLRenderTarget as WebGLRenderTarget9 } from \"three\";\nvar MipmapBlurPass = class extends Pass {\n  constructor() {\n    super(\"MipmapBlurPass\");\n    this.needsSwap = false;\n    this.renderTarget = new WebGLRenderTarget9(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"Upsampling.Mipmap0\";\n    this.downsamplingMipmaps = [];\n    this.upsamplingMipmaps = [];\n    this.downsamplingMaterial = new DownsamplingMaterial();\n    this.upsamplingMaterial = new UpsamplingMaterial();\n    this.resolution = new Vector215();\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  get levels() {\n    return this.downsamplingMipmaps.length;\n  }\n  set levels(value) {\n    if (this.levels !== value) {\n      const renderTarget = this.renderTarget;\n      this.dispose();\n      for (let i = 0; i < value; ++i) {\n        const mipmap = renderTarget.clone();\n        mipmap.texture.name = \"Downsampling.Mipmap\" + i;\n        this.downsamplingMipmaps.push(mipmap);\n      }\n      this.upsamplingMipmaps.push(renderTarget);\n      for (let i = 1, l = value - 1; i < l; ++i) {\n        const mipmap = renderTarget.clone();\n        mipmap.texture.name = \"Upsampling.Mipmap\" + i;\n        this.upsamplingMipmaps.push(mipmap);\n      }\n      this.setSize(this.resolution.x, this.resolution.y);\n    }\n  }\n  get radius() {\n    return this.upsamplingMaterial.radius;\n  }\n  set radius(value) {\n    this.upsamplingMaterial.radius = value;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const { scene, camera } = this;\n    const { downsamplingMaterial, upsamplingMaterial } = this;\n    const { downsamplingMipmaps, upsamplingMipmaps } = this;\n    let previousBuffer = inputBuffer;\n    this.fullscreenMaterial = downsamplingMaterial;\n    for (let i = 0, l = downsamplingMipmaps.length; i < l; ++i) {\n      const mipmap = downsamplingMipmaps[i];\n      downsamplingMaterial.setSize(previousBuffer.width, previousBuffer.height);\n      downsamplingMaterial.inputBuffer = previousBuffer.texture;\n      renderer.setRenderTarget(mipmap);\n      renderer.render(scene, camera);\n      previousBuffer = mipmap;\n    }\n    this.fullscreenMaterial = upsamplingMaterial;\n    for (let i = upsamplingMipmaps.length - 1; i >= 0; --i) {\n      const mipmap = upsamplingMipmaps[i];\n      upsamplingMaterial.setSize(previousBuffer.width, previousBuffer.height);\n      upsamplingMaterial.inputBuffer = previousBuffer.texture;\n      upsamplingMaterial.supportBuffer = downsamplingMipmaps[i].texture;\n      renderer.setRenderTarget(mipmap);\n      renderer.render(scene, camera);\n      previousBuffer = mipmap;\n    }\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.set(width, height);\n    let w = resolution.width, h = resolution.height;\n    for (let i = 0, l = this.downsamplingMipmaps.length; i < l; ++i) {\n      w = Math.round(w * 0.5);\n      h = Math.round(h * 0.5);\n      this.downsamplingMipmaps[i].setSize(w, h);\n      if (i < this.upsamplingMipmaps.length) {\n        this.upsamplingMipmaps[i].setSize(w, h);\n      }\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0) {\n      const mipmaps = this.downsamplingMipmaps.concat(this.upsamplingMipmaps);\n      for (const mipmap of mipmaps) {\n        mipmap.texture.type = frameBufferType;\n      }\n      if (frameBufferType !== UnsignedByteType9) {\n        this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n        this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n      } else if (renderer.outputEncoding === sRGBEncoding6) {\n        for (const mipmap of mipmaps) {\n          mipmap.texture.encoding = sRGBEncoding6;\n        }\n      }\n    }\n  }\n  dispose() {\n    super.dispose();\n    for (const mipmap of this.downsamplingMipmaps.concat(this.upsamplingMipmaps)) {\n      mipmap.dispose();\n    }\n    this.downsamplingMipmaps = [];\n    this.upsamplingMipmaps = [];\n  }\n};\n\n// src/passes/NormalPass.js\nimport { Color as Color3, MeshNormalMaterial, NearestFilter as NearestFilter5, WebGLRenderTarget as WebGLRenderTarget10 } from \"three\";\nvar NormalPass = class extends Pass {\n  constructor(scene, camera, {\n    renderTarget,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"NormalPass\");\n    this.needsSwap = false;\n    this.renderPass = new RenderPass(scene, camera, new MeshNormalMaterial());\n    const renderPass = this.renderPass;\n    renderPass.setBackgroundDisabled(true);\n    renderPass.setShadowMapDisabled(true);\n    const clearPass = renderPass.getClearPass();\n    clearPass.setOverrideClearColor(new Color3(7829503));\n    clearPass.setOverrideClearAlpha(1);\n    this.renderTarget = renderTarget;\n    if (this.renderTarget === void 0) {\n      this.renderTarget = new WebGLRenderTarget10(1, 1, {\n        minFilter: NearestFilter5,\n        magFilter: NearestFilter5\n      });\n      this.renderTarget.texture.name = \"NormalPass.Target\";\n    }\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.renderTarget.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const renderTarget = this.renderToScreen ? null : this.renderTarget;\n    this.renderPass.render(renderer, renderTarget, renderTarget);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n  }\n};\n\n// src/passes/ShaderPass.js\nimport { UnsignedByteType as UnsignedByteType10 } from \"three\";\nvar ShaderPass = class extends Pass {\n  constructor(material, input = \"inputBuffer\") {\n    super(\"ShaderPass\");\n    this.fullscreenMaterial = material;\n    this.input = input;\n  }\n  setInput(input) {\n  }\n  render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\n    const uniforms = this.fullscreenMaterial.uniforms;\n    if (inputBuffer !== null && uniforms !== void 0 && uniforms[this.input] !== void 0) {\n      uniforms[this.input].value = inputBuffer.texture;\n    }\n    renderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\n    renderer.render(this.scene, this.camera);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    if (frameBufferType !== void 0 && frameBufferType !== UnsignedByteType10) {\n      this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH = \"1\";\n    }\n  }\n};\n\n// src/core/Timer.js\nvar MILLISECONDS_TO_SECONDS = 1 / 1e3;\nvar SECONDS_TO_MILLISECONDS = 1e3;\nvar Timer = class {\n  constructor() {\n    this.previousTime = 0;\n    this.currentTime = 0;\n    this.delta = 0;\n    this.fixedDelta = 1e3 / 60;\n    this.elapsed = 0;\n    this.timescale = 1;\n    this.fixedDeltaEnabled = false;\n    this.autoReset = false;\n  }\n  setFixedDeltaEnabled(enabled) {\n    this.fixedDeltaEnabled = enabled;\n    return this;\n  }\n  isAutoResetEnabled(enabled) {\n    return this.autoReset;\n  }\n  setAutoResetEnabled(enabled) {\n    if (typeof document !== \"undefined\" && document.hidden !== void 0) {\n      if (enabled) {\n        document.addEventListener(\"visibilitychange\", this);\n      } else {\n        document.removeEventListener(\"visibilitychange\", this);\n      }\n      this.autoReset = enabled;\n    }\n    return this;\n  }\n  getDelta() {\n    return this.delta * MILLISECONDS_TO_SECONDS;\n  }\n  getFixedDelta() {\n    return this.fixedDelta * MILLISECONDS_TO_SECONDS;\n  }\n  setFixedDelta(fixedDelta) {\n    this.fixedDelta = fixedDelta * SECONDS_TO_MILLISECONDS;\n    return this;\n  }\n  getElapsed() {\n    return this.elapsed * MILLISECONDS_TO_SECONDS;\n  }\n  getTimescale() {\n    return this.timescale;\n  }\n  setTimescale(timescale) {\n    this.timescale = timescale;\n    return this;\n  }\n  update(timestamp) {\n    if (this.fixedDeltaEnabled) {\n      this.delta = this.fixedDelta;\n    } else {\n      this.previousTime = this.currentTime;\n      this.currentTime = timestamp !== void 0 ? timestamp : performance.now();\n      this.delta = this.currentTime - this.previousTime;\n    }\n    this.delta *= this.timescale;\n    this.elapsed += this.delta;\n    return this;\n  }\n  reset() {\n    this.delta = 0;\n    this.elapsed = 0;\n    this.currentTime = performance.now();\n    return this;\n  }\n  handleEvent(event) {\n    if (!document.hidden) {\n      this.currentTime = performance.now();\n    }\n  }\n  dispose() {\n    this.setAutoResetEnabled(false);\n  }\n};\n\n// src/core/EffectComposer.js\nvar EffectComposer = class {\n  constructor(renderer = null, {\n    depthBuffer = true,\n    stencilBuffer = false,\n    multisampling = 0,\n    frameBufferType\n  } = {}) {\n    this.renderer = null;\n    this.inputBuffer = this.createBuffer(depthBuffer, stencilBuffer, frameBufferType, multisampling);\n    this.outputBuffer = this.inputBuffer.clone();\n    this.copyPass = new CopyPass();\n    this.depthTexture = null;\n    this.passes = [];\n    this.timer = new Timer();\n    this.autoRenderToScreen = true;\n    this.setRenderer(renderer);\n  }\n  get multisampling() {\n    return this.inputBuffer.samples || 0;\n  }\n  set multisampling(value) {\n    const buffer = this.inputBuffer;\n    const multisampling = this.multisampling;\n    if (multisampling > 0 && value > 0) {\n      this.inputBuffer.samples = value;\n      this.outputBuffer.samples = value;\n      this.inputBuffer.dispose();\n      this.outputBuffer.dispose();\n    } else if (multisampling !== value) {\n      this.inputBuffer.dispose();\n      this.outputBuffer.dispose();\n      this.inputBuffer = this.createBuffer(buffer.depthBuffer, buffer.stencilBuffer, buffer.texture.type, value);\n      this.inputBuffer.depthTexture = this.depthTexture;\n      this.outputBuffer = this.inputBuffer.clone();\n    }\n  }\n  getTimer() {\n    return this.timer;\n  }\n  getRenderer() {\n    return this.renderer;\n  }\n  setRenderer(renderer) {\n    this.renderer = renderer;\n    if (renderer !== null) {\n      const size = renderer.getSize(new Vector216());\n      const alpha = renderer.getContext().getContextAttributes().alpha;\n      const frameBufferType = this.inputBuffer.texture.type;\n      if (frameBufferType === UnsignedByteType11 && renderer.outputEncoding === sRGBEncoding7) {\n        this.inputBuffer.texture.encoding = sRGBEncoding7;\n        this.outputBuffer.texture.encoding = sRGBEncoding7;\n        this.inputBuffer.dispose();\n        this.outputBuffer.dispose();\n      }\n      renderer.autoClear = false;\n      this.setSize(size.width, size.height);\n      for (const pass of this.passes) {\n        pass.initialize(renderer, alpha, frameBufferType);\n      }\n    }\n  }\n  replaceRenderer(renderer, updateDOM = true) {\n    const oldRenderer = this.renderer;\n    const parent = oldRenderer.domElement.parentNode;\n    this.setRenderer(renderer);\n    if (updateDOM && parent !== null) {\n      parent.removeChild(oldRenderer.domElement);\n      parent.appendChild(renderer.domElement);\n    }\n    return oldRenderer;\n  }\n  createDepthTexture() {\n    const depthTexture = this.depthTexture = new DepthTexture();\n    this.inputBuffer.depthTexture = depthTexture;\n    this.inputBuffer.dispose();\n    if (this.inputBuffer.stencilBuffer) {\n      depthTexture.format = DepthStencilFormat;\n      depthTexture.type = UnsignedInt248Type;\n    } else {\n      depthTexture.type = UnsignedIntType;\n    }\n    return depthTexture;\n  }\n  deleteDepthTexture() {\n    if (this.depthTexture !== null) {\n      this.depthTexture.dispose();\n      this.depthTexture = null;\n      this.inputBuffer.depthTexture = null;\n      this.inputBuffer.dispose();\n      for (const pass of this.passes) {\n        pass.setDepthTexture(null);\n      }\n    }\n  }\n  createBuffer(depthBuffer, stencilBuffer, type, multisampling) {\n    const renderer = this.renderer;\n    const size = renderer === null ? new Vector216() : renderer.getDrawingBufferSize(new Vector216());\n    const options = {\n      minFilter: LinearFilter2,\n      magFilter: LinearFilter2,\n      stencilBuffer,\n      depthBuffer,\n      type\n    };\n    let renderTarget;\n    if (multisampling > 0) {\n      renderTarget = Number(REVISION3.replace(/\\D+/g, \"\")) < 138 ? new WebGLMultisampleRenderTarget(size.width, size.height, options) : new WebGLRenderTarget11(size.width, size.height, options);\n      renderTarget.ignoreDepthForMultisampleCopy = false;\n      renderTarget.samples = multisampling;\n    } else {\n      renderTarget = new WebGLRenderTarget11(size.width, size.height, options);\n    }\n    if (type === UnsignedByteType11 && renderer !== null && renderer.outputEncoding === sRGBEncoding7) {\n      renderTarget.texture.encoding = sRGBEncoding7;\n    }\n    renderTarget.texture.name = \"EffectComposer.Buffer\";\n    renderTarget.texture.generateMipmaps = false;\n    return renderTarget;\n  }\n  addPass(pass, index) {\n    const passes = this.passes;\n    const renderer = this.renderer;\n    const drawingBufferSize = renderer.getDrawingBufferSize(new Vector216());\n    const alpha = renderer.getContext().getContextAttributes().alpha;\n    const frameBufferType = this.inputBuffer.texture.type;\n    pass.setRenderer(renderer);\n    pass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    pass.initialize(renderer, alpha, frameBufferType);\n    if (this.autoRenderToScreen) {\n      if (passes.length > 0) {\n        passes[passes.length - 1].renderToScreen = false;\n      }\n      if (pass.renderToScreen) {\n        this.autoRenderToScreen = false;\n      }\n    }\n    if (index !== void 0) {\n      passes.splice(index, 0, pass);\n    } else {\n      passes.push(pass);\n    }\n    if (this.autoRenderToScreen) {\n      passes[passes.length - 1].renderToScreen = true;\n    }\n    if (pass.needsDepthTexture || this.depthTexture !== null) {\n      if (this.depthTexture === null) {\n        const depthTexture = this.createDepthTexture();\n        for (pass of passes) {\n          pass.setDepthTexture(depthTexture);\n        }\n      } else {\n        pass.setDepthTexture(this.depthTexture);\n      }\n    }\n  }\n  removePass(pass) {\n    const passes = this.passes;\n    const index = passes.indexOf(pass);\n    const exists = index !== -1;\n    const removed = exists && passes.splice(index, 1).length > 0;\n    if (removed) {\n      if (this.depthTexture !== null) {\n        const reducer = (a, b) => a || b.needsDepthTexture;\n        const depthTextureRequired = passes.reduce(reducer, false);\n        if (!depthTextureRequired) {\n          if (pass.getDepthTexture() === this.depthTexture) {\n            pass.setDepthTexture(null);\n          }\n          this.deleteDepthTexture();\n        }\n      }\n      if (this.autoRenderToScreen) {\n        if (index === passes.length) {\n          pass.renderToScreen = false;\n          if (passes.length > 0) {\n            passes[passes.length - 1].renderToScreen = true;\n          }\n        }\n      }\n    }\n  }\n  removeAllPasses() {\n    const passes = this.passes;\n    this.deleteDepthTexture();\n    if (passes.length > 0) {\n      if (this.autoRenderToScreen) {\n        passes[passes.length - 1].renderToScreen = false;\n      }\n      this.passes = [];\n    }\n  }\n  render(deltaTime) {\n    const renderer = this.renderer;\n    const copyPass = this.copyPass;\n    let inputBuffer = this.inputBuffer;\n    let outputBuffer = this.outputBuffer;\n    let stencilTest = false;\n    let context, stencil, buffer;\n    if (deltaTime === void 0) {\n      deltaTime = this.timer.update().getDelta();\n    }\n    for (const pass of this.passes) {\n      if (pass.enabled) {\n        pass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\n        if (pass.needsSwap) {\n          if (stencilTest) {\n            copyPass.renderToScreen = pass.renderToScreen;\n            context = renderer.getContext();\n            stencil = renderer.state.buffers.stencil;\n            stencil.setFunc(context.NOTEQUAL, 1, 4294967295);\n            copyPass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\n            stencil.setFunc(context.EQUAL, 1, 4294967295);\n          }\n          buffer = inputBuffer;\n          inputBuffer = outputBuffer;\n          outputBuffer = buffer;\n        }\n        if (pass instanceof MaskPass) {\n          stencilTest = true;\n        } else if (pass instanceof ClearMaskPass) {\n          stencilTest = false;\n        }\n      }\n    }\n  }\n  setSize(width, height, updateStyle) {\n    const renderer = this.renderer;\n    if (width === void 0 || height === void 0) {\n      const size = renderer.getSize(new Vector216());\n      width = size.width;\n      height = size.height;\n    }\n    renderer.setSize(width, height, updateStyle);\n    const drawingBufferSize = renderer.getDrawingBufferSize(new Vector216());\n    this.inputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    this.outputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    for (const pass of this.passes) {\n      pass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n    }\n  }\n  reset() {\n    const autoReset = this.timer.isAutoResetEnabled();\n    this.dispose();\n    this.autoRenderToScreen = true;\n    this.timer.setAutoResetEnabled(autoReset);\n  }\n  dispose() {\n    for (const pass of this.passes) {\n      pass.dispose();\n    }\n    this.passes = [];\n    if (this.inputBuffer !== null) {\n      this.inputBuffer.dispose();\n    }\n    if (this.outputBuffer !== null) {\n      this.outputBuffer.dispose();\n    }\n    this.deleteDepthTexture();\n    this.copyPass.dispose();\n    this.timer.dispose();\n  }\n};\n\n// src/core/EffectShaderData.js\nimport { LinearEncoding as LinearEncoding2 } from \"three\";\nvar EffectShaderData = class {\n  constructor() {\n    this.shaderParts = /* @__PURE__ */ new Map([\n      [EffectShaderSection.FRAGMENT_HEAD, null],\n      [EffectShaderSection.FRAGMENT_MAIN_UV, null],\n      [EffectShaderSection.FRAGMENT_MAIN_IMAGE, null],\n      [EffectShaderSection.VERTEX_HEAD, null],\n      [EffectShaderSection.VERTEX_MAIN_SUPPORT, null]\n    ]);\n    this.defines = /* @__PURE__ */ new Map();\n    this.uniforms = /* @__PURE__ */ new Map();\n    this.blendModes = /* @__PURE__ */ new Map();\n    this.extensions = /* @__PURE__ */ new Set();\n    this.attributes = EffectAttribute.NONE;\n    this.varyings = /* @__PURE__ */ new Set();\n    this.uvTransformation = false;\n    this.readDepth = false;\n    this.colorSpace = LinearEncoding2;\n  }\n};\n\n// src/core/GaussKernel.js\nfunction getCoefficients(n) {\n  let result;\n  if (n === 0) {\n    result = new Float64Array(0);\n  } else if (n === 1) {\n    result = new Float64Array([1]);\n  } else if (n > 1) {\n    let row0 = new Float64Array(n);\n    let row1 = new Float64Array(n);\n    for (let y = 1; y <= n; ++y) {\n      for (let x = 0; x < y; ++x) {\n        row1[x] = x === 0 || x === y - 1 ? 1 : row0[x - 1] + row0[x];\n      }\n      result = row1;\n      row1 = row0;\n      row0 = result;\n    }\n  }\n  return result;\n}\nvar GaussKernel = class {\n  constructor(kernelSize, edgeBias = 2) {\n    this.weights = null;\n    this.offsets = null;\n    this.linearWeights = null;\n    this.linearOffsets = null;\n    this.generate(kernelSize, edgeBias);\n  }\n  get steps() {\n    return this.offsets === null ? 0 : this.offsets.length;\n  }\n  get linearSteps() {\n    return this.linearOffsets === null ? 0 : this.linearOffsets.length;\n  }\n  generate(kernelSize, edgeBias) {\n    if (kernelSize < 3 || kernelSize > 1020) {\n      throw new Error(\"The kernel size must be in the range [3, 1020]\");\n    }\n    const n = kernelSize + edgeBias * 2;\n    const coefficients = edgeBias > 0 ? getCoefficients(n).slice(edgeBias, -edgeBias) : getCoefficients(n);\n    const mid = Math.floor((coefficients.length - 1) / 2);\n    const sum = coefficients.reduce((a, b) => a + b, 0);\n    const weights = coefficients.slice(mid);\n    const offsets = [...Array(mid + 1).keys()];\n    const linearWeights = new Float64Array(Math.floor(offsets.length / 2));\n    const linearOffsets = new Float64Array(linearWeights.length);\n    linearWeights[0] = weights[0] / sum;\n    for (let i = 1, j = 1, l = offsets.length - 1; i < l; i += 2, ++j) {\n      const offset0 = offsets[i], offset1 = offsets[i + 1];\n      const weight0 = weights[i], weight1 = weights[i + 1];\n      const w = weight0 + weight1;\n      const o = (offset0 * weight0 + offset1 * weight1) / w;\n      linearWeights[j] = w / sum;\n      linearOffsets[j] = o;\n    }\n    for (let i = 0, l = weights.length, s = 1 / sum; i < l; ++i) {\n      weights[i] *= s;\n    }\n    const linearWeightSum = (linearWeights.reduce((a, b) => a + b, 0) - linearWeights[0] * 0.5) * 2;\n    if (linearWeightSum !== 0) {\n      for (let i = 0, l = linearWeights.length, s = 1 / linearWeightSum; i < l; ++i) {\n        linearWeights[i] *= s;\n      }\n    }\n    this.offsets = offsets;\n    this.weights = weights;\n    this.linearOffsets = linearOffsets;\n    this.linearWeights = linearWeights;\n  }\n};\n\n// src/core/Initializable.js\nvar Initializable = class {\n  initialize(renderer, alpha, frameBufferType) {\n  }\n};\n\n// src/core/Resizable.js\nvar Resizable = class {\n  setSize(width, height) {\n  }\n};\n\n// src/core/Selection.js\nvar Selection = class extends Set {\n  constructor(iterable, layer = 10) {\n    super();\n    this.l = layer;\n    this.exclusive = false;\n    if (iterable !== void 0) {\n      this.set(iterable);\n    }\n  }\n  get layer() {\n    return this.l;\n  }\n  set layer(value) {\n    const currentLayer = this.l;\n    for (const object of this) {\n      object.layers.disable(currentLayer);\n      object.layers.enable(value);\n    }\n    this.l = value;\n  }\n  getLayer() {\n    return this.layer;\n  }\n  setLayer(value) {\n    this.layer = value;\n  }\n  isExclusive() {\n    return this.exclusive;\n  }\n  setExclusive(value) {\n    this.exclusive = value;\n  }\n  clear() {\n    const layer = this.layer;\n    for (const object of this) {\n      object.layers.disable(layer);\n    }\n    return super.clear();\n  }\n  set(objects) {\n    this.clear();\n    for (const object of objects) {\n      this.add(object);\n    }\n    return this;\n  }\n  indexOf(object) {\n    return this.has(object) ? 0 : -1;\n  }\n  add(object) {\n    if (this.exclusive) {\n      object.layers.set(this.layer);\n    } else {\n      object.layers.enable(this.layer);\n    }\n    return super.add(object);\n  }\n  delete(object) {\n    if (this.has(object)) {\n      object.layers.disable(this.layer);\n    }\n    return super.delete(object);\n  }\n  toggle(object) {\n    let result;\n    if (this.has(object)) {\n      this.delete(object);\n      result = false;\n    } else {\n      this.add(object);\n      result = true;\n    }\n    return result;\n  }\n  setVisible(visible) {\n    for (const object of this) {\n      if (visible) {\n        object.layers.enable(0);\n      } else {\n        object.layers.disable(0);\n      }\n    }\n    return this;\n  }\n};\n\n// src/effects/blending/BlendMode.js\nimport { EventDispatcher as EventDispatcher2, Uniform as Uniform21 } from \"three\";\n\n// src/effects/blending/glsl/add.frag\nvar add_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}\";\n\n// src/effects/blending/glsl/alpha.frag\nvar alpha_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}\";\n\n// src/effects/blending/glsl/average.frag\nvar average_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}\";\n\n// src/effects/blending/glsl/color.frag\nvar color_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/color-burn.frag\nvar color_burn_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/color-dodge.frag\nvar color_dodge_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/darken.frag\nvar darken_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}\";\n\n// src/effects/blending/glsl/difference.frag\nvar difference_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}\";\n\n// src/effects/blending/glsl/divide.frag\nvar divide_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}\";\n\n// src/effects/blending/glsl/exclusion.frag\nvar exclusion_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}\";\n\n// src/effects/blending/glsl/hard-light.frag\nvar hard_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*x*y,1.0-2.0*(1.0-x)*(1.0-y),step(0.5,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/hard-mix.frag\nvar hard_mix_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}\";\n\n// src/effects/blending/glsl/hue.frag\nvar hue_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/invert.frag\nvar invert_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}\";\n\n// src/effects/blending/glsl/invert-rgb.frag\nvar invert_rgb_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}\";\n\n// src/effects/blending/glsl/lighten.frag\nvar lighten_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}\";\n\n// src/effects/blending/glsl/linear-burn.frag\nvar linear_burn_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}\";\n\n// src/effects/blending/glsl/linear-dodge.frag\nvar linear_dodge_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}\";\n\n// src/effects/blending/glsl/linear-light.frag\nvar linear_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}\";\n\n// src/effects/blending/glsl/luminosity.frag\nvar luminosity_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/multiply.frag\nvar multiply_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}\";\n\n// src/effects/blending/glsl/negation.frag\nvar negation_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}\";\n\n// src/effects/blending/glsl/normal.frag\nvar normal_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}\";\n\n// src/effects/blending/glsl/overlay.frag\nvar overlay_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/pin-light.frag\nvar pin_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/reflect.frag\nvar reflect_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y)),opacity);}\";\n\n// src/effects/blending/glsl/saturation.frag\nvar saturation_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}\";\n\n// src/effects/blending/glsl/screen.frag\nvar screen_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-x*y,opacity);}\";\n\n// src/effects/blending/glsl/soft-light.frag\nvar soft_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}\";\n\n// src/effects/blending/glsl/src.frag\nvar src_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}\";\n\n// src/effects/blending/glsl/subtract.frag\nvar subtract_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}\";\n\n// src/effects/blending/glsl/vivid-light.frag\nvar vivid_light_default = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(vec4(0.0),1.0-min(vec4(1.0),(1.0-x)/(2.0*y))),min(vec4(1.0),x/(2.0*(1.0-y))),step(0.5,y));return mix(x,z,opacity);}\";\n\n// src/effects/blending/BlendMode.js\nvar blendFunctions = /* @__PURE__ */ new Map([\n  [BlendFunction.ADD, add_default],\n  [BlendFunction.ALPHA, alpha_default],\n  [BlendFunction.AVERAGE, average_default],\n  [BlendFunction.COLOR, color_default],\n  [BlendFunction.COLOR_BURN, color_burn_default],\n  [BlendFunction.COLOR_DODGE, color_dodge_default],\n  [BlendFunction.DARKEN, darken_default],\n  [BlendFunction.DIFFERENCE, difference_default],\n  [BlendFunction.DIVIDE, divide_default],\n  [BlendFunction.DST, null],\n  [BlendFunction.EXCLUSION, exclusion_default],\n  [BlendFunction.HARD_LIGHT, hard_light_default],\n  [BlendFunction.HARD_MIX, hard_mix_default],\n  [BlendFunction.HUE, hue_default],\n  [BlendFunction.INVERT, invert_default],\n  [BlendFunction.INVERT_RGB, invert_rgb_default],\n  [BlendFunction.LIGHTEN, lighten_default],\n  [BlendFunction.LINEAR_BURN, linear_burn_default],\n  [BlendFunction.LINEAR_DODGE, linear_dodge_default],\n  [BlendFunction.LINEAR_LIGHT, linear_light_default],\n  [BlendFunction.LUMINOSITY, luminosity_default],\n  [BlendFunction.MULTIPLY, multiply_default],\n  [BlendFunction.NEGATION, negation_default],\n  [BlendFunction.NORMAL, normal_default],\n  [BlendFunction.OVERLAY, overlay_default],\n  [BlendFunction.PIN_LIGHT, pin_light_default],\n  [BlendFunction.REFLECT, reflect_default],\n  [BlendFunction.SATURATION, saturation_default],\n  [BlendFunction.SCREEN, screen_default],\n  [BlendFunction.SOFT_LIGHT, soft_light_default],\n  [BlendFunction.SRC, src_default],\n  [BlendFunction.SUBTRACT, subtract_default],\n  [BlendFunction.VIVID_LIGHT, vivid_light_default]\n]);\nvar BlendMode = class extends EventDispatcher2 {\n  constructor(blendFunction, opacity = 1) {\n    super();\n    this._blendFunction = blendFunction;\n    this.opacity = new Uniform21(opacity);\n  }\n  getOpacity() {\n    return this.opacity.value;\n  }\n  setOpacity(value) {\n    this.opacity.value = value;\n  }\n  get blendFunction() {\n    return this._blendFunction;\n  }\n  set blendFunction(value) {\n    this._blendFunction = value;\n    this.dispatchEvent({ type: \"change\" });\n  }\n  getBlendFunction() {\n    return this.blendFunction;\n  }\n  setBlendFunction(value) {\n    this.blendFunction = value;\n  }\n  getShaderCode() {\n    return blendFunctions.get(this.blendFunction);\n  }\n};\n\n// src/effects/BloomEffect.js\nimport { sRGBEncoding as sRGBEncoding8, Uniform as Uniform22, WebGLRenderTarget as WebGLRenderTarget12 } from \"three\";\n\n// src/effects/Effect.js\nimport { BasicDepthPacking as BasicDepthPacking12, EventDispatcher as EventDispatcher3, LinearEncoding as LinearEncoding3, Scene as Scene2 } from \"three\";\nvar Effect = class extends EventDispatcher3 {\n  constructor(name, fragmentShader, {\n    attributes = EffectAttribute.NONE,\n    blendFunction = BlendFunction.NORMAL,\n    defines = /* @__PURE__ */ new Map(),\n    uniforms = /* @__PURE__ */ new Map(),\n    extensions = null,\n    vertexShader = null\n  } = {}) {\n    super();\n    this.name = name;\n    this.renderer = null;\n    this.attributes = attributes;\n    this.fragmentShader = fragmentShader;\n    this.vertexShader = vertexShader;\n    this.defines = defines;\n    this.uniforms = uniforms;\n    this.extensions = extensions;\n    this.blendMode = new BlendMode(blendFunction);\n    this.blendMode.addEventListener(\"change\", (event) => this.setChanged());\n    this._inputColorSpace = LinearEncoding3;\n    this._outputColorSpace = null;\n  }\n  get inputColorSpace() {\n    return this._inputColorSpace;\n  }\n  set inputColorSpace(value) {\n    this._inputColorSpace = value;\n    this.setChanged();\n  }\n  get outputColorSpace() {\n    return this._outputColorSpace;\n  }\n  set outputColorSpace(value) {\n    this._outputColorSpace = value;\n    this.setChanged();\n  }\n  getName() {\n    return this.name;\n  }\n  setRenderer(renderer) {\n    this.renderer = renderer;\n  }\n  getDefines() {\n    return this.defines;\n  }\n  getUniforms() {\n    return this.uniforms;\n  }\n  getExtensions() {\n    return this.extensions;\n  }\n  getBlendMode() {\n    return this.blendMode;\n  }\n  getAttributes() {\n    return this.attributes;\n  }\n  setAttributes(attributes) {\n    this.attributes = attributes;\n    this.setChanged();\n  }\n  getFragmentShader() {\n    return this.fragmentShader;\n  }\n  setFragmentShader(fragmentShader) {\n    this.fragmentShader = fragmentShader;\n    this.setChanged();\n  }\n  getVertexShader() {\n    return this.vertexShader;\n  }\n  setVertexShader(vertexShader) {\n    this.vertexShader = vertexShader;\n    this.setChanged();\n  }\n  setChanged() {\n    this.dispatchEvent({ type: \"change\" });\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking12) {\n  }\n  update(renderer, inputBuffer, deltaTime) {\n  }\n  setSize(width, height) {\n  }\n  initialize(renderer, alpha, frameBufferType) {\n  }\n  dispose() {\n    for (const key of Object.keys(this)) {\n      const property = this[key];\n      if (property !== null && typeof property.dispose === \"function\") {\n        if (property instanceof Scene2 || property === this.renderer) {\n          continue;\n        }\n        this[key].dispose();\n      }\n    }\n  }\n};\n\n// src/effects/glsl/bloom.frag\nvar bloom_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}\";\n\n// src/effects/BloomEffect.js\nvar BloomEffect = class extends Effect {\n  constructor({\n    blendFunction = BlendFunction.SCREEN,\n    luminanceThreshold = 0.9,\n    luminanceSmoothing = 0.025,\n    mipmapBlur = false,\n    intensity = 1,\n    radius = 0.85,\n    levels = 8,\n    kernelSize = KernelSize.LARGE,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"BloomEffect\", bloom_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"map\", new Uniform22(null)],\n        [\"intensity\", new Uniform22(intensity)]\n      ])\n    });\n    this.renderTarget = new WebGLRenderTarget12(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"Bloom.Target\";\n    this.blurPass = new KawaseBlurPass({ kernelSize });\n    this.luminancePass = new LuminancePass({ colorOutput: true });\n    this.luminanceMaterial.threshold = luminanceThreshold;\n    this.luminanceMaterial.smoothing = luminanceSmoothing;\n    this.mipmapBlurPass = new MipmapBlurPass();\n    this.mipmapBlurPass.enabled = mipmapBlur;\n    this.mipmapBlurPass.radius = radius;\n    this.mipmapBlurPass.levels = levels;\n    this.uniforms.get(\"map\").value = mipmapBlur ? this.mipmapBlurPass.texture : this.renderTarget.texture;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  get texture() {\n    return this.mipmapBlurPass.enabled ? this.mipmapBlurPass.texture : this.renderTarget.texture;\n  }\n  getTexture() {\n    return this.texture;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  getLuminancePass() {\n    return this.luminancePass;\n  }\n  get luminanceMaterial() {\n    return this.luminancePass.fullscreenMaterial;\n  }\n  getLuminanceMaterial() {\n    return this.luminancePass.fullscreenMaterial;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get dithering() {\n    return this.blurPass.dithering;\n  }\n  set dithering(value) {\n    this.blurPass.dithering = value;\n  }\n  get kernelSize() {\n    return this.blurPass.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurPass.kernelSize = value;\n  }\n  get distinction() {\n    console.warn(this.name, \"distinction was removed\");\n    return 1;\n  }\n  set distinction(value) {\n    console.warn(this.name, \"distinction was removed\");\n  }\n  get intensity() {\n    return this.uniforms.get(\"intensity\").value;\n  }\n  set intensity(value) {\n    this.uniforms.get(\"intensity\").value = value;\n  }\n  getIntensity() {\n    return this.intensity;\n  }\n  setIntensity(value) {\n    this.intensity = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const renderTarget = this.renderTarget;\n    const luminancePass = this.luminancePass;\n    if (luminancePass.enabled) {\n      luminancePass.render(renderer, inputBuffer);\n      if (this.mipmapBlurPass.enabled) {\n        this.mipmapBlurPass.render(renderer, luminancePass.renderTarget);\n      } else {\n        this.blurPass.render(renderer, luminancePass.renderTarget, renderTarget);\n      }\n    } else {\n      if (this.mipmapBlurPass.enabled) {\n        this.mipmapBlurPass.render(renderer, inputBuffer);\n      } else {\n        this.blurPass.render(renderer, inputBuffer, renderTarget);\n      }\n    }\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    this.renderTarget.setSize(resolution.width, resolution.height);\n    this.blurPass.resolution.copy(resolution);\n    this.luminancePass.setSize(width, height);\n    this.mipmapBlurPass.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.blurPass.initialize(renderer, alpha, frameBufferType);\n    this.luminancePass.initialize(renderer, alpha, frameBufferType);\n    this.mipmapBlurPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding8) {\n        this.renderTarget.texture.encoding = sRGBEncoding8;\n      }\n    }\n  }\n};\n\n// src/effects/BokehEffect.js\nimport { Uniform as Uniform23 } from \"three\";\n\n// src/effects/glsl/bokeh.frag\nvar bokeh_default = \"uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}\";\n\n// src/effects/BokehEffect.js\nvar BokehEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    focus = 0.5,\n    dof = 0.02,\n    aperture = 0.015,\n    maxBlur = 1\n  } = {}) {\n    super(\"BokehEffect\", bokeh_default, {\n      blendFunction,\n      attributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"focus\", new Uniform23(focus)],\n        [\"dof\", new Uniform23(dof)],\n        [\"aperture\", new Uniform23(aperture)],\n        [\"maxBlur\", new Uniform23(maxBlur)]\n      ])\n    });\n  }\n};\n\n// src/effects/BrightnessContrastEffect.js\nimport { sRGBEncoding as sRGBEncoding9, Uniform as Uniform24 } from \"three\";\n\n// src/effects/glsl/brightness-contrast.frag\nvar brightness_contrast_default = \"uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}\";\n\n// src/effects/BrightnessContrastEffect.js\nvar BrightnessContrastEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, brightness = 0, contrast = 0 } = {}) {\n    super(\"BrightnessContrastEffect\", brightness_contrast_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"brightness\", new Uniform24(brightness)],\n        [\"contrast\", new Uniform24(contrast)]\n      ])\n    });\n    this.inputColorSpace = sRGBEncoding9;\n  }\n  get brightness() {\n    return this.uniforms.get(\"brightness\").value;\n  }\n  set brightness(value) {\n    this.uniforms.get(\"brightness\").value = value;\n  }\n  getBrightness(value) {\n    return this.brightness;\n  }\n  setBrightness(value) {\n    this.brightness = value;\n  }\n  get contrast() {\n    return this.uniforms.get(\"contrast\").value;\n  }\n  set contrast(value) {\n    this.uniforms.get(\"contrast\").value = value;\n  }\n  getContrast(value) {\n    return this.contrast;\n  }\n  setContrast(value) {\n    this.contrast = value;\n  }\n};\n\n// src/effects/glsl/color-average.frag\nvar color_average_default = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}\";\n\n// src/effects/ColorAverageEffect.js\nvar ColorAverageEffect = class extends Effect {\n  constructor(blendFunction) {\n    super(\"ColorAverageEffect\", color_average_default, { blendFunction });\n  }\n};\n\n// src/effects/ColorDepthEffect.js\nimport { Uniform as Uniform25 } from \"three\";\n\n// src/effects/glsl/color-depth.frag\nvar color_depth_default = \"uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}\";\n\n// src/effects/ColorDepthEffect.js\nvar ColorDepthEffect = class extends Effect {\n  constructor({ blendFunction, bits = 16 } = {}) {\n    super(\"ColorDepthEffect\", color_depth_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"factor\", new Uniform25(1)]\n      ])\n    });\n    this.bits = 0;\n    this.bitDepth = bits;\n  }\n  get bitDepth() {\n    return this.bits;\n  }\n  set bitDepth(value) {\n    this.bits = value;\n    this.uniforms.get(\"factor\").value = Math.pow(2, value / 3);\n  }\n  getBitDepth() {\n    return this.bitDepth;\n  }\n  setBitDepth(value) {\n    this.bitDepth = value;\n  }\n};\n\n// src/effects/ChromaticAberrationEffect.js\nimport { Uniform as Uniform26, Vector2 as Vector217 } from \"three\";\n\n// src/effects/glsl/chromatic-aberration.frag\nvar chromatic_aberration_default = \"#ifdef RADIAL_MODULATION\\nuniform float modulationOffset;\\n#endif\\nvarying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;\\n#ifdef RADIAL_MODULATION\\nconst vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}\\n#else\\nif(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}\\n#endif\\noutputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}\";\n\n// src/effects/glsl/chromatic-aberration.vert\nvar chromatic_aberration_default2 = \"uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}\";\n\n// src/effects/ChromaticAberrationEffect.js\nvar ChromaticAberrationEffect = class extends Effect {\n  constructor({\n    offset = new Vector217(1e-3, 5e-4),\n    radialModulation = false,\n    modulationOffset = 0.15\n  } = {}) {\n    super(\"ChromaticAberrationEffect\", chromatic_aberration_default, {\n      vertexShader: chromatic_aberration_default2,\n      attributes: EffectAttribute.CONVOLUTION,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"offset\", new Uniform26(offset)],\n        [\"modulationOffset\", new Uniform26(modulationOffset)]\n      ])\n    });\n    this.radialModulation = radialModulation;\n  }\n  get offset() {\n    return this.uniforms.get(\"offset\").value;\n  }\n  set offset(value) {\n    this.uniforms.get(\"offset\").value = value;\n  }\n  get radialModulation() {\n    return this.defines.has(\"RADIAL_MODULATION\");\n  }\n  set radialModulation(value) {\n    if (value) {\n      this.defines.set(\"RADIAL_MODULATION\", \"1\");\n    } else {\n      this.defines.delete(\"RADIAL_MODULATION\");\n    }\n    this.setChanged();\n  }\n  get modulationOffset() {\n    return this.uniforms.get(\"modulationOffset\").value;\n  }\n  set modulationOffset(value) {\n    this.uniforms.get(\"modulationOffset\").value = value;\n  }\n  getOffset() {\n    return this.offset;\n  }\n  setOffset(value) {\n    this.offset = value;\n  }\n};\n\n// src/effects/glsl/depth.frag\nvar depth_default = \"void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef INVERTED\\nvec3 color=vec3(1.0-depth);\\n#else\\nvec3 color=vec3(depth);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/DepthEffect.js\nvar DepthEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, inverted = false } = {}) {\n    super(\"DepthEffect\", depth_default, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH\n    });\n    this.inverted = inverted;\n  }\n  get inverted() {\n    return this.defines.has(\"INVERTED\");\n  }\n  set inverted(value) {\n    if (this.inverted !== value) {\n      if (value) {\n        this.defines.set(\"INVERTED\", \"1\");\n      } else {\n        this.defines.delete(\"INVERTED\");\n      }\n      this.setChanged();\n    }\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n};\n\n// src/effects/DepthOfFieldEffect.js\nimport { BasicDepthPacking as BasicDepthPacking13, sRGBEncoding as sRGBEncoding10, Uniform as Uniform27, UnsignedByteType as UnsignedByteType12, WebGLRenderTarget as WebGLRenderTarget13 } from \"three\";\n\n// src/effects/glsl/depth-of-field.frag\nvar depth_of_field_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\\n#else\\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\\n#endif\\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float cocNear=texture2D(nearCoCBuffer,uv).r;cocNear=min(cocNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,cocNear);outputColor=result;}\";\n\n// src/effects/DepthOfFieldEffect.js\nvar DepthOfFieldEffect = class extends Effect {\n  constructor(camera, {\n    blendFunction,\n    worldFocusDistance,\n    worldFocusRange,\n    focusDistance = 0,\n    focalLength = 0.1,\n    focusRange = focalLength,\n    bokehScale = 1,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"DepthOfFieldEffect\", depth_of_field_default, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"nearColorBuffer\", new Uniform27(null)],\n        [\"farColorBuffer\", new Uniform27(null)],\n        [\"nearCoCBuffer\", new Uniform27(null)],\n        [\"scale\", new Uniform27(1)]\n      ])\n    });\n    this.camera = camera;\n    this.renderTarget = new WebGLRenderTarget13(1, 1, { depthBuffer: false });\n    this.renderTarget.texture.name = \"DoF.Intermediate\";\n    this.renderTargetMasked = this.renderTarget.clone();\n    this.renderTargetMasked.texture.name = \"DoF.Masked.Far\";\n    this.renderTargetNear = this.renderTarget.clone();\n    this.renderTargetNear.texture.name = \"DoF.Bokeh.Near\";\n    this.uniforms.get(\"nearColorBuffer\").value = this.renderTargetNear.texture;\n    this.renderTargetFar = this.renderTarget.clone();\n    this.renderTargetFar.texture.name = \"DoF.Bokeh.Far\";\n    this.uniforms.get(\"farColorBuffer\").value = this.renderTargetFar.texture;\n    this.renderTargetCoC = this.renderTarget.clone();\n    this.renderTargetCoC.texture.name = \"DoF.CoC\";\n    this.renderTargetCoCBlurred = this.renderTargetCoC.clone();\n    this.renderTargetCoCBlurred.texture.name = \"DoF.CoC.Blurred\";\n    this.uniforms.get(\"nearCoCBuffer\").value = this.renderTargetCoCBlurred.texture;\n    this.cocPass = new ShaderPass(new CircleOfConfusionMaterial(camera));\n    const cocMaterial = this.cocMaterial;\n    cocMaterial.focusDistance = focusDistance;\n    cocMaterial.focusRange = focusRange;\n    if (worldFocusDistance !== void 0) {\n      cocMaterial.worldFocusDistance = worldFocusDistance;\n    }\n    if (worldFocusRange !== void 0) {\n      cocMaterial.worldFocusRange = worldFocusRange;\n    }\n    this.blurPass = new KawaseBlurPass({ resolutionScale, resolutionX, resolutionY, kernelSize: KernelSize.MEDIUM });\n    this.maskPass = new ShaderPass(new MaskMaterial(this.renderTargetCoC.texture));\n    const maskMaterial = this.maskPass.fullscreenMaterial;\n    maskMaterial.maskFunction = MaskFunction.MULTIPLY;\n    maskMaterial.colorChannel = ColorChannel.GREEN;\n    this.bokehNearBasePass = new ShaderPass(new BokehMaterial(false, true));\n    this.bokehNearBasePass.fullscreenMaterial.cocBuffer = this.renderTargetCoCBlurred.texture;\n    this.bokehNearFillPass = new ShaderPass(new BokehMaterial(true, true));\n    this.bokehNearFillPass.fullscreenMaterial.cocBuffer = this.renderTargetCoCBlurred.texture;\n    this.bokehFarBasePass = new ShaderPass(new BokehMaterial(false, false));\n    this.bokehFarBasePass.fullscreenMaterial.cocBuffer = this.renderTargetCoC.texture;\n    this.bokehFarFillPass = new ShaderPass(new BokehMaterial(true, false));\n    this.bokehFarFillPass.fullscreenMaterial.cocBuffer = this.renderTargetCoC.texture;\n    this.target = null;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.bokehScale = bokehScale;\n  }\n  get cocTexture() {\n    return this.renderTargetCoC.texture;\n  }\n  get cocMaterial() {\n    return this.cocPass.fullscreenMaterial;\n  }\n  get circleOfConfusionMaterial() {\n    return this.cocMaterial;\n  }\n  getCircleOfConfusionMaterial() {\n    return this.circleOfConfusionMaterial;\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get bokehScale() {\n    return this.uniforms.get(\"scale\").value;\n  }\n  set bokehScale(value) {\n    this.bokehNearBasePass.fullscreenMaterial.scale = value;\n    this.bokehNearFillPass.fullscreenMaterial.scale = value;\n    this.bokehFarBasePass.fullscreenMaterial.scale = value;\n    this.bokehFarFillPass.fullscreenMaterial.scale = value;\n    this.maskPass.fullscreenMaterial.strength = value;\n    this.uniforms.get(\"scale\").value = value;\n  }\n  getBokehScale() {\n    return this.bokehScale;\n  }\n  setBokehScale(value) {\n    this.bokehScale = value;\n  }\n  getTarget() {\n    return this.target;\n  }\n  setTarget(value) {\n    this.target = value;\n  }\n  calculateFocusDistance(target) {\n    const camera = this.camera;\n    const distance = camera.position.distanceTo(target);\n    return viewZToOrthographicDepth(-distance, camera.near, camera.far);\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking13) {\n    this.circleOfConfusionMaterial.depthBuffer = depthTexture;\n    this.circleOfConfusionMaterial.depthPacking = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const renderTarget = this.renderTarget;\n    const renderTargetCoC = this.renderTargetCoC;\n    const renderTargetCoCBlurred = this.renderTargetCoCBlurred;\n    const renderTargetMasked = this.renderTargetMasked;\n    if (this.target !== null) {\n      const distance = this.calculateFocusDistance(this.target);\n      this.circleOfConfusionMaterial.focusDistance = distance;\n    }\n    this.cocPass.render(renderer, null, renderTargetCoC);\n    this.blurPass.render(renderer, renderTargetCoC, renderTargetCoCBlurred);\n    this.maskPass.render(renderer, inputBuffer, renderTargetMasked);\n    this.bokehFarBasePass.render(renderer, renderTargetMasked, renderTarget);\n    this.bokehFarFillPass.render(renderer, renderTarget, this.renderTargetFar);\n    this.bokehNearBasePass.render(renderer, inputBuffer, renderTarget);\n    this.bokehNearFillPass.render(renderer, renderTarget, this.renderTargetNear);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.cocPass.setSize(width, height);\n    this.blurPass.setSize(width, height);\n    this.maskPass.setSize(width, height);\n    this.renderTargetCoC.setSize(width, height);\n    this.renderTargetMasked.setSize(width, height);\n    this.renderTarget.setSize(w, h);\n    this.renderTargetNear.setSize(w, h);\n    this.renderTargetFar.setSize(w, h);\n    this.renderTargetCoCBlurred.setSize(w, h);\n    this.bokehNearBasePass.fullscreenMaterial.setSize(w, h);\n    this.bokehNearFillPass.fullscreenMaterial.setSize(w, h);\n    this.bokehFarBasePass.fullscreenMaterial.setSize(w, h);\n    this.bokehFarFillPass.fullscreenMaterial.setSize(w, h);\n    this.bokehNearBasePass.fullscreenMaterial.resolutionScale = resolution.scale;\n    this.bokehNearFillPass.fullscreenMaterial.resolutionScale = resolution.scale;\n    this.bokehFarBasePass.fullscreenMaterial.resolutionScale = resolution.scale;\n    this.bokehFarFillPass.fullscreenMaterial.resolutionScale = resolution.scale;\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.cocPass.initialize(renderer, alpha, frameBufferType);\n    this.maskPass.initialize(renderer, alpha, frameBufferType);\n    this.bokehNearBasePass.initialize(renderer, alpha, frameBufferType);\n    this.bokehNearFillPass.initialize(renderer, alpha, frameBufferType);\n    this.bokehFarBasePass.initialize(renderer, alpha, frameBufferType);\n    this.bokehFarFillPass.initialize(renderer, alpha, frameBufferType);\n    this.blurPass.initialize(renderer, alpha, UnsignedByteType12);\n    if (frameBufferType !== void 0) {\n      this.renderTarget.texture.type = frameBufferType;\n      this.renderTargetNear.texture.type = frameBufferType;\n      this.renderTargetFar.texture.type = frameBufferType;\n      this.renderTargetMasked.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding10) {\n        this.renderTarget.texture.encoding = sRGBEncoding10;\n        this.renderTargetNear.texture.encoding = sRGBEncoding10;\n        this.renderTargetFar.texture.encoding = sRGBEncoding10;\n        this.renderTargetMasked.texture.encoding = sRGBEncoding10;\n      }\n    }\n  }\n};\n\n// src/effects/DotScreenEffect.js\nimport { Uniform as Uniform28, Vector2 as Vector218 } from \"three\";\n\n// src/effects/glsl/dot-screen.frag\nvar dot_screen_default = \"uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/DotScreenEffect.js\nvar DotScreenEffect = class extends Effect {\n  constructor({ blendFunction, angle = Math.PI * 0.5, scale = 1 } = {}) {\n    super(\"DotScreenEffect\", dot_screen_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"angle\", new Uniform28(new Vector218())],\n        [\"scale\", new Uniform28(scale)]\n      ])\n    });\n    this.angle = angle;\n  }\n  get angle() {\n    return Math.acos(this.uniforms.get(\"angle\").value.y);\n  }\n  set angle(value) {\n    this.uniforms.get(\"angle\").value.set(Math.sin(value), Math.cos(value));\n  }\n  getAngle() {\n    return this.angle;\n  }\n  setAngle(value) {\n    this.angle = value;\n  }\n  get scale() {\n    return this.uniforms.get(\"scale\").value;\n  }\n  set scale(value) {\n    this.uniforms.get(\"scale\").value = value;\n  }\n};\n\n// src/effects/glsl/fxaa.frag\nvar fxaa_default = \"\\n#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))\\n#define ONE_OVER_TWELVE 0.08333333333333333\\nvarying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=linearToRelativeLuminance(inputColor.rgb);float lumaDown=linearToRelativeLuminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=linearToRelativeLuminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=linearToRelativeLuminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=linearToRelativeLuminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=linearToRelativeLuminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=linearToRelativeLuminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=linearToRelativeLuminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=linearToRelativeLuminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=linearToRelativeLuminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}\";\n\n// src/effects/glsl/fxaa.vert\nvar fxaa_default2 = \"varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}\";\n\n// src/effects/FXAAEffect.js\nvar FXAAEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC } = {}) {\n    super(\"FXAAEffect\", fxaa_default, {\n      vertexShader: fxaa_default2,\n      blendFunction,\n      defines: /* @__PURE__ */ new Map([\n        [\"EDGE_THRESHOLD_MIN\", \"0.0312\"],\n        [\"EDGE_THRESHOLD_MAX\", \"0.125\"],\n        [\"SUBPIXEL_QUALITY\", \"0.75\"],\n        [\"SAMPLES\", \"12\"]\n      ])\n    });\n  }\n  get minEdgeThreshold() {\n    return Number(this.defines.get(\"EDGE_THRESHOLD_MIN\"));\n  }\n  set minEdgeThreshold(value) {\n    this.defines.set(\"EDGE_THRESHOLD_MIN\", value.toFixed(12));\n    this.setChanged();\n  }\n  get maxEdgeThreshold() {\n    return Number(this.defines.get(\"EDGE_THRESHOLD_MAX\"));\n  }\n  set maxEdgeThreshold(value) {\n    this.defines.set(\"EDGE_THRESHOLD_MAX\", value.toFixed(12));\n    this.setChanged();\n  }\n  get subpixelQuality() {\n    return Number(this.defines.get(\"SUBPIXEL_QUALITY\"));\n  }\n  set subpixelQuality(value) {\n    this.defines.set(\"SUBPIXEL_QUALITY\", value.toFixed(12));\n    this.setChanged();\n  }\n  get samples() {\n    return Number(this.defines.get(\"SAMPLES\"));\n  }\n  set samples(value) {\n    this.defines.set(\"SAMPLES\", value.toFixed(0));\n    this.setChanged();\n  }\n};\n\n// src/effects/GammaCorrectionEffect.js\nimport { Uniform as Uniform29 } from \"three\";\n\n// src/effects/glsl/gamma-correction.frag\nvar gamma_correction_default = \"uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}\";\n\n// src/effects/GammaCorrectionEffect.js\nvar GammaCorrectionEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, gamma = 2 } = {}) {\n    super(\"GammaCorrectionEffect\", gamma_correction_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"gamma\", new Uniform29(gamma)]\n      ])\n    });\n  }\n};\n\n// src/effects/GlitchEffect.js\nimport { NearestFilter as NearestFilter6, RepeatWrapping, RGBAFormat as RGBAFormat3, Uniform as Uniform30, Vector2 as Vector219 } from \"three\";\n\n// src/textures/NoiseTexture.js\nimport {\n  DataTexture,\n  LuminanceFormat,\n  RedFormat,\n  RGFormat,\n  RGBAFormat as RGBAFormat2,\n  UnsignedByteType as UnsignedByteType13\n} from \"three\";\nfunction getNoise(size, format, type) {\n  const channels = /* @__PURE__ */ new Map([\n    [LuminanceFormat, 1],\n    [RedFormat, 1],\n    [RGFormat, 2],\n    [RGBAFormat2, 4]\n  ]);\n  let data;\n  if (!channels.has(format)) {\n    console.error(\"Invalid noise texture format\");\n  }\n  if (type === UnsignedByteType13) {\n    data = new Uint8Array(size * channels.get(format));\n    for (let i = 0, l = data.length; i < l; ++i) {\n      data[i] = Math.random() * 255 + 0.5;\n    }\n  } else {\n    data = new Float32Array(size * channels.get(format));\n    for (let i = 0, l = data.length; i < l; ++i) {\n      data[i] = Math.random();\n    }\n  }\n  return data;\n}\nvar NoiseTexture = class extends DataTexture {\n  constructor(width, height, format = LuminanceFormat, type = UnsignedByteType13) {\n    super(getNoise(width * height, format, type), width, height, format, type);\n    this.needsUpdate = true;\n  }\n};\n\n// src/effects/glsl/glitch.frag\nvar glitch_default = \"uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}\";\n\n// src/effects/GlitchEffect.js\nvar textureTag = \"Glitch.Generated\";\nfunction randomFloat(low, high) {\n  return low + Math.random() * (high - low);\n}\nvar GlitchEffect = class extends Effect {\n  constructor({\n    chromaticAberrationOffset = null,\n    delay = new Vector219(1.5, 3.5),\n    duration = new Vector219(0.6, 1),\n    strength = new Vector219(0.3, 1),\n    columns = 0.05,\n    ratio = 0.85,\n    perturbationMap = null,\n    dtSize = 64\n  } = {}) {\n    super(\"GlitchEffect\", glitch_default, {\n      uniforms: /* @__PURE__ */ new Map([\n        [\"perturbationMap\", new Uniform30(null)],\n        [\"columns\", new Uniform30(columns)],\n        [\"active\", new Uniform30(false)],\n        [\"random\", new Uniform30(1)],\n        [\"seeds\", new Uniform30(new Vector219())],\n        [\"distortion\", new Uniform30(new Vector219())]\n      ])\n    });\n    if (perturbationMap === null) {\n      const map = new NoiseTexture(dtSize, dtSize, RGBAFormat3);\n      map.name = textureTag;\n      this.perturbationMap = map;\n    } else {\n      this.perturbationMap = perturbationMap;\n    }\n    this.time = 0;\n    this.distortion = this.uniforms.get(\"distortion\").value;\n    this.delay = delay;\n    this.duration = duration;\n    this.breakPoint = new Vector219(randomFloat(this.delay.x, this.delay.y), randomFloat(this.duration.x, this.duration.y));\n    this.strength = strength;\n    this.mode = GlitchMode.SPORADIC;\n    this.ratio = ratio;\n    this.chromaticAberrationOffset = chromaticAberrationOffset;\n  }\n  get seeds() {\n    return this.uniforms.get(\"seeds\").value;\n  }\n  get active() {\n    return this.uniforms.get(\"active\").value;\n  }\n  isActive() {\n    return this.active;\n  }\n  get minDelay() {\n    return this.delay.x;\n  }\n  set minDelay(value) {\n    this.delay.x = value;\n  }\n  getMinDelay() {\n    return this.delay.x;\n  }\n  setMinDelay(value) {\n    this.delay.x = value;\n  }\n  get maxDelay() {\n    return this.delay.y;\n  }\n  set maxDelay(value) {\n    this.delay.y = value;\n  }\n  getMaxDelay() {\n    return this.delay.y;\n  }\n  setMaxDelay(value) {\n    this.delay.y = value;\n  }\n  get minDuration() {\n    return this.duration.x;\n  }\n  set minDuration(value) {\n    this.duration.x = value;\n  }\n  getMinDuration() {\n    return this.duration.x;\n  }\n  setMinDuration(value) {\n    this.duration.x = value;\n  }\n  get maxDuration() {\n    return this.duration.y;\n  }\n  set maxDuration(value) {\n    this.duration.y = value;\n  }\n  getMaxDuration() {\n    return this.duration.y;\n  }\n  setMaxDuration(value) {\n    this.duration.y = value;\n  }\n  get minStrength() {\n    return this.strength.x;\n  }\n  set minStrength(value) {\n    this.strength.x = value;\n  }\n  getMinStrength() {\n    return this.strength.x;\n  }\n  setMinStrength(value) {\n    this.strength.x = value;\n  }\n  get maxStrength() {\n    return this.strength.y;\n  }\n  set maxStrength(value) {\n    this.strength.y = value;\n  }\n  getMaxStrength() {\n    return this.strength.y;\n  }\n  setMaxStrength(value) {\n    this.strength.y = value;\n  }\n  getMode() {\n    return this.mode;\n  }\n  setMode(value) {\n    this.mode = value;\n  }\n  getGlitchRatio() {\n    return 1 - this.ratio;\n  }\n  setGlitchRatio(value) {\n    this.ratio = Math.min(Math.max(1 - value, 0), 1);\n  }\n  get columns() {\n    return this.uniforms.get(\"columns\").value;\n  }\n  set columns(value) {\n    this.uniforms.get(\"columns\").value = value;\n  }\n  getGlitchColumns() {\n    return this.columns;\n  }\n  setGlitchColumns(value) {\n    this.columns = value;\n  }\n  getChromaticAberrationOffset() {\n    return this.chromaticAberrationOffset;\n  }\n  setChromaticAberrationOffset(value) {\n    this.chromaticAberrationOffset = value;\n  }\n  get perturbationMap() {\n    return this.uniforms.get(\"perturbationMap\").value;\n  }\n  set perturbationMap(value) {\n    const currentMap = this.perturbationMap;\n    if (currentMap !== null && currentMap.name === textureTag) {\n      currentMap.dispose();\n    }\n    value.minFilter = value.magFilter = NearestFilter6;\n    value.wrapS = value.wrapT = RepeatWrapping;\n    value.generateMipmaps = false;\n    this.uniforms.get(\"perturbationMap\").value = value;\n  }\n  getPerturbationMap() {\n    return this.perturbationMap;\n  }\n  setPerturbationMap(value) {\n    this.perturbationMap = value;\n  }\n  generatePerturbationMap(value = 64) {\n    const map = new NoiseTexture(value, value, RGBAFormat3);\n    map.name = textureTag;\n    return map;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const mode = this.mode;\n    const breakPoint = this.breakPoint;\n    const offset = this.chromaticAberrationOffset;\n    const s = this.strength;\n    let time = this.time;\n    let active = false;\n    let r = 0, a = 0;\n    let trigger;\n    if (mode !== GlitchMode.DISABLED) {\n      if (mode === GlitchMode.SPORADIC) {\n        time += deltaTime;\n        trigger = time > breakPoint.x;\n        if (time >= breakPoint.x + breakPoint.y) {\n          breakPoint.set(randomFloat(this.delay.x, this.delay.y), randomFloat(this.duration.x, this.duration.y));\n          time = 0;\n        }\n      }\n      r = Math.random();\n      this.uniforms.get(\"random\").value = r;\n      if (trigger && r > this.ratio || mode === GlitchMode.CONSTANT_WILD) {\n        active = true;\n        r *= s.y * 0.03;\n        a = randomFloat(-Math.PI, Math.PI);\n        this.seeds.set(randomFloat(-s.y, s.y), randomFloat(-s.y, s.y));\n        this.distortion.set(randomFloat(0, 1), randomFloat(0, 1));\n      } else if (trigger || mode === GlitchMode.CONSTANT_MILD) {\n        active = true;\n        r *= s.x * 0.03;\n        a = randomFloat(-Math.PI, Math.PI);\n        this.seeds.set(randomFloat(-s.x, s.x), randomFloat(-s.x, s.x));\n        this.distortion.set(randomFloat(0, 1), randomFloat(0, 1));\n      }\n      this.time = time;\n    }\n    if (offset !== null) {\n      if (active) {\n        offset.set(Math.cos(a), Math.sin(a)).multiplyScalar(r);\n      } else {\n        offset.set(0, 0);\n      }\n    }\n    this.uniforms.get(\"active\").value = active;\n  }\n  dispose() {\n    const map = this.perturbationMap;\n    if (map !== null && map.name === textureTag) {\n      map.dispose();\n    }\n  }\n};\n\n// src/effects/GodRaysEffect.js\nimport {\n  BasicDepthPacking as BasicDepthPacking14,\n  Color as Color4,\n  DepthTexture as DepthTexture2,\n  Matrix4 as Matrix42,\n  Scene as Scene3,\n  sRGBEncoding as sRGBEncoding11,\n  Uniform as Uniform31,\n  Vector2 as Vector220,\n  Vector3,\n  WebGLRenderTarget as WebGLRenderTarget14\n} from \"three\";\n\n// src/effects/glsl/god-rays.frag\nvar god_rays_default = \"#ifdef FRAMEBUFFER_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}\";\n\n// src/effects/GodRaysEffect.js\nvar v = new Vector3();\nvar m = new Matrix42();\nvar GodRaysEffect = class extends Effect {\n  constructor(camera, lightSource, {\n    blendFunction = BlendFunction.SCREEN,\n    samples = 60,\n    density = 0.96,\n    decay = 0.9,\n    weight = 0.4,\n    exposure = 0.6,\n    clampMax = 1,\n    blur = true,\n    kernelSize = KernelSize.SMALL,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"GodRaysEffect\", god_rays_default, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"map\", new Uniform31(null)]\n      ])\n    });\n    this.camera = camera;\n    this.lightSource = lightSource;\n    this.lightSource.material.depthWrite = false;\n    this.lightSource.material.transparent = true;\n    this.lightScene = new Scene3();\n    this.screenPosition = new Vector220();\n    this.renderTargetA = new WebGLRenderTarget14(1, 1, { depthBuffer: false });\n    this.renderTargetA.texture.name = \"GodRays.Target.A\";\n    this.renderTargetB = this.renderTargetA.clone();\n    this.renderTargetB.texture.name = \"GodRays.Target.B\";\n    this.uniforms.get(\"map\").value = this.renderTargetB.texture;\n    this.renderTargetLight = new WebGLRenderTarget14(1, 1);\n    this.renderTargetLight.texture.name = \"GodRays.Light\";\n    this.renderTargetLight.depthTexture = new DepthTexture2();\n    this.renderPassLight = new RenderPass(this.lightScene, camera);\n    this.renderPassLight.clearPass.overrideClearColor = new Color4(0);\n    this.clearPass = new ClearPass(true, false, false);\n    this.clearPass.overrideClearColor = new Color4(0);\n    this.blurPass = new KawaseBlurPass({ kernelSize });\n    this.blurPass.enabled = blur;\n    this.depthMaskPass = new ShaderPass(new DepthMaskMaterial());\n    const depthMaskMaterial = this.depthMaskPass.fullscreenMaterial;\n    depthMaskMaterial.depthBuffer1 = this.renderTargetLight.depthTexture;\n    depthMaskMaterial.adoptCameraSettings(camera);\n    this.godRaysPass = new ShaderPass(new GodRaysMaterial(this.screenPosition));\n    const godRaysMaterial = this.godRaysPass.fullscreenMaterial;\n    godRaysMaterial.density = density;\n    godRaysMaterial.decay = decay;\n    godRaysMaterial.weight = weight;\n    godRaysMaterial.exposure = exposure;\n    godRaysMaterial.maxIntensity = clampMax;\n    godRaysMaterial.samples = samples;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  get texture() {\n    return this.renderTargetB.texture;\n  }\n  getTexture() {\n    return this.texture;\n  }\n  get depthMaskMaterial() {\n    return this.depthMaskPass.fullscreenMaterial;\n  }\n  get godRaysMaterial() {\n    return this.godRaysPass.fullscreenMaterial;\n  }\n  getGodRaysMaterial() {\n    return this.godRaysMaterial;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get dithering() {\n    return this.godRaysMaterial.dithering;\n  }\n  set dithering(value) {\n    const material = this.godRaysMaterial;\n    material.dithering = value;\n    material.needsUpdate = true;\n  }\n  get blur() {\n    return this.blurPass.enabled;\n  }\n  set blur(value) {\n    this.blurPass.enabled = value;\n  }\n  get kernelSize() {\n    return this.blurPass.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurPass.kernelSize = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  get samples() {\n    return this.godRaysMaterial.samples;\n  }\n  set samples(value) {\n    this.godRaysMaterial.samples = value;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking14) {\n    this.depthMaskPass.fullscreenMaterial.depthBuffer0 = depthTexture;\n    this.depthMaskPass.fullscreenMaterial.depthPacking0 = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const lightSource = this.lightSource;\n    const parent = lightSource.parent;\n    const matrixAutoUpdate = lightSource.matrixAutoUpdate;\n    const renderTargetA = this.renderTargetA;\n    const renderTargetLight = this.renderTargetLight;\n    lightSource.material.depthWrite = true;\n    lightSource.matrixAutoUpdate = false;\n    lightSource.updateWorldMatrix(true, false);\n    if (parent !== null) {\n      if (!matrixAutoUpdate) {\n        m.copy(lightSource.matrix);\n      }\n      lightSource.matrix.copy(lightSource.matrixWorld);\n    }\n    this.lightScene.add(lightSource);\n    this.renderPassLight.render(renderer, renderTargetLight);\n    this.clearPass.render(renderer, renderTargetA);\n    this.depthMaskPass.render(renderer, renderTargetLight, renderTargetA);\n    lightSource.material.depthWrite = false;\n    lightSource.matrixAutoUpdate = matrixAutoUpdate;\n    if (parent !== null) {\n      if (!matrixAutoUpdate) {\n        lightSource.matrix.copy(m);\n      }\n      parent.add(lightSource);\n    }\n    v.setFromMatrixPosition(lightSource.matrixWorld).project(this.camera);\n    this.screenPosition.set(Math.min(Math.max((v.x + 1) * 0.5, -1), 2), Math.min(Math.max((v.y + 1) * 0.5, -1), 2));\n    if (this.blurPass.enabled) {\n      this.blurPass.render(renderer, renderTargetA, renderTargetA);\n    }\n    this.godRaysPass.render(renderer, renderTargetA, this.renderTargetB);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.renderTargetA.setSize(w, h);\n    this.renderTargetB.setSize(w, h);\n    this.renderTargetLight.setSize(w, h);\n    this.blurPass.resolution.copy(resolution);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.blurPass.initialize(renderer, alpha, frameBufferType);\n    this.renderPassLight.initialize(renderer, alpha, frameBufferType);\n    this.depthMaskPass.initialize(renderer, alpha, frameBufferType);\n    this.godRaysPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTargetA.texture.type = frameBufferType;\n      this.renderTargetB.texture.type = frameBufferType;\n      this.renderTargetLight.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding11) {\n        this.renderTargetA.texture.encoding = sRGBEncoding11;\n        this.renderTargetB.texture.encoding = sRGBEncoding11;\n        this.renderTargetLight.texture.encoding = sRGBEncoding11;\n      }\n    }\n  }\n};\n\n// src/effects/GridEffect.js\nimport { Uniform as Uniform32, Vector2 as Vector221 } from \"three\";\n\n// src/effects/glsl/grid.frag\nvar grid_default = \"uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}\";\n\n// src/effects/GridEffect.js\nvar GridEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.OVERLAY, scale = 1, lineWidth = 0 } = {}) {\n    super(\"GridEffect\", grid_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"scale\", new Uniform32(new Vector221())],\n        [\"lineWidth\", new Uniform32(lineWidth)]\n      ])\n    });\n    this.resolution = new Vector221();\n    this.s = 0;\n    this.scale = scale;\n    this.l = 0;\n    this.lineWidth = lineWidth;\n  }\n  get scale() {\n    return this.s;\n  }\n  set scale(value) {\n    this.s = Math.max(value, 1e-6);\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getScale() {\n    return this.scale;\n  }\n  setScale(value) {\n    this.scale = value;\n  }\n  get lineWidth() {\n    return this.l;\n  }\n  set lineWidth(value) {\n    this.l = value;\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getLineWidth() {\n    return this.lineWidth;\n  }\n  setLineWidth(value) {\n    this.lineWidth = value;\n  }\n  setSize(width, height) {\n    this.resolution.set(width, height);\n    const aspect = width / height;\n    const scale = this.scale * (height * 0.125);\n    this.uniforms.get(\"scale\").value.set(aspect * scale, scale);\n    this.uniforms.get(\"lineWidth\").value = scale / height + this.lineWidth;\n  }\n};\n\n// src/effects/HueSaturationEffect.js\nimport { Uniform as Uniform33, Vector3 as Vector32 } from \"three\";\n\n// src/effects/glsl/hue-saturation.frag\nvar hue_saturation_default = \"uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}\";\n\n// src/effects/HueSaturationEffect.js\nvar HueSaturationEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SRC, hue = 0, saturation = 0 } = {}) {\n    super(\"HueSaturationEffect\", hue_saturation_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"hue\", new Uniform33(new Vector32())],\n        [\"saturation\", new Uniform33(saturation)]\n      ])\n    });\n    this.hue = hue;\n  }\n  get saturation() {\n    return this.uniforms.get(\"saturation\").value;\n  }\n  set saturation(value) {\n    this.uniforms.get(\"saturation\").value = value;\n  }\n  getSaturation() {\n    return this.saturation;\n  }\n  setSaturation(value) {\n    this.saturation = value;\n  }\n  get hue() {\n    const hue = this.uniforms.get(\"hue\").value;\n    return Math.acos((hue.x * 3 - 1) / 2);\n  }\n  set hue(value) {\n    const s = Math.sin(value), c2 = Math.cos(value);\n    this.uniforms.get(\"hue\").value.set((2 * c2 + 1) / 3, (-Math.sqrt(3) * s - c2 + 1) / 3, (Math.sqrt(3) * s - c2 + 1) / 3);\n  }\n  getHue() {\n    return this.hue;\n  }\n  setHue(value) {\n    this.hue = value;\n  }\n};\n\n// src/effects/LUT1DEffect.js\nimport { FloatType as FloatType4, HalfFloatType, Uniform as Uniform34 } from \"three\";\n\n// src/effects/glsl/lut-1d.frag\nvar lut_1d_default = \"#ifdef LUT_PRECISION_HIGH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D lut;\\n#else\\nuniform mediump sampler2D lut;\\n#endif\\n#else\\nuniform lowp sampler2D lut;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(texture2D(lut,vec2(inputColor.r,0.5)).r,texture2D(lut,vec2(inputColor.g,0.5)).r,texture2D(lut,vec2(inputColor.b,0.5)).r,inputColor.a);}\";\n\n// src/effects/LUT1DEffect.js\nvar LUT1DEffect = class extends Effect {\n  constructor(lut, { blendFunction = BlendFunction.SRC } = {}) {\n    super(\"LUT1DEffect\", lut_1d_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([[\"lut\", new Uniform34(null)]])\n    });\n    this.lut = lut;\n  }\n  get lut() {\n    return this.uniforms.get(\"lut\").value;\n  }\n  set lut(value) {\n    this.uniforms.get(\"lut\").value = value;\n    if (value !== null && (value.type === FloatType4 || value.type === HalfFloatType)) {\n      this.defines.set(\"LUT_PRECISION_HIGH\", \"1\");\n    }\n  }\n};\n\n// src/effects/LUT3DEffect.js\nimport {\n  DataTexture3D as DataTexture3D2,\n  FloatType as FloatType6,\n  HalfFloatType as HalfFloatType2,\n  LinearFilter as LinearFilter4,\n  NearestFilter as NearestFilter7,\n  sRGBEncoding as sRGBEncoding13,\n  Uniform as Uniform35,\n  Vector3 as Vector34\n} from \"three\";\n\n// src/textures/lut/LookupTexture.js\nimport {\n  Color as Color5,\n  ClampToEdgeWrapping,\n  DataTexture as DataTexture2,\n  DataTexture3D,\n  FloatType as FloatType5,\n  LinearFilter as LinearFilter3,\n  LinearEncoding as LinearEncoding4,\n  RGBAFormat as RGBAFormat4,\n  sRGBEncoding as sRGBEncoding12,\n  UnsignedByteType as UnsignedByteType14,\n  Vector3 as Vector33\n} from \"three\";\n\n// src/textures/RawImageData.js\nfunction createCanvas(width, height, data) {\n  const canvas = document.createElement(\"canvas\");\n  const context = canvas.getContext(\"2d\");\n  canvas.width = width;\n  canvas.height = height;\n  if (data instanceof Image) {\n    context.drawImage(data, 0, 0);\n  } else {\n    const imageData = context.createImageData(width, height);\n    imageData.data.set(data);\n    context.putImageData(imageData, 0, 0);\n  }\n  return canvas;\n}\nvar RawImageData = class {\n  constructor(width = 0, height = 0, data = null) {\n    this.width = width;\n    this.height = height;\n    this.data = data;\n  }\n  toCanvas() {\n    return typeof document === \"undefined\" ? null : createCanvas(this.width, this.height, this.data);\n  }\n  static from(image) {\n    const { width, height } = image;\n    let data;\n    if (image instanceof Image) {\n      const canvas = createCanvas(width, height, image);\n      if (canvas !== null) {\n        const context = canvas.getContext(\"2d\");\n        data = context.getImageData(0, 0, width, height).data;\n      }\n    } else {\n      data = image.data;\n    }\n    return new RawImageData(width, height, data);\n  }\n};\n\n// tmp/lut/worker.txt\nvar worker_default = '\"use strict\";(()=>{var O=Math.pow;var _={SCALE_UP:\"lut.scaleup\"};var k=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function j(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=k[0];P[0]=s,P[1]=F,P[2]=f;let o=k[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(O(r,3)*4),y=t instanceof Uint8Array?255:1,h=O(r,2),A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;j(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener(\"message\",a=>{let t=a.data,r=t.data;switch(t.operation){case _.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();\\n';\n\n// src/textures/lut/LookupTexture.js\nvar c = new Color5();\nvar LookupTexture = class extends DataTexture3D {\n  constructor(data, size) {\n    super(data, size, size, size);\n    this.type = FloatType5;\n    this.format = RGBAFormat4;\n    this.encoding = LinearEncoding4;\n    this.minFilter = LinearFilter3;\n    this.magFilter = LinearFilter3;\n    this.wrapS = ClampToEdgeWrapping;\n    this.wrapT = ClampToEdgeWrapping;\n    this.wrapR = ClampToEdgeWrapping;\n    this.unpackAlignment = 1;\n    this.needsUpdate = true;\n    this.domainMin = new Vector33(0, 0, 0);\n    this.domainMax = new Vector33(1, 1, 1);\n  }\n  get isLookupTexture3D() {\n    return true;\n  }\n  scaleUp(size, transferData = true) {\n    const image = this.image;\n    let promise;\n    if (size <= image.width) {\n      promise = Promise.reject(new Error(\"The target size must be greater than the current size\"));\n    } else {\n      promise = new Promise((resolve, reject) => {\n        const workerURL = URL.createObjectURL(new Blob([worker_default], {\n          type: \"text/javascript\"\n        }));\n        const worker = new Worker(workerURL);\n        worker.addEventListener(\"error\", (event) => reject(event.error));\n        worker.addEventListener(\"message\", (event) => {\n          const lut = new LookupTexture(event.data, size);\n          lut.encoding = this.encoding;\n          lut.type = this.type;\n          lut.name = this.name;\n          URL.revokeObjectURL(workerURL);\n          resolve(lut);\n        });\n        const transferList = transferData ? [image.data.buffer] : [];\n        worker.postMessage({\n          operation: LUTOperation.SCALE_UP,\n          data: image.data,\n          size\n        }, transferList);\n      });\n    }\n    return promise;\n  }\n  applyLUT(lut) {\n    const img0 = this.image;\n    const img1 = lut.image;\n    const size0 = Math.min(img0.width, img0.height, img0.depth);\n    const size1 = Math.min(img1.width, img1.height, img1.depth);\n    if (size0 !== size1) {\n      console.error(\"Size mismatch\");\n    } else if (lut.type !== FloatType5 || this.type !== FloatType5) {\n      console.error(\"Both LUTs must be FloatType textures\");\n    } else if (lut.format !== RGBAFormat4 || this.format !== RGBAFormat4) {\n      console.error(\"Both LUTs must be RGBA textures\");\n    } else {\n      const data0 = img0.data;\n      const data1 = img1.data;\n      const size = size0;\n      const sizeSq = size ** 2;\n      const s = size - 1;\n      for (let i = 0, l = size ** 3; i < l; ++i) {\n        const i4 = i * 4;\n        const r = data0[i4 + 0] * s;\n        const g = data0[i4 + 1] * s;\n        const b = data0[i4 + 2] * s;\n        const iRGB = Math.round(r + g * size + b * sizeSq) * 4;\n        data0[i4 + 0] = data1[iRGB + 0];\n        data0[i4 + 1] = data1[iRGB + 1];\n        data0[i4 + 2] = data1[iRGB + 2];\n      }\n      this.needsUpdate = true;\n    }\n    return this;\n  }\n  convertToUint8() {\n    if (this.type === FloatType5) {\n      const floatData = this.image.data;\n      const uint8Data = new Uint8Array(floatData.length);\n      for (let i = 0, l = floatData.length; i < l; ++i) {\n        uint8Data[i] = floatData[i] * 255 + 0.5;\n      }\n      this.image.data = uint8Data;\n      this.type = UnsignedByteType14;\n      this.needsUpdate = true;\n    }\n    return this;\n  }\n  convertToFloat() {\n    if (this.type === UnsignedByteType14) {\n      const uint8Data = this.image.data;\n      const floatData = new Float32Array(uint8Data.length);\n      for (let i = 0, l = uint8Data.length; i < l; ++i) {\n        floatData[i] = uint8Data[i] / 255;\n      }\n      this.image.data = floatData;\n      this.type = FloatType5;\n      this.needsUpdate = true;\n    }\n    return this;\n  }\n  convertToRGBA() {\n    console.warn(\"LookupTexture\", \"convertToRGBA() is deprecated, LUTs are now RGBA by default\");\n    return this;\n  }\n  convertLinearToSRGB() {\n    const data = this.image.data;\n    if (this.type === FloatType5) {\n      for (let i = 0, l = data.length; i < l; i += 4) {\n        c.fromArray(data, i).convertLinearToSRGB().toArray(data, i);\n      }\n      this.encoding = sRGBEncoding12;\n      this.needsUpdate = true;\n    } else {\n      console.error(\"Color space conversion requires FloatType data\");\n    }\n    return this;\n  }\n  convertSRGBToLinear() {\n    const data = this.image.data;\n    if (this.type === FloatType5) {\n      for (let i = 0, l = data.length; i < l; i += 4) {\n        c.fromArray(data, i).convertSRGBToLinear().toArray(data, i);\n      }\n      this.encoding = LinearEncoding4;\n      this.needsUpdate = true;\n    } else {\n      console.error(\"Color space conversion requires FloatType data\");\n    }\n    return this;\n  }\n  toDataTexture() {\n    const width = this.image.width;\n    const height = this.image.height * this.image.depth;\n    const texture = new DataTexture2(this.image.data, width, height);\n    texture.name = this.name;\n    texture.type = this.type;\n    texture.format = this.format;\n    texture.encoding = this.encoding;\n    texture.minFilter = LinearFilter3;\n    texture.magFilter = LinearFilter3;\n    texture.wrapS = this.wrapS;\n    texture.wrapT = this.wrapT;\n    texture.generateMipmaps = false;\n    texture.needsUpdate = true;\n    return texture;\n  }\n  static from(texture) {\n    const image = texture.image;\n    const { width, height } = image;\n    const size = Math.min(width, height);\n    let data;\n    if (image instanceof Image) {\n      const rawImageData = RawImageData.from(image);\n      const src = rawImageData.data;\n      if (width > height) {\n        data = new Uint8Array(src.length);\n        for (let z = 0; z < size; ++z) {\n          for (let y = 0; y < size; ++y) {\n            for (let x = 0; x < size; ++x) {\n              const i4 = (x + z * size + y * size * size) * 4;\n              const j4 = (x + y * size + z * size * size) * 4;\n              data[j4 + 0] = src[i4 + 0];\n              data[j4 + 1] = src[i4 + 1];\n              data[j4 + 2] = src[i4 + 2];\n              data[j4 + 3] = src[i4 + 3];\n            }\n          }\n        }\n      } else {\n        data = new Uint8Array(src.buffer);\n      }\n    } else {\n      data = image.data.slice();\n    }\n    const lut = new LookupTexture(data, size);\n    lut.encoding = texture.encoding;\n    lut.type = texture.type;\n    lut.name = texture.name;\n    return lut;\n  }\n  static createNeutral(size) {\n    const data = new Float32Array(size ** 3 * 4);\n    const sizeSq = size ** 2;\n    const s = 1 / (size - 1);\n    for (let r = 0; r < size; ++r) {\n      for (let g = 0; g < size; ++g) {\n        for (let b = 0; b < size; ++b) {\n          const i4 = (r + g * size + b * sizeSq) * 4;\n          data[i4 + 0] = r * s;\n          data[i4 + 1] = g * s;\n          data[i4 + 2] = b * s;\n          data[i4 + 3] = 1;\n        }\n      }\n    }\n    const lut = new LookupTexture(data, size);\n    lut.name = \"neutral\";\n    return lut;\n  }\n};\n\n// src/textures/lut/TetrahedralUpscaler.js\nvar P = [\n  new Float32Array(3),\n  new Float32Array(3)\n];\nvar C = [\n  new Float32Array(3),\n  new Float32Array(3),\n  new Float32Array(3),\n  new Float32Array(3)\n];\nvar T = [\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([1, 0, 0]),\n    new Float32Array([1, 1, 0]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([1, 0, 0]),\n    new Float32Array([1, 0, 1]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 0, 1]),\n    new Float32Array([1, 0, 1]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 1, 0]),\n    new Float32Array([1, 1, 0]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 1, 0]),\n    new Float32Array([0, 1, 1]),\n    new Float32Array([1, 1, 1])\n  ],\n  [\n    new Float32Array([0, 0, 0]),\n    new Float32Array([0, 0, 1]),\n    new Float32Array([0, 1, 1]),\n    new Float32Array([1, 1, 1])\n  ]\n];\nfunction calculateTetrahedronVolume(a, b, c2, d) {\n  const bcX = c2[0] - b[0];\n  const bcY = c2[1] - b[1];\n  const bcZ = c2[2] - b[2];\n  const baX = a[0] - b[0];\n  const baY = a[1] - b[1];\n  const baZ = a[2] - b[2];\n  const crossX = bcY * baZ - bcZ * baY;\n  const crossY = bcZ * baX - bcX * baZ;\n  const crossZ = bcX * baY - bcY * baX;\n  const length = Math.sqrt(crossX * crossX + crossY * crossY + crossZ * crossZ);\n  const triangleArea = length * 0.5;\n  const normalX = crossX / length;\n  const normalY = crossY / length;\n  const normalZ = crossZ / length;\n  const constant = -(a[0] * normalX + a[1] * normalY + a[2] * normalZ);\n  const dot = d[0] * normalX + d[1] * normalY + d[2] * normalZ;\n  const height = Math.abs(dot + constant);\n  return height * triangleArea / 3;\n}\nfunction sample(data, size, x, y, z, color2) {\n  const i4 = (x + y * size + z * size * size) * 4;\n  color2[0] = data[i4 + 0];\n  color2[1] = data[i4 + 1];\n  color2[2] = data[i4 + 2];\n}\nfunction tetrahedralSample(data, size, u, v3, w, color2) {\n  const px = u * (size - 1);\n  const py = v3 * (size - 1);\n  const pz = w * (size - 1);\n  const minX = Math.floor(px);\n  const minY = Math.floor(py);\n  const minZ = Math.floor(pz);\n  const maxX = Math.ceil(px);\n  const maxY = Math.ceil(py);\n  const maxZ = Math.ceil(pz);\n  const su = px - minX;\n  const sv = py - minY;\n  const sw = pz - minZ;\n  if (minX === px && minY === py && minZ === pz) {\n    sample(data, size, px, py, pz, color2);\n  } else {\n    let vertices;\n    if (su >= sv && sv >= sw) {\n      vertices = T[0];\n    } else if (su >= sw && sw >= sv) {\n      vertices = T[1];\n    } else if (sw >= su && su >= sv) {\n      vertices = T[2];\n    } else if (sv >= su && su >= sw) {\n      vertices = T[3];\n    } else if (sv >= sw && sw >= su) {\n      vertices = T[4];\n    } else if (sw >= sv && sv >= su) {\n      vertices = T[5];\n    }\n    const [P0, P1, P2, P3] = vertices;\n    const coords = P[0];\n    coords[0] = su;\n    coords[1] = sv;\n    coords[2] = sw;\n    const tmp = P[1];\n    const diffX = maxX - minX;\n    const diffY = maxY - minY;\n    const diffZ = maxZ - minZ;\n    tmp[0] = diffX * P0[0] + minX;\n    tmp[1] = diffY * P0[1] + minY;\n    tmp[2] = diffZ * P0[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[0]);\n    tmp[0] = diffX * P1[0] + minX;\n    tmp[1] = diffY * P1[1] + minY;\n    tmp[2] = diffZ * P1[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[1]);\n    tmp[0] = diffX * P2[0] + minX;\n    tmp[1] = diffY * P2[1] + minY;\n    tmp[2] = diffZ * P2[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[2]);\n    tmp[0] = diffX * P3[0] + minX;\n    tmp[1] = diffY * P3[1] + minY;\n    tmp[2] = diffZ * P3[2] + minZ;\n    sample(data, size, tmp[0], tmp[1], tmp[2], C[3]);\n    const V0 = calculateTetrahedronVolume(P1, P2, P3, coords) * 6;\n    const V1 = calculateTetrahedronVolume(P0, P2, P3, coords) * 6;\n    const V2 = calculateTetrahedronVolume(P0, P1, P3, coords) * 6;\n    const V3 = calculateTetrahedronVolume(P0, P1, P2, coords) * 6;\n    C[0][0] *= V0;\n    C[0][1] *= V0;\n    C[0][2] *= V0;\n    C[1][0] *= V1;\n    C[1][1] *= V1;\n    C[1][2] *= V1;\n    C[2][0] *= V2;\n    C[2][1] *= V2;\n    C[2][2] *= V2;\n    C[3][0] *= V3;\n    C[3][1] *= V3;\n    C[3][2] *= V3;\n    color2[0] = C[0][0] + C[1][0] + C[2][0] + C[3][0];\n    color2[1] = C[0][1] + C[1][1] + C[2][1] + C[3][1];\n    color2[2] = C[0][2] + C[1][2] + C[2][2] + C[3][2];\n  }\n}\nvar TetrahedralUpscaler = class {\n  static expand(data, size) {\n    const originalSize = Math.cbrt(data.length / 4);\n    const rgb = new Float32Array(3);\n    const array = new data.constructor(size ** 3 * 4);\n    const maxValue = data instanceof Uint8Array ? 255 : 1;\n    const sizeSq = size ** 2;\n    const s = 1 / (size - 1);\n    for (let z = 0; z < size; ++z) {\n      for (let y = 0; y < size; ++y) {\n        for (let x = 0; x < size; ++x) {\n          const u = x * s;\n          const v3 = y * s;\n          const w = z * s;\n          const i4 = Math.round(x + y * size + z * sizeSq) * 4;\n          tetrahedralSample(data, originalSize, u, v3, w, rgb);\n          array[i4 + 0] = rgb[0];\n          array[i4 + 1] = rgb[1];\n          array[i4 + 2] = rgb[2];\n          array[i4 + 3] = maxValue;\n        }\n      }\n    }\n    return array;\n  }\n};\n\n// src/textures/smaa/SMAAAreaImageData.js\nvar area = [\n  new Float32Array(2),\n  new Float32Array(2)\n];\nvar ORTHOGONAL_SIZE = 16;\nvar DIAGONAL_SIZE = 20;\nvar DIAGONAL_SAMPLES = 30;\nvar SMOOTH_MAX_DISTANCE = 32;\nvar orthogonalSubsamplingOffsets = new Float32Array([\n  0,\n  -0.25,\n  0.25,\n  -0.125,\n  0.125,\n  -0.375,\n  0.375\n]);\nvar diagonalSubsamplingOffsets = [\n  new Float32Array([0, 0]),\n  new Float32Array([0.25, -0.25]),\n  new Float32Array([-0.25, 0.25]),\n  new Float32Array([0.125, -0.125]),\n  new Float32Array([-0.125, 0.125])\n];\nvar orthogonalEdges = [\n  new Uint8Array([0, 0]),\n  new Uint8Array([3, 0]),\n  new Uint8Array([0, 3]),\n  new Uint8Array([3, 3]),\n  new Uint8Array([1, 0]),\n  new Uint8Array([4, 0]),\n  new Uint8Array([1, 3]),\n  new Uint8Array([4, 3]),\n  new Uint8Array([0, 1]),\n  new Uint8Array([3, 1]),\n  new Uint8Array([0, 4]),\n  new Uint8Array([3, 4]),\n  new Uint8Array([1, 1]),\n  new Uint8Array([4, 1]),\n  new Uint8Array([1, 4]),\n  new Uint8Array([4, 4])\n];\nvar diagonalEdges = [\n  new Uint8Array([0, 0]),\n  new Uint8Array([1, 0]),\n  new Uint8Array([0, 2]),\n  new Uint8Array([1, 2]),\n  new Uint8Array([2, 0]),\n  new Uint8Array([3, 0]),\n  new Uint8Array([2, 2]),\n  new Uint8Array([3, 2]),\n  new Uint8Array([0, 1]),\n  new Uint8Array([1, 1]),\n  new Uint8Array([0, 3]),\n  new Uint8Array([1, 3]),\n  new Uint8Array([2, 1]),\n  new Uint8Array([3, 1]),\n  new Uint8Array([2, 3]),\n  new Uint8Array([3, 3])\n];\nfunction lerp(a, b, p) {\n  return a + (b - a) * p;\n}\nfunction saturate(a) {\n  return Math.min(Math.max(a, 0), 1);\n}\nfunction smoothArea(d) {\n  const a1 = area[0];\n  const a2 = area[1];\n  const b1X = Math.sqrt(a1[0] * 2) * 0.5;\n  const b1Y = Math.sqrt(a1[1] * 2) * 0.5;\n  const b2X = Math.sqrt(a2[0] * 2) * 0.5;\n  const b2Y = Math.sqrt(a2[1] * 2) * 0.5;\n  const p = saturate(d / SMOOTH_MAX_DISTANCE);\n  a1[0] = lerp(b1X, a1[0], p);\n  a1[1] = lerp(b1Y, a1[1], p);\n  a2[0] = lerp(b2X, a2[0], p);\n  a2[1] = lerp(b2Y, a2[1], p);\n}\nfunction getOrthArea(p1X, p1Y, p2X, p2Y, x, result) {\n  const dX = p2X - p1X;\n  const dY = p2Y - p1Y;\n  const x1 = x;\n  const x2 = x + 1;\n  const y1 = p1Y + dY * (x1 - p1X) / dX;\n  const y2 = p1Y + dY * (x2 - p1X) / dX;\n  if (x1 >= p1X && x1 < p2X || x2 > p1X && x2 <= p2X) {\n    if (Math.sign(y1) === Math.sign(y2) || Math.abs(y1) < 1e-4 || Math.abs(y2) < 1e-4) {\n      const a = (y1 + y2) / 2;\n      if (a < 0) {\n        result[0] = Math.abs(a);\n        result[1] = 0;\n      } else {\n        result[0] = 0;\n        result[1] = Math.abs(a);\n      }\n    } else {\n      const t = -p1Y * dX / dY + p1X;\n      const tInt = Math.trunc(t);\n      const a1 = t > p1X ? y1 * (t - tInt) / 2 : 0;\n      const a2 = t < p2X ? y2 * (1 - (t - tInt)) / 2 : 0;\n      const a = Math.abs(a1) > Math.abs(a2) ? a1 : -a2;\n      if (a < 0) {\n        result[0] = Math.abs(a1);\n        result[1] = Math.abs(a2);\n      } else {\n        result[0] = Math.abs(a2);\n        result[1] = Math.abs(a1);\n      }\n    }\n  } else {\n    result[0] = 0;\n    result[1] = 0;\n  }\n  return result;\n}\nfunction getOrthAreaForPattern(pattern, left, right, offset, result) {\n  const a1 = area[0];\n  const a2 = area[1];\n  const o1 = 0.5 + offset;\n  const o2 = 0.5 + offset - 1;\n  const d = left + right + 1;\n  switch (pattern) {\n    case 0: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n    case 1: {\n      if (left <= right) {\n        getOrthArea(0, o2, d / 2, 0, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 2: {\n      if (left >= right) {\n        getOrthArea(d / 2, 0, d, o2, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 3: {\n      getOrthArea(0, o2, d / 2, 0, left, a1);\n      getOrthArea(d / 2, 0, d, o2, left, a2);\n      smoothArea(d, area);\n      result[0] = a1[0] + a2[0];\n      result[1] = a1[1] + a2[1];\n      break;\n    }\n    case 4: {\n      if (left <= right) {\n        getOrthArea(0, o1, d / 2, 0, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 5: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n    case 6: {\n      if (Math.abs(offset) > 0) {\n        getOrthArea(0, o1, d, o2, left, a1);\n        getOrthArea(0, o1, d / 2, 0, left, a2);\n        getOrthArea(d / 2, 0, d, o2, left, result);\n        a2[0] = a2[0] + result[0];\n        a2[1] = a2[1] + result[1];\n        result[0] = (a1[0] + a2[0]) / 2;\n        result[1] = (a1[1] + a2[1]) / 2;\n      } else {\n        getOrthArea(0, o1, d, o2, left, result);\n      }\n      break;\n    }\n    case 7: {\n      getOrthArea(0, o1, d, o2, left, result);\n      break;\n    }\n    case 8: {\n      if (left >= right) {\n        getOrthArea(d / 2, 0, d, o1, left, result);\n      } else {\n        result[0] = 0;\n        result[1] = 0;\n      }\n      break;\n    }\n    case 9: {\n      if (Math.abs(offset) > 0) {\n        getOrthArea(0, o2, d, o1, left, a1);\n        getOrthArea(0, o2, d / 2, 0, left, a2);\n        getOrthArea(d / 2, 0, d, o1, left, result);\n        a2[0] = a2[0] + result[0];\n        a2[1] = a2[1] + result[1];\n        result[0] = (a1[0] + a2[0]) / 2;\n        result[1] = (a1[1] + a2[1]) / 2;\n      } else {\n        getOrthArea(0, o2, d, o1, left, result);\n      }\n      break;\n    }\n    case 10: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n    case 11: {\n      getOrthArea(0, o2, d, o1, left, result);\n      break;\n    }\n    case 12: {\n      getOrthArea(0, o1, d / 2, 0, left, a1);\n      getOrthArea(d / 2, 0, d, o1, left, a2);\n      smoothArea(d, area);\n      result[0] = a1[0] + a2[0];\n      result[1] = a1[1] + a2[1];\n      break;\n    }\n    case 13: {\n      getOrthArea(0, o2, d, o1, left, result);\n      break;\n    }\n    case 14: {\n      getOrthArea(0, o1, d, o2, left, result);\n      break;\n    }\n    case 15: {\n      result[0] = 0;\n      result[1] = 0;\n      break;\n    }\n  }\n  return result;\n}\nfunction isInsideArea(a1X, a1Y, a2X, a2Y, x, y) {\n  let result = a1X === a2X && a1Y === a2Y;\n  if (!result) {\n    const xm = (a1X + a2X) / 2;\n    const ym = (a1Y + a2Y) / 2;\n    const a = a2Y - a1Y;\n    const b = a1X - a2X;\n    const c2 = a * (x - xm) + b * (y - ym);\n    result = c2 > 0;\n  }\n  return result;\n}\nfunction getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, pX, pY) {\n  let n = 0;\n  for (let y = 0; y < DIAGONAL_SAMPLES; ++y) {\n    for (let x = 0; x < DIAGONAL_SAMPLES; ++x) {\n      const offsetX = x / (DIAGONAL_SAMPLES - 1);\n      const offsetY = y / (DIAGONAL_SAMPLES - 1);\n      if (isInsideArea(a1X, a1Y, a2X, a2Y, pX + offsetX, pY + offsetY)) {\n        ++n;\n      }\n    }\n  }\n  return n / (DIAGONAL_SAMPLES * DIAGONAL_SAMPLES);\n}\nfunction getDiagArea(pattern, a1X, a1Y, a2X, a2Y, left, offset, result) {\n  const e = diagonalEdges[pattern];\n  const e1 = e[0];\n  const e2 = e[1];\n  if (e1 > 0) {\n    a1X += offset[0];\n    a1Y += offset[1];\n  }\n  if (e2 > 0) {\n    a2X += offset[0];\n    a2Y += offset[1];\n  }\n  result[0] = 1 - getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, 1 + left, 0 + left);\n  result[1] = getDiagAreaForPixel(a1X, a1Y, a2X, a2Y, 1 + left, 1 + left);\n  return result;\n}\nfunction getDiagAreaForPattern(pattern, left, right, offset, result) {\n  const a1 = area[0];\n  const a2 = area[1];\n  const d = left + right + 1;\n  switch (pattern) {\n    case 0: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 1: {\n      getDiagArea(pattern, 1, 0, 0 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 2: {\n      getDiagArea(pattern, 0, 0, 1 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 3: {\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, result);\n      break;\n    }\n    case 4: {\n      getDiagArea(pattern, 1, 1, 0 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 5: {\n      getDiagArea(pattern, 1, 1, 0 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 6: {\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, result);\n      break;\n    }\n    case 7: {\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 8: {\n      getDiagArea(pattern, 0, 0, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 9: {\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, result);\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, result);\n      break;\n    }\n    case 10: {\n      getDiagArea(pattern, 0, 0, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 11: {\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 12: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, result);\n      break;\n    }\n    case 13: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 1 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 14: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 1, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n    case 15: {\n      getDiagArea(pattern, 1, 1, 1 + d, 1 + d, left, offset, a1);\n      getDiagArea(pattern, 1, 0, 1 + d, 0 + d, left, offset, a2);\n      result[0] = (a1[0] + a2[0]) / 2;\n      result[1] = (a1[1] + a2[1]) / 2;\n      break;\n    }\n  }\n  return result;\n}\nfunction generatePatterns(patterns, offset, orthogonal) {\n  const result = new Float32Array(2);\n  for (let i = 0, l = patterns.length; i < l; ++i) {\n    const pattern = patterns[i];\n    const data = pattern.data;\n    const size = pattern.width;\n    for (let y = 0; y < size; ++y) {\n      for (let x = 0; x < size; ++x) {\n        if (orthogonal) {\n          getOrthAreaForPattern(i, x, y, offset, result);\n        } else {\n          getDiagAreaForPattern(i, x, y, offset, result);\n        }\n        const c2 = (y * size + x) * 2;\n        data[c2] = result[0] * 255;\n        data[c2 + 1] = result[1] * 255;\n      }\n    }\n  }\n}\nfunction assemble(baseX, baseY, patterns, edges2, size, orthogonal, target) {\n  const dstData = target.data;\n  const dstWidth = target.width;\n  for (let i = 0, l = patterns.length; i < l; ++i) {\n    const edge = edges2[i];\n    const pattern = patterns[i];\n    const srcData = pattern.data;\n    const srcWidth = pattern.width;\n    for (let y = 0; y < size; ++y) {\n      for (let x = 0; x < size; ++x) {\n        const pX = edge[0] * size + baseX + x;\n        const pY = edge[1] * size + baseY + y;\n        const c2 = (pY * dstWidth + pX) * 4;\n        const d = orthogonal ? (y * y * srcWidth + x * x) * 2 : (y * srcWidth + x) * 2;\n        dstData[c2] = srcData[d];\n        dstData[c2 + 1] = srcData[d + 1];\n        dstData[c2 + 2] = 0;\n        dstData[c2 + 3] = 255;\n      }\n    }\n  }\n}\nvar SMAAAreaImageData = class {\n  static generate() {\n    const width = 2 * 5 * ORTHOGONAL_SIZE;\n    const height = orthogonalSubsamplingOffsets.length * 5 * ORTHOGONAL_SIZE;\n    const data = new Uint8ClampedArray(width * height * 4);\n    const result = new RawImageData(width, height, data);\n    const orthPatternSize = Math.pow(ORTHOGONAL_SIZE - 1, 2) + 1;\n    const diagPatternSize = DIAGONAL_SIZE;\n    const orthogonalPatterns = [];\n    const diagonalPatterns = [];\n    for (let i = 3, l = data.length; i < l; i += 4) {\n      data[i] = 255;\n    }\n    for (let i = 0; i < 16; ++i) {\n      orthogonalPatterns.push(new RawImageData(orthPatternSize, orthPatternSize, new Uint8ClampedArray(orthPatternSize * orthPatternSize * 2), 2));\n      diagonalPatterns.push(new RawImageData(diagPatternSize, diagPatternSize, new Uint8ClampedArray(diagPatternSize * diagPatternSize * 2), 2));\n    }\n    for (let i = 0, l = orthogonalSubsamplingOffsets.length; i < l; ++i) {\n      generatePatterns(orthogonalPatterns, orthogonalSubsamplingOffsets[i], true);\n      assemble(0, 5 * ORTHOGONAL_SIZE * i, orthogonalPatterns, orthogonalEdges, ORTHOGONAL_SIZE, true, result);\n    }\n    for (let i = 0, l = diagonalSubsamplingOffsets.length; i < l; ++i) {\n      generatePatterns(diagonalPatterns, diagonalSubsamplingOffsets[i], false);\n      assemble(5 * ORTHOGONAL_SIZE, 4 * DIAGONAL_SIZE * i, diagonalPatterns, diagonalEdges, DIAGONAL_SIZE, false, result);\n    }\n    return result;\n  }\n};\n\n// src/textures/smaa/SMAAImageGenerator.js\nimport { LoadingManager } from \"three\";\n\n// tmp/smaa/worker.txt\nvar worker_default2 = '\"use strict\";(()=>{function q(t,a,s){let e=document.createElement(\"canvas\"),n=e.getContext(\"2d\");if(e.width=t,e.height=a,s instanceof Image)n.drawImage(s,0,0);else{let r=n.createImageData(t,a);r.data.set(s),n.putImageData(r,0,0)}return e}var m=class{constructor(a=0,s=0,e=null){this.width=a,this.height=s,this.data=e}toCanvas(){return typeof document==\"undefined\"?null:q(this.width,this.height,this.data)}static from(a){let{width:s,height:e}=a,n;if(a instanceof Image){let r=q(s,e,a);r!==null&&(n=r.getContext(\"2d\").getImageData(0,0,s,e).data)}else n=a.data;return new m(s,e,n)}};var M=[new Float32Array(2),new Float32Array(2)],D=16,W=20,I=30,j=32,v=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),N=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],z=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],R=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function C(t,a,s){return t+(a-t)*s}function B(t){return Math.min(Math.max(t,0),1)}function _(t){let a=M[0],s=M[1],e=Math.sqrt(a[0]*2)*.5,n=Math.sqrt(a[1]*2)*.5,r=Math.sqrt(s[0]*2)*.5,o=Math.sqrt(s[1]*2)*.5,c=B(t/j);a[0]=C(e,a[0],c),a[1]=C(n,a[1],c),s[0]=C(r,s[0],c),s[1]=C(o,s[1],c)}function d(t,a,s,e,n,r){let o=s-t,c=e-a,h=n,i=n+1,w=a+c*(h-t)/o,g=a+c*(i-t)/o;if(h>=t&&h<s||i>t&&i<=s)if(Math.sign(w)===Math.sign(g)||Math.abs(w)<1e-4||Math.abs(g)<1e-4){let b=(w+g)/2;b<0?(r[0]=Math.abs(b),r[1]=0):(r[0]=0,r[1]=Math.abs(b))}else{let b=-a*o/c+t,F=Math.trunc(b),k=b>t?w*(b-F)/2:0,U=b<s?g*(1-(b-F))/2:0;(Math.abs(k)>Math.abs(U)?k:-U)<0?(r[0]=Math.abs(k),r[1]=Math.abs(U)):(r[0]=Math.abs(U),r[1]=Math.abs(k))}else r[0]=0,r[1]=0;return r}function J(t,a,s,e,n){let r=M[0],o=M[1],c=.5+e,h=.5+e-1,i=a+s+1;switch(t){case 0:{n[0]=0,n[1]=0;break}case 1:{a<=s?d(0,h,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 2:{a>=s?d(i/2,0,i,h,a,n):(n[0]=0,n[1]=0);break}case 3:{d(0,h,i/2,0,a,r),d(i/2,0,i,h,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 4:{a<=s?d(0,c,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 5:{n[0]=0,n[1]=0;break}case 6:{Math.abs(e)>0?(d(0,c,i,h,a,r),d(0,c,i/2,0,a,o),d(i/2,0,i,h,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,c,i,h,a,n);break}case 7:{d(0,c,i,h,a,n);break}case 8:{a>=s?d(i/2,0,i,c,a,n):(n[0]=0,n[1]=0);break}case 9:{Math.abs(e)>0?(d(0,h,i,c,a,r),d(0,h,i/2,0,a,o),d(i/2,0,i,c,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,h,i,c,a,n);break}case 10:{n[0]=0,n[1]=0;break}case 11:{d(0,h,i,c,a,n);break}case 12:{d(0,c,i/2,0,a,r),d(i/2,0,i,c,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 13:{d(0,h,i,c,a,n);break}case 14:{d(0,c,i,h,a,n);break}case 15:{n[0]=0,n[1]=0;break}}return n}function K(t,a,s,e,n,r){let o=t===s&&a===e;if(!o){let c=(t+s)/2,h=(a+e)/2,i=e-a,w=t-s;o=i*(n-c)+w*(r-h)>0}return o}function G(t,a,s,e,n,r){let o=0;for(let c=0;c<I;++c)for(let h=0;h<I;++h){let i=h/(I-1),w=c/(I-1);K(t,a,s,e,n+i,r+w)&&++o}return o/(I*I)}function A(t,a,s,e,n,r,o,c){let h=R[t],i=h[0],w=h[1];return i>0&&(a+=o[0],s+=o[1]),w>0&&(e+=o[0],n+=o[1]),c[0]=1-G(a,s,e,n,1+r,0+r),c[1]=G(a,s,e,n,1+r,1+r),c}function Q(t,a,s,e,n){let r=M[0],o=M[1],c=a+s+1;switch(t){case 0:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 1:{A(t,1,0,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 2:{A(t,0,0,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 3:{A(t,1,0,1+c,0+c,a,e,n);break}case 4:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 5:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 6:{A(t,1,1,1+c,0+c,a,e,n);break}case 7:{A(t,1,1,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 8:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 9:{A(t,1,0,1+c,1+c,a,e,n),A(t,1,0,1+c,1+c,a,e,n);break}case 10:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 11:{A(t,1,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 12:{A(t,1,1,1+c,1+c,a,e,n);break}case 13:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 14:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 15:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}}return n}function T(t,a,s){let e=new Float32Array(2);for(let n=0,r=t.length;n<r;++n){let o=t[n],c=o.data,h=o.width;for(let i=0;i<h;++i)for(let w=0;w<h;++w){s?J(n,w,i,a,e):Q(n,w,i,a,e);let g=(i*h+w)*2;c[g]=e[0]*255,c[g+1]=e[1]*255}}}function p(t,a,s,e,n,r,o){let c=o.data,h=o.width;for(let i=0,w=s.length;i<w;++i){let g=e[i],b=s[i],F=b.data,k=b.width;for(let U=0;U<n;++U)for(let x=0;x<n;++x){let Z=g[0]*n+t+x,O=((g[1]*n+a+U)*h+Z)*4,L=r?(U*U*k+x*x)*2:(U*k+x)*2;c[O]=F[L],c[O+1]=F[L+1],c[O+2]=0,c[O+3]=255}}}var S=class{static generate(){let a=10*D,s=v.length*5*D,e=new Uint8ClampedArray(a*s*4),n=new m(a,s,e),r=Math.pow(D-1,2)+1,o=W,c=[],h=[];for(let i=3,w=e.length;i<w;i+=4)e[i]=255;for(let i=0;i<16;++i)c.push(new m(r,r,new Uint8ClampedArray(r*r*2),2)),h.push(new m(o,o,new Uint8ClampedArray(o*o*2),2));for(let i=0,w=v.length;i<w;++i)T(c,v[i],!0),p(0,5*D*i,c,z,D,!0,n);for(let i=0,w=N.length;i<w;++i)T(h,N[i],!1),p(5*D,4*W*i,h,R,W,!1,n);return n}};var P=new Map([[y(0,0,0,0),new Float32Array([0,0,0,0])],[y(0,0,0,1),new Float32Array([0,0,0,1])],[y(0,0,1,0),new Float32Array([0,0,1,0])],[y(0,0,1,1),new Float32Array([0,0,1,1])],[y(0,1,0,0),new Float32Array([0,1,0,0])],[y(0,1,0,1),new Float32Array([0,1,0,1])],[y(0,1,1,0),new Float32Array([0,1,1,0])],[y(0,1,1,1),new Float32Array([0,1,1,1])],[y(1,0,0,0),new Float32Array([1,0,0,0])],[y(1,0,0,1),new Float32Array([1,0,0,1])],[y(1,0,1,0),new Float32Array([1,0,1,0])],[y(1,0,1,1),new Float32Array([1,0,1,1])],[y(1,1,0,0),new Float32Array([1,1,0,0])],[y(1,1,0,1),new Float32Array([1,1,0,1])],[y(1,1,1,0),new Float32Array([1,1,1,0])],[y(1,1,1,1),new Float32Array([1,1,1,1])]]);function H(t,a,s){return t+(a-t)*s}function y(t,a,s,e){let n=H(t,a,.75),r=H(s,e,1-.25);return H(n,r,1-.125)}function V(t,a){let s=0;return a[3]===1&&(s+=1),s===1&&a[2]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s}function $(t,a){let s=0;return a[3]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s===1&&a[2]===1&&t[0]!==1&&t[2]!==1&&(s+=1),s}var E=class{static generate(){let o=new Uint8ClampedArray(2178),c=new Uint8ClampedArray(64*16*4);for(let h=0;h<33;++h)for(let i=0;i<66;++i){let w=.03125*i,g=.03125*h;if(P.has(w)&&P.has(g)){let b=P.get(w),F=P.get(g),k=h*66+i;o[k]=127*V(b,F),o[k+33]=127*$(b,F)}}for(let h=0,i=33-16;i<33;++i)for(let w=0;w<64;++w,h+=4)c[h]=o[i*66+w],c[h+3]=255;return new m(64,16,c)}};self.addEventListener(\"message\",t=>{let a=S.generate(),s=E.generate();postMessage({areaImageData:a,searchImageData:s},[a.data.buffer,s.data.buffer]),close()});})();\\n';\n\n// src/textures/smaa/SMAAImageGenerator.js\nfunction generate(useCache = true) {\n  const workerURL = URL.createObjectURL(new Blob([worker_default2], {\n    type: \"text/javascript\"\n  }));\n  const worker = new Worker(workerURL);\n  URL.revokeObjectURL(workerURL);\n  return new Promise((resolve, reject) => {\n    worker.addEventListener(\"error\", (event) => reject(event.error));\n    worker.addEventListener(\"message\", (event) => {\n      const searchImageData = RawImageData.from(event.data.searchImageData);\n      const areaImageData = RawImageData.from(event.data.areaImageData);\n      const urls = [\n        searchImageData.toCanvas().toDataURL(\"image/png\", 1),\n        areaImageData.toCanvas().toDataURL(\"image/png\", 1)\n      ];\n      if (useCache) {\n        localStorage.setItem(\"smaa-search\", urls[0]);\n        localStorage.setItem(\"smaa-area\", urls[1]);\n      }\n      resolve(urls);\n    });\n    worker.postMessage(null);\n  });\n}\nvar SMAAImageGenerator = class {\n  constructor() {\n    this.disableCache = false;\n  }\n  setCacheEnabled(value) {\n    this.disableCache = !value;\n  }\n  generate() {\n    const useCache = !this.disableCache && window.localStorage !== void 0;\n    const cachedURLs = useCache ? [\n      localStorage.getItem(\"smaa-search\"),\n      localStorage.getItem(\"smaa-area\")\n    ] : [null, null];\n    const promise = cachedURLs[0] !== null && cachedURLs[1] !== null ? Promise.resolve(cachedURLs) : generate(useCache);\n    return promise.then((urls) => {\n      return new Promise((resolve, reject) => {\n        const searchImage = new Image();\n        const areaImage = new Image();\n        const manager = new LoadingManager();\n        manager.onLoad = () => resolve([searchImage, areaImage]);\n        manager.onError = reject;\n        searchImage.addEventListener(\"error\", (e) => manager.itemError(\"smaa-search\"));\n        areaImage.addEventListener(\"error\", (e) => manager.itemError(\"smaa-area\"));\n        searchImage.addEventListener(\"load\", () => manager.itemEnd(\"smaa-search\"));\n        areaImage.addEventListener(\"load\", () => manager.itemEnd(\"smaa-area\"));\n        manager.itemStart(\"smaa-search\");\n        manager.itemStart(\"smaa-area\");\n        searchImage.src = urls[0];\n        areaImage.src = urls[1];\n      });\n    });\n  }\n};\n\n// src/textures/smaa/SMAASearchImageData.js\nvar edges = /* @__PURE__ */ new Map([\n  [bilinear(0, 0, 0, 0), new Float32Array([0, 0, 0, 0])],\n  [bilinear(0, 0, 0, 1), new Float32Array([0, 0, 0, 1])],\n  [bilinear(0, 0, 1, 0), new Float32Array([0, 0, 1, 0])],\n  [bilinear(0, 0, 1, 1), new Float32Array([0, 0, 1, 1])],\n  [bilinear(0, 1, 0, 0), new Float32Array([0, 1, 0, 0])],\n  [bilinear(0, 1, 0, 1), new Float32Array([0, 1, 0, 1])],\n  [bilinear(0, 1, 1, 0), new Float32Array([0, 1, 1, 0])],\n  [bilinear(0, 1, 1, 1), new Float32Array([0, 1, 1, 1])],\n  [bilinear(1, 0, 0, 0), new Float32Array([1, 0, 0, 0])],\n  [bilinear(1, 0, 0, 1), new Float32Array([1, 0, 0, 1])],\n  [bilinear(1, 0, 1, 0), new Float32Array([1, 0, 1, 0])],\n  [bilinear(1, 0, 1, 1), new Float32Array([1, 0, 1, 1])],\n  [bilinear(1, 1, 0, 0), new Float32Array([1, 1, 0, 0])],\n  [bilinear(1, 1, 0, 1), new Float32Array([1, 1, 0, 1])],\n  [bilinear(1, 1, 1, 0), new Float32Array([1, 1, 1, 0])],\n  [bilinear(1, 1, 1, 1), new Float32Array([1, 1, 1, 1])]\n]);\nfunction lerp2(a, b, p) {\n  return a + (b - a) * p;\n}\nfunction bilinear(e0, e1, e2, e3) {\n  const a = lerp2(e0, e1, 1 - 0.25);\n  const b = lerp2(e2, e3, 1 - 0.25);\n  return lerp2(a, b, 1 - 0.125);\n}\nfunction deltaLeft(left, top) {\n  let d = 0;\n  if (top[3] === 1) {\n    d += 1;\n  }\n  if (d === 1 && top[2] === 1 && left[1] !== 1 && left[3] !== 1) {\n    d += 1;\n  }\n  return d;\n}\nfunction deltaRight(left, top) {\n  let d = 0;\n  if (top[3] === 1 && left[1] !== 1 && left[3] !== 1) {\n    d += 1;\n  }\n  if (d === 1 && top[2] === 1 && left[0] !== 1 && left[2] !== 1) {\n    d += 1;\n  }\n  return d;\n}\nvar SMAASearchImageData = class {\n  static generate() {\n    const width = 66;\n    const height = 33;\n    const halfWidth = width / 2;\n    const croppedWidth = 64;\n    const croppedHeight = 16;\n    const data = new Uint8ClampedArray(width * height);\n    const croppedData = new Uint8ClampedArray(croppedWidth * croppedHeight * 4);\n    for (let y = 0; y < height; ++y) {\n      for (let x = 0; x < width; ++x) {\n        const s = 0.03125 * x;\n        const t = 0.03125 * y;\n        if (edges.has(s) && edges.has(t)) {\n          const e1 = edges.get(s);\n          const e2 = edges.get(t);\n          const i = y * width + x;\n          data[i] = 127 * deltaLeft(e1, e2);\n          data[i + halfWidth] = 127 * deltaRight(e1, e2);\n        }\n      }\n    }\n    for (let i = 0, y = height - croppedHeight; y < height; ++y) {\n      for (let x = 0; x < croppedWidth; ++x, i += 4) {\n        croppedData[i] = data[y * width + x];\n        croppedData[i + 3] = 255;\n      }\n    }\n    return new RawImageData(croppedWidth, croppedHeight, croppedData);\n  }\n};\n\n// src/effects/glsl/lut-3d.frag\nvar lut_3d_default = \"uniform vec3 scale;uniform vec3 offset;\\n#ifdef CUSTOM_INPUT_DOMAIN\\nuniform vec3 domainMin;uniform vec3 domainMax;\\n#endif\\n#ifdef LUT_3D\\n#ifdef LUT_PRECISION_HIGH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler3D lut;\\n#else\\nuniform mediump sampler3D lut;\\n#endif\\n#else\\nuniform lowp sampler3D lut;\\n#endif\\nvec4 applyLUT(const in vec3 rgb){\\n#ifdef TETRAHEDRAL_INTERPOLATION\\nvec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);\\n#else\\nreturn texture(lut,rgb);\\n#endif\\n}\\n#else\\n#ifdef LUT_PRECISION_HIGH\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D lut;\\n#else\\nuniform mediump sampler2D lut;\\n#endif\\n#else\\nuniform lowp sampler2D lut;\\n#endif\\nvec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);\\n#ifdef LUT_STRIP_HORIZONTAL\\nfloat xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);\\n#else\\nfloat yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);\\n#endif\\nvec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;\\n#ifdef CUSTOM_INPUT_DOMAIN\\nif(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}\\n#else\\n#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)\\nc=clamp(c,0.0,1.0);\\n#endif\\nc=applyLUT(scale*c+offset).rgb;\\n#endif\\noutputColor=vec4(c,inputColor.a);}\";\n\n// src/effects/LUT3DEffect.js\nvar LUT3DEffect = class extends Effect {\n  constructor(lut, {\n    blendFunction = BlendFunction.SRC,\n    tetrahedralInterpolation = false,\n    inputEncoding = sRGBEncoding13\n  } = {}) {\n    super(\"LUT3DEffect\", lut_3d_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"lut\", new Uniform35(null)],\n        [\"scale\", new Uniform35(new Vector34())],\n        [\"offset\", new Uniform35(new Vector34())],\n        [\"domainMin\", new Uniform35(null)],\n        [\"domainMax\", new Uniform35(null)]\n      ])\n    });\n    this.tetrahedralInterpolation = tetrahedralInterpolation;\n    this.inputColorSpace = inputEncoding;\n    this.lut = lut;\n  }\n  get inputEncoding() {\n    return this.inputColorSpace;\n  }\n  set inputEncoding(value) {\n    this.inputColorSpace = value;\n  }\n  getInputEncoding() {\n    return this.inputColorSpace;\n  }\n  setInputEncoding(value) {\n    this.inputColorSpace = value;\n  }\n  getOutputEncoding() {\n    return this.outputColorSpace;\n  }\n  get lut() {\n    return this.uniforms.get(\"lut\").value;\n  }\n  set lut(value) {\n    const defines = this.defines;\n    const uniforms = this.uniforms;\n    if (this.lut !== value) {\n      uniforms.get(\"lut\").value = value;\n      if (value !== null) {\n        const image = value.image;\n        const tetrahedralInterpolation = this.tetrahedralInterpolation;\n        defines.clear();\n        defines.set(\"LUT_SIZE\", Math.min(image.width, image.height).toFixed(16));\n        defines.set(\"LUT_TEXEL_WIDTH\", (1 / image.width).toFixed(16));\n        defines.set(\"LUT_TEXEL_HEIGHT\", (1 / image.height).toFixed(16));\n        uniforms.get(\"domainMin\").value = null;\n        uniforms.get(\"domainMax\").value = null;\n        if (value.type === FloatType6 || value.type === HalfFloatType2) {\n          defines.set(\"LUT_PRECISION_HIGH\", \"1\");\n        }\n        if (image.width > image.height) {\n          defines.set(\"LUT_STRIP_HORIZONTAL\", \"1\");\n        } else if (value instanceof DataTexture3D2) {\n          defines.set(\"LUT_3D\", \"1\");\n        }\n        if (value instanceof LookupTexture) {\n          const min = value.domainMin;\n          const max = value.domainMax;\n          if (min.x !== 0 || min.y !== 0 || min.z !== 0 || max.x !== 1 || max.y !== 1 || max.z !== 1) {\n            defines.set(\"CUSTOM_INPUT_DOMAIN\", \"1\");\n            uniforms.get(\"domainMin\").value = min.clone();\n            uniforms.get(\"domainMax\").value = max.clone();\n          }\n        }\n        this.tetrahedralInterpolation = tetrahedralInterpolation;\n      }\n    }\n  }\n  getLUT() {\n    return this.lut;\n  }\n  setLUT(value) {\n    this.lut = value;\n  }\n  updateScaleOffset() {\n    const lut = this.lut;\n    if (lut !== null) {\n      const size = Math.min(lut.image.width, lut.image.height);\n      const scale = this.uniforms.get(\"scale\").value;\n      const offset = this.uniforms.get(\"offset\").value;\n      if (this.tetrahedralInterpolation && lut instanceof DataTexture3D2) {\n        if (this.defines.has(\"CUSTOM_INPUT_DOMAIN\")) {\n          const domainScale = lut.domainMax.clone().sub(lut.domainMin);\n          scale.setScalar(size - 1).divide(domainScale);\n          offset.copy(lut.domainMin).negate().multiply(scale);\n        } else {\n          scale.setScalar(size - 1);\n          offset.setScalar(0);\n        }\n      } else {\n        if (this.defines.has(\"CUSTOM_INPUT_DOMAIN\")) {\n          const domainScale = lut.domainMax.clone().sub(lut.domainMin).multiplyScalar(size);\n          scale.setScalar(size - 1).divide(domainScale);\n          offset.copy(lut.domainMin).negate().multiply(scale).addScalar(1 / (2 * size));\n        } else {\n          scale.setScalar((size - 1) / size);\n          offset.setScalar(1 / (2 * size));\n        }\n      }\n    }\n  }\n  configureTetrahedralInterpolation() {\n    const lut = this.lut;\n    if (lut !== null) {\n      lut.minFilter = LinearFilter4;\n      lut.magFilter = LinearFilter4;\n      if (this.tetrahedralInterpolation) {\n        if (lut instanceof DataTexture3D2) {\n          lut.minFilter = NearestFilter7;\n          lut.magFilter = NearestFilter7;\n        } else {\n          console.warn(\"Tetrahedral interpolation requires a 3D texture\");\n        }\n      }\n      if (lut.source === void 0) {\n        lut.needsUpdate = true;\n      }\n    }\n  }\n  get tetrahedralInterpolation() {\n    return this.defines.has(\"TETRAHEDRAL_INTERPOLATION\");\n  }\n  set tetrahedralInterpolation(value) {\n    if (value) {\n      this.defines.set(\"TETRAHEDRAL_INTERPOLATION\", \"1\");\n    } else {\n      this.defines.delete(\"TETRAHEDRAL_INTERPOLATION\");\n    }\n    this.configureTetrahedralInterpolation();\n    this.updateScaleOffset();\n    this.setChanged();\n  }\n  setTetrahedralInterpolationEnabled(value) {\n    this.tetrahedralInterpolation = value;\n  }\n};\n\n// src/effects/glsl/noise.frag\nvar noise_default = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\\n#ifdef PREMULTIPLY\\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\\n#else\\noutputColor=vec4(noise,inputColor.a);\\n#endif\\n}\";\n\n// src/effects/NoiseEffect.js\nvar NoiseEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.SCREEN, premultiply = false } = {}) {\n    super(\"NoiseEffect\", noise_default, { blendFunction });\n    this.premultiply = premultiply;\n  }\n  get premultiply() {\n    return this.defines.has(\"PREMULTIPLY\");\n  }\n  set premultiply(value) {\n    if (this.premultiply !== value) {\n      if (value) {\n        this.defines.set(\"PREMULTIPLY\", \"1\");\n      } else {\n        this.defines.delete(\"PREMULTIPLY\");\n      }\n      this.setChanged();\n    }\n  }\n  isPremultiplied() {\n    return this.premultiply;\n  }\n  setPremultiplied(value) {\n    this.premultiply = value;\n  }\n};\n\n// src/effects/OutlineEffect.js\nimport { Color as Color6, RepeatWrapping as RepeatWrapping2, Uniform as Uniform36, UnsignedByteType as UnsignedByteType15, WebGLRenderTarget as WebGLRenderTarget15 } from \"three\";\n\n// src/effects/glsl/outline.frag\nvar outline_default3 = \"uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\\n#ifdef USE_PATTERN\\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\\n#ifndef X_RAY\\nedge.y=0.0;\\n#endif\\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\\n#ifdef USE_PATTERN\\nvec4 patternColor=texelToLinear(texture2D(patternTexture,vUvPattern));\\n#ifdef X_RAY\\nfloat hiddenFactor=0.5;\\n#else\\nfloat hiddenFactor=0.0;\\n#endif\\nvisibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\\n#endif\\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\\n#ifdef ALPHA\\noutputColor=vec4(color,alpha);\\n#else\\noutputColor=vec4(color,max(alpha,inputColor.a));\\n#endif\\n}\";\n\n// src/effects/glsl/outline.vert\nvar outline_default4 = \"uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}\";\n\n// src/effects/OutlineEffect.js\nvar OutlineEffect = class extends Effect {\n  constructor(scene, camera, {\n    blendFunction = BlendFunction.SCREEN,\n    patternTexture = null,\n    patternScale = 1,\n    edgeStrength = 1,\n    pulseSpeed = 0,\n    visibleEdgeColor = 16777215,\n    hiddenEdgeColor = 2230538,\n    kernelSize = KernelSize.VERY_SMALL,\n    blur = false,\n    xRay = true,\n    resolutionScale = 0.5,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"OutlineEffect\", outline_default3, {\n      uniforms: /* @__PURE__ */ new Map([\n        [\"maskTexture\", new Uniform36(null)],\n        [\"edgeTexture\", new Uniform36(null)],\n        [\"edgeStrength\", new Uniform36(edgeStrength)],\n        [\"visibleEdgeColor\", new Uniform36(new Color6(visibleEdgeColor))],\n        [\"hiddenEdgeColor\", new Uniform36(new Color6(hiddenEdgeColor))],\n        [\"pulse\", new Uniform36(1)],\n        [\"patternScale\", new Uniform36(patternScale)],\n        [\"patternTexture\", new Uniform36(null)]\n      ])\n    });\n    this.blendMode.addEventListener(\"change\", (event) => {\n      if (this.blendMode.getBlendFunction() === BlendFunction.ALPHA) {\n        this.defines.set(\"ALPHA\", \"1\");\n      } else {\n        this.defines.delete(\"ALPHA\");\n      }\n      this.setChanged();\n    });\n    this.blendMode.setBlendFunction(blendFunction);\n    this.patternTexture = patternTexture;\n    this.xRay = xRay;\n    this.scene = scene;\n    this.camera = camera;\n    this.renderTargetMask = new WebGLRenderTarget15(1, 1);\n    this.renderTargetMask.texture.name = \"Outline.Mask\";\n    this.uniforms.get(\"maskTexture\").value = this.renderTargetMask.texture;\n    this.renderTargetOutline = new WebGLRenderTarget15(1, 1, { depthBuffer: false });\n    this.renderTargetOutline.texture.name = \"Outline.Edges\";\n    this.uniforms.get(\"edgeTexture\").value = this.renderTargetOutline.texture;\n    this.clearPass = new ClearPass();\n    this.clearPass.overrideClearColor = new Color6(0);\n    this.clearPass.overrideClearAlpha = 1;\n    this.depthPass = new DepthPass(scene, camera);\n    this.maskPass = new RenderPass(scene, camera, new DepthComparisonMaterial(this.depthPass.texture, camera));\n    const clearPass = this.maskPass.clearPass;\n    clearPass.overrideClearColor = new Color6(16777215);\n    clearPass.overrideClearAlpha = 1;\n    this.blurPass = new KawaseBlurPass({ resolutionScale, resolutionX, resolutionY, kernelSize });\n    this.blurPass.enabled = blur;\n    const resolution = this.blurPass.resolution;\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.outlinePass = new ShaderPass(new OutlineMaterial());\n    const outlineMaterial = this.outlinePass.fullscreenMaterial;\n    outlineMaterial.inputBuffer = this.renderTargetMask.texture;\n    this.time = 0;\n    this.selection = new Selection();\n    this.selection.layer = 10;\n    this.pulseSpeed = pulseSpeed;\n  }\n  get resolution() {\n    return this.blurPass.resolution;\n  }\n  getResolution() {\n    return this.blurPass.getResolution();\n  }\n  get patternScale() {\n    return this.uniforms.get(\"patternScale\").value;\n  }\n  set patternScale(value) {\n    this.uniforms.get(\"patternScale\").value = value;\n  }\n  get edgeStrength() {\n    return this.uniforms.get(\"edgeStrength\").value;\n  }\n  set edgeStrength(value) {\n    this.uniforms.get(\"edgeStrength\").value = value;\n  }\n  get visibleEdgeColor() {\n    return this.uniforms.get(\"visibleEdgeColor\").value;\n  }\n  set visibleEdgeColor(value) {\n    this.uniforms.get(\"visibleEdgeColor\").value = value;\n  }\n  get hiddenEdgeColor() {\n    return this.uniforms.get(\"hiddenEdgeColor\").value;\n  }\n  set hiddenEdgeColor(value) {\n    this.uniforms.get(\"hiddenEdgeColor\").value = value;\n  }\n  getBlurPass() {\n    return this.blurPass;\n  }\n  getSelection() {\n    return this.selection;\n  }\n  getPulseSpeed() {\n    return this.pulseSpeed;\n  }\n  setPulseSpeed(value) {\n    this.pulseSpeed = value;\n  }\n  get width() {\n    return this.resolution.width;\n  }\n  set width(value) {\n    this.resolution.preferredWidth = value;\n  }\n  get height() {\n    return this.resolution.height;\n  }\n  set height(value) {\n    this.resolution.preferredHeight = value;\n  }\n  get selectionLayer() {\n    return this.selection.layer;\n  }\n  set selectionLayer(value) {\n    this.selection.layer = value;\n  }\n  get dithering() {\n    return this.blurPass.dithering;\n  }\n  set dithering(value) {\n    this.blurPass.dithering = value;\n  }\n  get kernelSize() {\n    return this.blurPass.kernelSize;\n  }\n  set kernelSize(value) {\n    this.blurPass.kernelSize = value;\n  }\n  get blur() {\n    return this.blurPass.enabled;\n  }\n  set blur(value) {\n    this.blurPass.enabled = value;\n  }\n  get xRay() {\n    return this.defines.has(\"X_RAY\");\n  }\n  set xRay(value) {\n    if (this.xRay !== value) {\n      if (value) {\n        this.defines.set(\"X_RAY\", \"1\");\n      } else {\n        this.defines.delete(\"X_RAY\");\n      }\n      this.setChanged();\n    }\n  }\n  isXRayEnabled() {\n    return this.xRay;\n  }\n  setXRayEnabled(value) {\n    this.xRay = value;\n  }\n  get patternTexture() {\n    return this.uniforms.get(\"patternTexture\").value;\n  }\n  set patternTexture(value) {\n    if (value !== null) {\n      value.wrapS = value.wrapT = RepeatWrapping2;\n      this.defines.set(\"USE_PATTERN\", \"1\");\n      this.setVertexShader(outline_default4);\n    } else {\n      this.defines.delete(\"USE_PATTERN\");\n      this.setVertexShader(null);\n    }\n    if (this.renderer !== null) {\n      const decoding = getTextureDecoding(value, this.renderer.capabilities.isWebGL2);\n      this.defines.set(\"texelToLinear(texel)\", decoding);\n    }\n    this.uniforms.get(\"patternTexture\").value = value;\n    this.setChanged();\n  }\n  setPatternTexture(value) {\n    this.patternTexture = value;\n  }\n  getResolutionScale() {\n    return this.resolution.scale;\n  }\n  setResolutionScale(scale) {\n    this.resolution.scale = scale;\n  }\n  setSelection(objects) {\n    this.selection.set(objects);\n    return this;\n  }\n  clearSelection() {\n    this.selection.clear();\n    return this;\n  }\n  selectObject(object) {\n    this.selection.add(object);\n    return this;\n  }\n  deselectObject(object) {\n    this.selection.delete(object);\n    return this;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const scene = this.scene;\n    const camera = this.camera;\n    const selection = this.selection;\n    const uniforms = this.uniforms;\n    const pulse = uniforms.get(\"pulse\");\n    const background = scene.background;\n    const mask = camera.layers.mask;\n    if (selection.size > 0) {\n      scene.background = null;\n      pulse.value = 1;\n      if (this.pulseSpeed > 0) {\n        pulse.value = Math.cos(this.time * this.pulseSpeed * 10) * 0.375 + 0.625;\n      }\n      this.time += deltaTime;\n      selection.setVisible(false);\n      this.depthPass.render(renderer);\n      selection.setVisible(true);\n      camera.layers.set(selection.layer);\n      this.maskPass.render(renderer, this.renderTargetMask);\n      camera.layers.mask = mask;\n      scene.background = background;\n      this.outlinePass.render(renderer, null, this.renderTargetOutline);\n      if (this.blurPass.enabled) {\n        this.blurPass.render(renderer, this.renderTargetOutline, this.renderTargetOutline);\n      }\n    } else if (this.time > 0) {\n      this.clearPass.render(renderer, this.renderTargetMask);\n      this.time = 0;\n    }\n  }\n  setSize(width, height) {\n    this.blurPass.setSize(width, height);\n    this.renderTargetMask.setSize(width, height);\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    this.depthPass.setSize(w, h);\n    this.renderTargetOutline.setSize(w, h);\n    this.outlinePass.fullscreenMaterial.setSize(w, h);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    const texture = this.patternTexture;\n    const decoding = getTextureDecoding(texture, renderer.capabilities.isWebGL2);\n    this.defines.set(\"texelToLinear(texel)\", decoding);\n    this.blurPass.initialize(renderer, alpha, UnsignedByteType15);\n    if (frameBufferType !== void 0) {\n      this.depthPass.initialize(renderer, alpha, frameBufferType);\n      this.maskPass.initialize(renderer, alpha, frameBufferType);\n      this.outlinePass.initialize(renderer, alpha, frameBufferType);\n    }\n  }\n};\n\n// src/effects/PixelationEffect.js\nimport { Uniform as Uniform37, Vector2 as Vector222, Vector4 as Vector42 } from \"three\";\n\n// src/effects/glsl/pixelation.frag\nvar pixelation_default = \"uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}\";\n\n// src/effects/PixelationEffect.js\nvar PixelationEffect = class extends Effect {\n  constructor(granularity = 30) {\n    super(\"PixelationEffect\", pixelation_default, {\n      uniforms: /* @__PURE__ */ new Map([\n        [\"active\", new Uniform37(false)],\n        [\"d\", new Uniform37(new Vector42())]\n      ])\n    });\n    this.resolution = new Vector222();\n    this._granularity = 0;\n    this.granularity = granularity;\n  }\n  get granularity() {\n    return this._granularity;\n  }\n  set granularity(value) {\n    let d = Math.floor(value);\n    if (d % 2 > 0) {\n      d += 1;\n    }\n    this._granularity = d;\n    this.uniforms.get(\"active\").value = d > 0;\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getGranularity() {\n    return this.granularity;\n  }\n  setGranularity(value) {\n    this.granularity = value;\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.set(width, height);\n    const d = this.granularity;\n    const x = d / resolution.x;\n    const y = d / resolution.y;\n    this.uniforms.get(\"d\").value.set(x, y, 1 / x, 1 / y);\n  }\n};\n\n// src/effects/RealisticBokehEffect.js\nimport { Uniform as Uniform38, Vector4 as Vector43 } from \"three\";\n\n// src/effects/glsl/realistic-bokeh.frag\nvar realistic_bokeh_default = \"uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\\n#ifdef MANUAL_DOF\\nuniform vec4 dof;\\n#endif\\n#ifdef PENTAGON\\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\\n#endif\\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\\n#ifdef PENTAGON\\nfloat p=pentagon(wh);\\n#else\\nfloat p=1.0;\\n#endif\\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\n#ifdef MANUAL_DOF\\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)?farDoF:nearDoF;\\n#else\\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\\n#endif\\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\\n#ifdef SHOW_FOCUS\\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/RealisticBokehEffect.js\nvar RealisticBokehEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    focus = 1,\n    focalLength = 24,\n    fStop = 0.9,\n    luminanceThreshold = 0.5,\n    luminanceGain = 2,\n    bias = 0.5,\n    fringe = 0.7,\n    maxBlur = 1,\n    rings = 3,\n    samples = 2,\n    showFocus = false,\n    manualDoF = false,\n    pentagon = false\n  } = {}) {\n    super(\"RealisticBokehEffect\", realistic_bokeh_default, {\n      blendFunction,\n      attributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"focus\", new Uniform38(focus)],\n        [\"focalLength\", new Uniform38(focalLength)],\n        [\"fStop\", new Uniform38(fStop)],\n        [\"luminanceThreshold\", new Uniform38(luminanceThreshold)],\n        [\"luminanceGain\", new Uniform38(luminanceGain)],\n        [\"bias\", new Uniform38(bias)],\n        [\"fringe\", new Uniform38(fringe)],\n        [\"maxBlur\", new Uniform38(maxBlur)],\n        [\"dof\", new Uniform38(null)]\n      ])\n    });\n    this.rings = rings;\n    this.samples = samples;\n    this.showFocus = showFocus;\n    this.manualDoF = manualDoF;\n    this.pentagon = pentagon;\n  }\n  get rings() {\n    return Number.parseInt(this.defines.get(\"RINGS_INT\"));\n  }\n  set rings(value) {\n    const r = Math.floor(value);\n    this.defines.set(\"RINGS_INT\", r.toFixed(0));\n    this.defines.set(\"RINGS_FLOAT\", r.toFixed(1));\n    this.setChanged();\n  }\n  get samples() {\n    return Number.parseInt(this.defines.get(\"SAMPLES_INT\"));\n  }\n  set samples(value) {\n    const s = Math.floor(value);\n    this.defines.set(\"SAMPLES_INT\", s.toFixed(0));\n    this.defines.set(\"SAMPLES_FLOAT\", s.toFixed(1));\n    this.setChanged();\n  }\n  get showFocus() {\n    return this.defines.has(\"SHOW_FOCUS\");\n  }\n  set showFocus(value) {\n    if (this.showFocus !== value) {\n      if (value) {\n        this.defines.set(\"SHOW_FOCUS\", \"1\");\n      } else {\n        this.defines.delete(\"SHOW_FOCUS\");\n      }\n      this.setChanged();\n    }\n  }\n  get manualDoF() {\n    return this.defines.has(\"MANUAL_DOF\");\n  }\n  set manualDoF(value) {\n    if (this.manualDoF !== value) {\n      if (value) {\n        this.defines.set(\"MANUAL_DOF\", \"1\");\n        this.uniforms.get(\"dof\").value = new Vector43(0.2, 1, 0.2, 2);\n      } else {\n        this.defines.delete(\"MANUAL_DOF\");\n        this.uniforms.get(\"dof\").value = null;\n      }\n      this.setChanged();\n    }\n  }\n  get pentagon() {\n    return this.defines.has(\"PENTAGON\");\n  }\n  set pentagon(value) {\n    if (this.pentagon !== value) {\n      if (value) {\n        this.defines.set(\"PENTAGON\", \"1\");\n      } else {\n        this.defines.delete(\"PENTAGON\");\n      }\n      this.setChanged();\n    }\n  }\n};\n\n// src/effects/ScanlineEffect.js\nimport { Uniform as Uniform39, Vector2 as Vector223 } from \"three\";\n\n// src/effects/glsl/scanlines.frag\nvar scanlines_default = \"uniform float count;\\n#ifdef SCROLL\\nuniform float scrollSpeed;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;\\n#ifdef SCROLL\\ny+=time*scrollSpeed;\\n#endif\\nvec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}\";\n\n// src/effects/ScanlineEffect.js\nvar ScanlineEffect = class extends Effect {\n  constructor({ blendFunction = BlendFunction.OVERLAY, density = 1.25, scrollSpeed = 0 } = {}) {\n    super(\"ScanlineEffect\", scanlines_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"count\", new Uniform39(0)],\n        [\"scrollSpeed\", new Uniform39(0)]\n      ])\n    });\n    this.resolution = new Vector223();\n    this.d = density;\n    this.scrollSpeed = scrollSpeed;\n  }\n  get density() {\n    return this.d;\n  }\n  set density(value) {\n    this.d = value;\n    this.setSize(this.resolution.width, this.resolution.height);\n  }\n  getDensity() {\n    return this.density;\n  }\n  setDensity(value) {\n    this.density = value;\n  }\n  get scrollSpeed() {\n    return this.uniforms.get(\"scrollSpeed\").value;\n  }\n  set scrollSpeed(value) {\n    this.uniforms.get(\"scrollSpeed\").value = value;\n    if (value === 0) {\n      if (this.defines.delete(\"SCROLL\")) {\n        this.setChanged();\n      }\n    } else if (!this.defines.has(\"SCROLL\")) {\n      this.defines.set(\"SCROLL\", \"1\");\n      this.setChanged();\n    }\n  }\n  setSize(width, height) {\n    this.resolution.set(width, height);\n    this.uniforms.get(\"count\").value = Math.round(height * this.density);\n  }\n};\n\n// src/effects/ShockWaveEffect.js\nimport { Uniform as Uniform40, Vector2 as Vector224, Vector3 as Vector35 } from \"three\";\n\n// src/effects/glsl/shock-wave.frag\nvar shock_wave_default = \"uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}\";\n\n// src/effects/glsl/shock-wave.vert\nvar shock_wave_default2 = \"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}\";\n\n// src/effects/ShockWaveEffect.js\nvar HALF_PI = Math.PI * 0.5;\nvar v2 = new Vector35();\nvar ab = new Vector35();\nvar ShockWaveEffect = class extends Effect {\n  constructor(camera, position = new Vector35(), {\n    speed = 2,\n    maxRadius = 1,\n    waveSize = 0.2,\n    amplitude = 0.05\n  } = {}) {\n    super(\"ShockWaveEffect\", shock_wave_default, {\n      vertexShader: shock_wave_default2,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"active\", new Uniform40(false)],\n        [\"center\", new Uniform40(new Vector224(0.5, 0.5))],\n        [\"cameraDistance\", new Uniform40(1)],\n        [\"size\", new Uniform40(1)],\n        [\"radius\", new Uniform40(-waveSize)],\n        [\"maxRadius\", new Uniform40(maxRadius)],\n        [\"waveSize\", new Uniform40(waveSize)],\n        [\"amplitude\", new Uniform40(amplitude)]\n      ])\n    });\n    this.position = position;\n    this.speed = speed;\n    this.camera = camera;\n    this.screenPosition = this.uniforms.get(\"center\").value;\n    this.time = 0;\n    this.active = false;\n  }\n  get amplitude() {\n    return this.uniforms.get(\"amplitude\").value;\n  }\n  set amplitude(value) {\n    this.uniforms.get(\"amplitude\").value = value;\n  }\n  get waveSize() {\n    return this.uniforms.get(\"waveSize\").value;\n  }\n  set waveSize(value) {\n    this.uniforms.get(\"waveSize\").value = value;\n  }\n  get maxRadius() {\n    return this.uniforms.get(\"maxRadius\").value;\n  }\n  set maxRadius(value) {\n    this.uniforms.get(\"maxRadius\").value = value;\n  }\n  get epicenter() {\n    return this.position;\n  }\n  set epicenter(value) {\n    this.position = value;\n  }\n  getPosition() {\n    return this.position;\n  }\n  setPosition(value) {\n    this.position = value;\n  }\n  getSpeed() {\n    return this.speed;\n  }\n  setSpeed(value) {\n    this.speed = value;\n  }\n  explode() {\n    this.time = 0;\n    this.active = true;\n    this.uniforms.get(\"active\").value = true;\n  }\n  update(renderer, inputBuffer, delta) {\n    const position = this.position;\n    const camera = this.camera;\n    const uniforms = this.uniforms;\n    const uActive = uniforms.get(\"active\");\n    if (this.active) {\n      const waveSize = uniforms.get(\"waveSize\").value;\n      camera.getWorldDirection(v2);\n      ab.copy(camera.position).sub(position);\n      uActive.value = v2.angleTo(ab) > HALF_PI;\n      if (uActive.value) {\n        uniforms.get(\"cameraDistance\").value = camera.position.distanceTo(position);\n        v2.copy(position).project(camera);\n        this.screenPosition.set((v2.x + 1) * 0.5, (v2.y + 1) * 0.5);\n      }\n      this.time += delta * this.speed;\n      const radius = this.time - waveSize;\n      uniforms.get(\"radius\").value = radius;\n      if (radius >= (uniforms.get(\"maxRadius\").value + waveSize) * 2) {\n        this.active = false;\n        uActive.value = false;\n      }\n    }\n  }\n};\n\n// src/effects/SelectiveBloomEffect.js\nimport {\n  BasicDepthPacking as BasicDepthPacking15,\n  Color as Color7,\n  NotEqualDepth as NotEqualDepth2,\n  EqualDepth as EqualDepth2,\n  RGBADepthPacking as RGBADepthPacking5,\n  sRGBEncoding as sRGBEncoding14,\n  WebGLRenderTarget as WebGLRenderTarget16\n} from \"three\";\nvar SelectiveBloomEffect = class extends BloomEffect {\n  constructor(scene, camera, options) {\n    super(options);\n    this.setAttributes(this.getAttributes() | EffectAttribute.DEPTH);\n    this.camera = camera;\n    this.depthPass = new DepthPass(scene, camera);\n    this.clearPass = new ClearPass(true, false, false);\n    this.clearPass.overrideClearColor = new Color7(0);\n    this.depthMaskPass = new ShaderPass(new DepthMaskMaterial());\n    const depthMaskMaterial = this.depthMaskMaterial;\n    depthMaskMaterial.adoptCameraSettings(camera);\n    depthMaskMaterial.depthBuffer1 = this.depthPass.texture;\n    depthMaskMaterial.depthPacking1 = RGBADepthPacking5;\n    depthMaskMaterial.depthMode = EqualDepth2;\n    this.renderTargetMasked = new WebGLRenderTarget16(1, 1, { depthBuffer: false });\n    this.renderTargetMasked.texture.name = \"Bloom.Masked\";\n    this.selection = new Selection();\n    this.selection.layer = 11;\n    this._inverted = false;\n    this._ignoreBackground = false;\n  }\n  getSelection() {\n    return this.selection;\n  }\n  get depthMaskMaterial() {\n    return this.depthMaskPass.fullscreenMaterial;\n  }\n  get inverted() {\n    return this._inverted;\n  }\n  set inverted(value) {\n    this._inverted = value;\n    this.depthMaskMaterial.depthMode = value ? NotEqualDepth2 : EqualDepth2;\n  }\n  isInverted() {\n    return this.inverted;\n  }\n  setInverted(value) {\n    this.inverted = value;\n  }\n  get ignoreBackground() {\n    return this._ignoreBackground;\n  }\n  set ignoreBackground(value) {\n    this._ignoreBackground = value;\n    this.depthMaskMaterial.maxDepthStrategy = value ? DepthTestStrategy.DISCARD_MAX_DEPTH : DepthTestStrategy.KEEP_MAX_DEPTH;\n  }\n  isBackgroundDisabled() {\n    return this.ignoreBackground;\n  }\n  setBackgroundDisabled(value) {\n    this.ignoreBackground = value;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking15) {\n    this.depthMaskMaterial.depthBuffer0 = depthTexture;\n    this.depthMaskMaterial.depthPacking0 = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    const camera = this.camera;\n    const selection = this.selection;\n    const inverted = this.inverted;\n    let renderTarget = inputBuffer;\n    if (this.ignoreBackground || !inverted || selection.size > 0) {\n      const mask = camera.layers.mask;\n      camera.layers.set(selection.layer);\n      this.depthPass.render(renderer);\n      camera.layers.mask = mask;\n      renderTarget = this.renderTargetMasked;\n      this.clearPass.render(renderer, renderTarget);\n      this.depthMaskPass.render(renderer, inputBuffer, renderTarget);\n    }\n    super.update(renderer, renderTarget, deltaTime);\n  }\n  setSize(width, height) {\n    super.setSize(width, height);\n    this.renderTargetMasked.setSize(width, height);\n    this.depthPass.setSize(width, height);\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    super.initialize(renderer, alpha, frameBufferType);\n    this.clearPass.initialize(renderer, alpha, frameBufferType);\n    this.depthPass.initialize(renderer, alpha, frameBufferType);\n    this.depthMaskPass.initialize(renderer, alpha, frameBufferType);\n    if (frameBufferType !== void 0) {\n      this.renderTargetMasked.texture.type = frameBufferType;\n      if (renderer.outputEncoding === sRGBEncoding14) {\n        this.renderTargetMasked.texture.encoding = sRGBEncoding14;\n      }\n    }\n  }\n};\n\n// src/effects/SepiaEffect.js\nimport { Uniform as Uniform41 } from \"three\";\n\n// src/effects/glsl/sepia.frag\nvar sepia_default = \"uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0,0.0,0.0)+vec3(-0.607,0.769,0.189)*intensity),dot(inputColor.rgb,vec3(0.0,1.0,0.0)+vec3(0.349,-0.314,0.168)*intensity),dot(inputColor.rgb,vec3(0.0,0.0,1.0)+vec3(0.272,0.534,-0.869)*intensity));outputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/SepiaEffect.js\nvar SepiaEffect = class extends Effect {\n  constructor({ blendFunction, intensity = 1 } = {}) {\n    super(\"SepiaEffect\", sepia_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"intensity\", new Uniform41(intensity)]\n      ])\n    });\n  }\n  get intensity() {\n    return this.uniforms.get(\"intensity\").value;\n  }\n  set intensity(value) {\n    this.uniforms.get(\"intensity\").value = value;\n  }\n  getIntensity() {\n    return this.intensity;\n  }\n  setIntensity(value) {\n    this.intensity = value;\n  }\n};\n\n// src/effects/SMAAEffect.js\nimport {\n  BasicDepthPacking as BasicDepthPacking16,\n  Color as Color8,\n  LinearFilter as LinearFilter5,\n  LoadingManager as LoadingManager2,\n  NearestFilter as NearestFilter8,\n  Texture,\n  Uniform as Uniform42,\n  WebGLRenderTarget as WebGLRenderTarget17\n} from \"three\";\n\n// src/textures/smaa/searchImageDataURL.js\nvar searchImageDataURL_default = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC\";\n\n// src/textures/smaa/areaImageDataURL.js\nvar areaImageDataURL_default = \"data:image/png;base64,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\";\n\n// src/effects/glsl/smaa.frag\nvar smaa_default = \"uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}\";\n\n// src/effects/glsl/smaa.vert\nvar smaa_default2 = \"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}\";\n\n// src/effects/SMAAEffect.js\nvar SMAAEffect = class extends Effect {\n  constructor({\n    blendFunction = BlendFunction.SRC,\n    preset = SMAAPreset.MEDIUM,\n    edgeDetectionMode = EdgeDetectionMode.COLOR,\n    predicationMode = PredicationMode.DISABLED\n  } = {}) {\n    super(\"SMAAEffect\", smaa_default, {\n      vertexShader: smaa_default2,\n      blendFunction,\n      attributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"weightMap\", new Uniform42(null)]\n      ])\n    });\n    let searchImage, areaImage;\n    if (arguments.length > 1) {\n      searchImage = arguments[0];\n      areaImage = arguments[1];\n      if (arguments.length > 2) {\n        preset = arguments[2];\n      }\n      if (arguments.length > 3) {\n        edgeDetectionMode = arguments[3];\n      }\n    }\n    this.renderTargetEdges = new WebGLRenderTarget17(1, 1, { depthBuffer: false });\n    this.renderTargetEdges.texture.name = \"SMAA.Edges\";\n    this.renderTargetWeights = this.renderTargetEdges.clone();\n    this.renderTargetWeights.texture.name = \"SMAA.Weights\";\n    this.uniforms.get(\"weightMap\").value = this.renderTargetWeights.texture;\n    this.clearPass = new ClearPass(true, false, false);\n    this.clearPass.overrideClearColor = new Color8(0);\n    this.clearPass.overrideClearAlpha = 1;\n    this.edgeDetectionPass = new ShaderPass(new EdgeDetectionMaterial());\n    this.edgeDetectionMaterial.edgeDetectionMode = edgeDetectionMode;\n    this.edgeDetectionMaterial.predicationMode = predicationMode;\n    this.weightsPass = new ShaderPass(new SMAAWeightsMaterial());\n    const loadingManager = new LoadingManager2();\n    loadingManager.onLoad = () => {\n      const searchTexture = new Texture(searchImage);\n      searchTexture.name = \"SMAA.Search\";\n      searchTexture.magFilter = NearestFilter8;\n      searchTexture.minFilter = NearestFilter8;\n      searchTexture.generateMipmaps = false;\n      searchTexture.needsUpdate = true;\n      searchTexture.flipY = true;\n      this.weightsMaterial.searchTexture = searchTexture;\n      const areaTexture = new Texture(areaImage);\n      areaTexture.name = \"SMAA.Area\";\n      areaTexture.magFilter = LinearFilter5;\n      areaTexture.minFilter = LinearFilter5;\n      areaTexture.generateMipmaps = false;\n      areaTexture.needsUpdate = true;\n      areaTexture.flipY = false;\n      this.weightsMaterial.areaTexture = areaTexture;\n      this.dispatchEvent({ type: \"load\" });\n    };\n    loadingManager.itemStart(\"search\");\n    loadingManager.itemStart(\"area\");\n    if (searchImage !== void 0 && areaImage !== void 0) {\n      loadingManager.itemEnd(\"search\");\n      loadingManager.itemEnd(\"area\");\n    } else if (typeof Image !== \"undefined\") {\n      searchImage = new Image();\n      areaImage = new Image();\n      searchImage.addEventListener(\"load\", () => loadingManager.itemEnd(\"search\"));\n      areaImage.addEventListener(\"load\", () => loadingManager.itemEnd(\"area\"));\n      searchImage.src = searchImageDataURL_default;\n      areaImage.src = areaImageDataURL_default;\n    }\n    this.applyPreset(preset);\n  }\n  get edgesTexture() {\n    return this.renderTargetEdges.texture;\n  }\n  getEdgesTexture() {\n    return this.edgesTexture;\n  }\n  get weightsTexture() {\n    return this.renderTargetWeights.texture;\n  }\n  getWeightsTexture() {\n    return this.weightsTexture;\n  }\n  get edgeDetectionMaterial() {\n    return this.edgeDetectionPass.fullscreenMaterial;\n  }\n  get colorEdgesMaterial() {\n    return this.edgeDetectionMaterial;\n  }\n  getEdgeDetectionMaterial() {\n    return this.edgeDetectionMaterial;\n  }\n  get weightsMaterial() {\n    return this.weightsPass.fullscreenMaterial;\n  }\n  getWeightsMaterial() {\n    return this.weightsMaterial;\n  }\n  setEdgeDetectionThreshold(threshold) {\n    this.edgeDetectionMaterial.edgeDetectionThreshold = threshold;\n  }\n  setOrthogonalSearchSteps(steps) {\n    this.weightsMaterial.orthogonalSearchSteps = steps;\n  }\n  applyPreset(preset) {\n    const edgeDetectionMaterial = this.edgeDetectionMaterial;\n    const weightsMaterial = this.weightsMaterial;\n    switch (preset) {\n      case SMAAPreset.LOW:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.15;\n        weightsMaterial.orthogonalSearchSteps = 4;\n        weightsMaterial.diagonalDetection = false;\n        weightsMaterial.cornerDetection = false;\n        break;\n      case SMAAPreset.MEDIUM:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.1;\n        weightsMaterial.orthogonalSearchSteps = 8;\n        weightsMaterial.diagonalDetection = false;\n        weightsMaterial.cornerDetection = false;\n        break;\n      case SMAAPreset.HIGH:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.1;\n        weightsMaterial.orthogonalSearchSteps = 16;\n        weightsMaterial.diagonalSearchSteps = 8;\n        weightsMaterial.cornerRounding = 25;\n        weightsMaterial.diagonalDetection = true;\n        weightsMaterial.cornerDetection = true;\n        break;\n      case SMAAPreset.ULTRA:\n        edgeDetectionMaterial.edgeDetectionThreshold = 0.05;\n        weightsMaterial.orthogonalSearchSteps = 32;\n        weightsMaterial.diagonalSearchSteps = 16;\n        weightsMaterial.cornerRounding = 25;\n        weightsMaterial.diagonalDetection = true;\n        weightsMaterial.cornerDetection = true;\n        break;\n    }\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking16) {\n    this.edgeDetectionMaterial.depthBuffer = depthTexture;\n    this.edgeDetectionMaterial.depthPacking = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    this.clearPass.render(renderer, this.renderTargetEdges);\n    this.edgeDetectionPass.render(renderer, inputBuffer, this.renderTargetEdges);\n    this.weightsPass.render(renderer, this.renderTargetEdges, this.renderTargetWeights);\n  }\n  setSize(width, height) {\n    this.edgeDetectionMaterial.setSize(width, height);\n    this.weightsMaterial.setSize(width, height);\n    this.renderTargetEdges.setSize(width, height);\n    this.renderTargetWeights.setSize(width, height);\n  }\n  dispose() {\n    const { searchTexture, areaTexture } = this.weightsMaterial;\n    if (searchTexture !== null && areaTexture !== null) {\n      searchTexture.dispose();\n      areaTexture.dispose();\n    }\n    super.dispose();\n  }\n  static get searchImageDataURL() {\n    return searchImageDataURL_default;\n  }\n  static get areaImageDataURL() {\n    return areaImageDataURL_default;\n  }\n};\n\n// src/effects/SSAOEffect.js\nimport { BasicDepthPacking as BasicDepthPacking17, Color as Color9, RepeatWrapping as RepeatWrapping3, RGBAFormat as RGBAFormat5, Uniform as Uniform43, WebGLRenderTarget as WebGLRenderTarget18 } from \"three\";\n\n// src/effects/glsl/ssao.frag\nvar ssao_default3 = \"uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;\\n#ifdef DEPTH_AWARE_UPSAMPLING\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#endif\\n#ifdef COLORIZE\\nuniform vec3 color;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\\n#if defined(DEPTH_AWARE_UPSAMPLING) && __VERSION__ == 300\\nvec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\\n#else\\nfloat ao=aoLinear;\\n#endif\\nfloat l=linearToRelativeLuminance(inputColor.rgb);ao=mix(ao,1.0,l*luminanceInfluence);\\n#ifdef COLORIZE\\noutputColor=vec4(1.0-(1.0-ao)*(1.0-color),inputColor.a);\\n#else\\noutputColor=vec4(vec3(ao),inputColor.a);\\n#endif\\n}\";\n\n// src/effects/SSAOEffect.js\nvar NOISE_TEXTURE_SIZE = 64;\nvar SSAOEffect = class extends Effect {\n  constructor(camera, normalBuffer, {\n    blendFunction = BlendFunction.MULTIPLY,\n    distanceScaling = true,\n    depthAwareUpsampling = true,\n    normalDepthBuffer = null,\n    samples = 9,\n    rings = 7,\n    worldDistanceThreshold,\n    worldDistanceFalloff,\n    worldProximityThreshold,\n    worldProximityFalloff,\n    distanceThreshold = 0.97,\n    distanceFalloff = 0.03,\n    rangeThreshold = 5e-4,\n    rangeFalloff = 1e-3,\n    minRadiusScale = 0.1,\n    luminanceInfluence = 0.7,\n    radius = 0.1825,\n    intensity = 1,\n    bias = 0.025,\n    fade = 0.01,\n    color: color2 = null,\n    resolutionScale = 1,\n    width = Resolution.AUTO_SIZE,\n    height = Resolution.AUTO_SIZE,\n    resolutionX = width,\n    resolutionY = height\n  } = {}) {\n    super(\"SSAOEffect\", ssao_default3, {\n      blendFunction,\n      attributes: EffectAttribute.DEPTH,\n      defines: /* @__PURE__ */ new Map([\n        [\"THRESHOLD\", \"0.997\"]\n      ]),\n      uniforms: /* @__PURE__ */ new Map([\n        [\"aoBuffer\", new Uniform43(null)],\n        [\"normalDepthBuffer\", new Uniform43(normalDepthBuffer)],\n        [\"luminanceInfluence\", new Uniform43(luminanceInfluence)],\n        [\"color\", new Uniform43(null)],\n        [\"scale\", new Uniform43(0)]\n      ])\n    });\n    this.renderTargetAO = new WebGLRenderTarget18(1, 1, { depthBuffer: false });\n    this.renderTargetAO.texture.name = \"AO.Target\";\n    this.uniforms.get(\"aoBuffer\").value = this.renderTargetAO.texture;\n    const resolution = this.resolution = new Resolution(this, resolutionX, resolutionY, resolutionScale);\n    resolution.addEventListener(\"change\", (e) => this.setSize(resolution.baseWidth, resolution.baseHeight));\n    this.camera = camera;\n    this.ssaoPass = new ShaderPass(new SSAOMaterial(camera));\n    const noiseTexture = new NoiseTexture(NOISE_TEXTURE_SIZE, NOISE_TEXTURE_SIZE, RGBAFormat5);\n    noiseTexture.wrapS = noiseTexture.wrapT = RepeatWrapping3;\n    const material = this.ssaoMaterial;\n    material.noiseTexture = noiseTexture;\n    material.minRadiusScale = minRadiusScale;\n    material.intensity = intensity;\n    material.fade = fade;\n    material.bias = bias;\n    if (normalDepthBuffer !== null) {\n      material.normalDepthBuffer = normalDepthBuffer;\n      this.depthAwareUpsampling = depthAwareUpsampling;\n    } else {\n      material.normalBuffer = normalBuffer;\n    }\n    material.distanceThreshold = distanceThreshold;\n    material.distanceFalloff = distanceFalloff;\n    material.proximityThreshold = rangeThreshold;\n    material.proximityFalloff = rangeFalloff;\n    if (worldDistanceThreshold !== void 0) {\n      material.worldDistanceThreshold = worldDistanceThreshold;\n    }\n    if (worldDistanceFalloff !== void 0) {\n      material.worldDistanceFalloff = worldDistanceFalloff;\n    }\n    if (worldProximityThreshold !== void 0) {\n      material.worldProximityThreshold = worldProximityThreshold;\n    }\n    if (worldProximityFalloff !== void 0) {\n      material.worldProximityFalloff = worldProximityFalloff;\n    }\n    material.distanceScaling = distanceScaling;\n    material.samples = samples;\n    material.radius = radius;\n    material.rings = rings;\n    this.color = color2;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  get ssaoMaterial() {\n    return this.ssaoPass.fullscreenMaterial;\n  }\n  getSSAOMaterial() {\n    return this.ssaoMaterial;\n  }\n  get samples() {\n    return this.ssaoMaterial.samples;\n  }\n  set samples(value) {\n    this.ssaoMaterial.samples = value;\n  }\n  get rings() {\n    return this.ssaoMaterial.rings;\n  }\n  set rings(value) {\n    this.ssaoMaterial.rings = value;\n  }\n  get radius() {\n    return this.ssaoMaterial.radius;\n  }\n  set radius(value) {\n    this.ssaoMaterial.radius = value;\n  }\n  get depthAwareUpsampling() {\n    return this.defines.has(\"DEPTH_AWARE_UPSAMPLING\");\n  }\n  set depthAwareUpsampling(value) {\n    if (this.depthAwareUpsampling !== value) {\n      if (value && this.uniforms.get(\"normalDepthBuffer\").value !== null) {\n        this.defines.set(\"DEPTH_AWARE_UPSAMPLING\", \"1\");\n      } else {\n        this.defines.delete(\"DEPTH_AWARE_UPSAMPLING\");\n      }\n      this.setChanged();\n    }\n  }\n  isDepthAwareUpsamplingEnabled() {\n    return this.depthAwareUpsampling;\n  }\n  setDepthAwareUpsamplingEnabled(value) {\n    this.depthAwareUpsampling = value;\n  }\n  get distanceScaling() {\n    return this.ssaoMaterial.distanceScaling;\n  }\n  set distanceScaling(value) {\n    this.ssaoMaterial.distanceScaling = value;\n  }\n  get color() {\n    return this.uniforms.get(\"color\").value;\n  }\n  set color(value) {\n    const uniforms = this.uniforms;\n    const defines = this.defines;\n    if (value !== null) {\n      if (defines.has(\"COLORIZE\")) {\n        uniforms.get(\"color\").value.set(value);\n      } else {\n        defines.set(\"COLORIZE\", \"1\");\n        uniforms.get(\"color\").value = new Color9(value);\n        this.setChanged();\n      }\n    } else if (defines.has(\"COLORIZE\")) {\n      defines.delete(\"COLORIZE\");\n      uniforms.get(\"color\").value = null;\n      this.setChanged();\n    }\n  }\n  get luminanceInfluence() {\n    return this.uniforms.get(\"luminanceInfluence\").value;\n  }\n  set luminanceInfluence(value) {\n    this.uniforms.get(\"luminanceInfluence\").value = value;\n  }\n  getColor() {\n    return this.color;\n  }\n  setColor(value) {\n    this.color = value;\n  }\n  setDistanceCutoff(threshold, falloff) {\n    this.ssaoMaterial.distanceThreshold = threshold;\n    this.ssaoMaterial.distanceFalloff = falloff;\n  }\n  setProximityCutoff(threshold, falloff) {\n    this.ssaoMaterial.proximityThreshold = threshold;\n    this.ssaoMaterial.proximityFalloff = falloff;\n  }\n  setDepthTexture(depthTexture, depthPacking = BasicDepthPacking17) {\n    this.ssaoMaterial.depthBuffer = depthTexture;\n    this.ssaoMaterial.depthPacking = depthPacking;\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    this.ssaoPass.render(renderer, null, this.renderTargetAO);\n  }\n  setSize(width, height) {\n    const resolution = this.resolution;\n    resolution.setBaseSize(width, height);\n    const w = resolution.width, h = resolution.height;\n    const material = this.ssaoMaterial;\n    material.adoptCameraSettings(this.camera);\n    material.setSize(w, h);\n    this.renderTargetAO.setSize(w, h);\n  }\n};\n\n// src/effects/TextureEffect.js\nimport { Uniform as Uniform44, UnsignedByteType as UnsignedByteType16 } from \"three\";\n\n// src/effects/glsl/texture.frag\nvar texture_default = \"#ifdef TEXTURE_PRECISION_HIGH\\nuniform mediump sampler2D map;\\n#else\\nuniform lowp sampler2D map;\\n#endif\\nvarying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\\n#ifdef UV_TRANSFORM\\nvec4 texel=texelToLinear(texture2D(map,vUv2));\\n#else\\nvec4 texel=texelToLinear(texture2D(map,uv));\\n#endif\\noutputColor=TEXEL;}\";\n\n// src/effects/glsl/texture.vert\nvar texture_default2 = \"#ifdef ASPECT_CORRECTION\\nuniform float scale;\\n#else\\nuniform mat3 uvTransform;\\n#endif\\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\\n#ifdef ASPECT_CORRECTION\\nvUv2=uv*vec2(aspect,1.0)*scale;\\n#else\\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\\n#endif\\n}\";\n\n// src/effects/TextureEffect.js\nvar TextureEffect = class extends Effect {\n  constructor({ blendFunction, texture = null, aspectCorrection = false } = {}) {\n    super(\"TextureEffect\", texture_default, {\n      blendFunction,\n      defines: /* @__PURE__ */ new Map([\n        [\"TEXEL\", \"texel\"]\n      ]),\n      uniforms: /* @__PURE__ */ new Map([\n        [\"map\", new Uniform44(null)],\n        [\"scale\", new Uniform44(1)],\n        [\"uvTransform\", new Uniform44(null)]\n      ])\n    });\n    this.texture = texture;\n    this.aspectCorrection = aspectCorrection;\n  }\n  get texture() {\n    return this.uniforms.get(\"map\").value;\n  }\n  set texture(value) {\n    const prevTexture = this.texture;\n    const uniforms = this.uniforms;\n    const defines = this.defines;\n    if (prevTexture !== value) {\n      uniforms.get(\"map\").value = value;\n      uniforms.get(\"uvTransform\").value = value.matrix;\n      defines.delete(\"TEXTURE_PRECISION_HIGH\");\n      if (this.renderer !== null) {\n        const decoding = getTextureDecoding(value, this.renderer.capabilities.isWebGL2);\n        defines.set(\"texelToLinear(texel)\", decoding);\n      }\n      if (value !== null) {\n        if (value.matrixAutoUpdate) {\n          defines.set(\"UV_TRANSFORM\", \"1\");\n          this.setVertexShader(texture_default2);\n        } else {\n          defines.delete(\"UV_TRANSFORM\");\n          this.setVertexShader(null);\n        }\n        if (value.type !== UnsignedByteType16) {\n          defines.set(\"TEXTURE_PRECISION_HIGH\", \"1\");\n        }\n        if (prevTexture === null || prevTexture.type !== value.type || prevTexture.encoding !== value.encoding) {\n          this.setChanged();\n        }\n      }\n    }\n  }\n  getTexture() {\n    return this.texture;\n  }\n  setTexture(value) {\n    this.texture = value;\n  }\n  get aspectCorrection() {\n    return this.defines.has(\"ASPECT_CORRECTION\");\n  }\n  set aspectCorrection(value) {\n    if (this.aspectCorrection !== value) {\n      if (value) {\n        this.defines.set(\"ASPECT_CORRECTION\", \"1\");\n      } else {\n        this.defines.delete(\"ASPECT_CORRECTION\");\n      }\n      this.setChanged();\n    }\n  }\n  get uvTransform() {\n    const texture = this.texture;\n    return texture !== null && texture.matrixAutoUpdate;\n  }\n  set uvTransform(value) {\n    const texture = this.texture;\n    if (texture !== null) {\n      texture.matrixAutoUpdate = value;\n    }\n  }\n  setTextureSwizzleRGBA(r, g = r, b = r, a = r) {\n    const rgba = \"rgba\";\n    let swizzle = \"\";\n    if (r !== ColorChannel.RED || g !== ColorChannel.GREEN || b !== ColorChannel.BLUE || a !== ColorChannel.ALPHA) {\n      swizzle = [\".\", rgba[r], rgba[g], rgba[b], rgba[a]].join(\"\");\n    }\n    this.defines.set(\"TEXEL\", \"texel\" + swizzle);\n    this.setChanged();\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    if (this.texture.matrixAutoUpdate) {\n      this.texture.updateMatrix();\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    const decoding = getTextureDecoding(this.texture, renderer.capabilities.isWebGL2);\n    this.defines.set(\"texelToLinear(texel)\", decoding);\n    this.renderer = renderer;\n  }\n};\n\n// src/effects/ToneMappingEffect.js\nimport { LinearMipmapLinearFilter, Uniform as Uniform45, WebGLRenderTarget as WebGLRenderTarget19 } from \"three\";\n\n// src/effects/glsl/tone-mapping.frag\nvar tone_mapping_default = \"#include <tonemapping_pars_fragment>\\nuniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;\\n#if TONE_MAPPING_MODE != 2\\nuniform float averageLuminance;\\n#endif\\nvec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=linearToRelativeLuminance(color);\\n#if TONE_MAPPING_MODE == 2\\nfloat lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));\\n#else\\nfloat lumAvg=averageLuminance;\\n#endif\\nfloat lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\\noutputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);\\n#else\\noutputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);\\n#endif\\n}\";\n\n// src/effects/ToneMappingEffect.js\nvar ToneMappingEffect = class extends Effect {\n  constructor({\n    blendFunction = BlendFunction.SRC,\n    adaptive = true,\n    mode = adaptive ? ToneMappingMode.REINHARD2_ADAPTIVE : ToneMappingMode.REINHARD2,\n    resolution = 256,\n    maxLuminance = 16,\n    whitePoint = maxLuminance,\n    middleGrey = 0.6,\n    minLuminance = 0.01,\n    averageLuminance = 1,\n    adaptationRate = 1\n  } = {}) {\n    super(\"ToneMappingEffect\", tone_mapping_default, {\n      blendFunction,\n      uniforms: /* @__PURE__ */ new Map([\n        [\"luminanceBuffer\", new Uniform45(null)],\n        [\"maxLuminance\", new Uniform45(maxLuminance)],\n        [\"whitePoint\", new Uniform45(whitePoint)],\n        [\"middleGrey\", new Uniform45(middleGrey)],\n        [\"averageLuminance\", new Uniform45(averageLuminance)]\n      ])\n    });\n    this.renderTargetLuminance = new WebGLRenderTarget19(1, 1, {\n      minFilter: LinearMipmapLinearFilter,\n      depthBuffer: false\n    });\n    this.renderTargetLuminance.texture.generateMipmaps = true;\n    this.renderTargetLuminance.texture.name = \"Luminance\";\n    this.luminancePass = new LuminancePass({\n      renderTarget: this.renderTargetLuminance\n    });\n    this.adaptiveLuminancePass = new AdaptiveLuminancePass(this.luminancePass.texture, {\n      minLuminance,\n      adaptationRate\n    });\n    this.uniforms.get(\"luminanceBuffer\").value = this.adaptiveLuminancePass.texture;\n    this.resolution = resolution;\n    this.mode = mode;\n  }\n  get mode() {\n    return Number(this.defines.get(\"TONE_MAPPING_MODE\"));\n  }\n  set mode(value) {\n    if (this.mode !== value) {\n      this.defines.clear();\n      this.defines.set(\"TONE_MAPPING_MODE\", value.toFixed(0));\n      switch (value) {\n        case ToneMappingMode.REINHARD:\n          this.defines.set(\"toneMapping(texel)\", \"ReinhardToneMapping(texel)\");\n          break;\n        case ToneMappingMode.OPTIMIZED_CINEON:\n          this.defines.set(\"toneMapping(texel)\", \"OptimizedCineonToneMapping(texel)\");\n          break;\n        case ToneMappingMode.ACES_FILMIC:\n          this.defines.set(\"toneMapping(texel)\", \"ACESFilmicToneMapping(texel)\");\n          break;\n        default:\n          this.defines.set(\"toneMapping(texel)\", \"texel\");\n          break;\n      }\n      this.adaptiveLuminancePass.enabled = value === ToneMappingMode.REINHARD2_ADAPTIVE;\n      this.setChanged();\n    }\n  }\n  getMode() {\n    return this.mode;\n  }\n  setMode(value) {\n    this.mode = value;\n  }\n  get whitePoint() {\n    return this.uniforms.get(\"whitePoint\").value;\n  }\n  set whitePoint(value) {\n    this.uniforms.get(\"whitePoint\").value = value;\n  }\n  get middleGrey() {\n    return this.uniforms.get(\"middleGrey\").value;\n  }\n  set middleGrey(value) {\n    this.uniforms.get(\"middleGrey\").value = value;\n  }\n  get averageLuminance() {\n    return this.uniforms.get(\"averageLuminance\").value;\n  }\n  set averageLuminance(value) {\n    this.uniforms.get(\"averageLuminance\").value = value;\n  }\n  get adaptiveLuminanceMaterial() {\n    return this.adaptiveLuminancePass.fullscreenMaterial;\n  }\n  getAdaptiveLuminanceMaterial() {\n    return this.adaptiveLuminanceMaterial;\n  }\n  get resolution() {\n    return this.luminancePass.resolution.width;\n  }\n  set resolution(value) {\n    const exponent = Math.max(0, Math.ceil(Math.log2(value)));\n    const size = Math.pow(2, exponent);\n    this.luminancePass.resolution.setPreferredSize(size, size);\n    this.adaptiveLuminanceMaterial.mipLevel1x1 = exponent;\n  }\n  getResolution() {\n    return this.resolution;\n  }\n  setResolution(value) {\n    this.resolution = value;\n  }\n  get adaptive() {\n    return this.mode === ToneMappingMode.REINHARD2_ADAPTIVE;\n  }\n  set adaptive(value) {\n    this.mode = value ? ToneMappingMode.REINHARD2_ADAPTIVE : ToneMappingMode.REINHARD2;\n  }\n  get adaptationRate() {\n    return this.adaptiveLuminanceMaterial.adaptationRate;\n  }\n  set adaptationRate(value) {\n    this.adaptiveLuminanceMaterial.adaptationRate = value;\n  }\n  get distinction() {\n    console.warn(this.name, \"distinction was removed.\");\n    return 1;\n  }\n  set distinction(value) {\n    console.warn(this.name, \"distinction was removed.\");\n  }\n  update(renderer, inputBuffer, deltaTime) {\n    if (this.adaptiveLuminancePass.enabled) {\n      this.luminancePass.render(renderer, inputBuffer);\n      this.adaptiveLuminancePass.render(renderer, null, null, deltaTime);\n    }\n  }\n  initialize(renderer, alpha, frameBufferType) {\n    this.adaptiveLuminancePass.initialize(renderer, alpha, frameBufferType);\n  }\n};\n\n// src/effects/VignetteEffect.js\nimport { Uniform as Uniform46 } from \"three\";\n\n// src/effects/glsl/vignette.frag\nvar vignette_default = \"uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\\n#if VIGNETTE_TECHNIQUE == 0\\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\\n#else\\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n// src/effects/VignetteEffect.js\nvar VignetteEffect = class extends Effect {\n  constructor({\n    blendFunction,\n    technique = VignetteTechnique.DEFAULT,\n    eskil = false,\n    offset = 0.5,\n    darkness = 0.5\n  } = {}) {\n    super(\"VignetteEffect\", vignette_default, {\n      blendFunction,\n      defines: /* @__PURE__ */ new Map([\n        [\"VIGNETTE_TECHNIQUE\", technique.toFixed(0)]\n      ]),\n      uniforms: /* @__PURE__ */ new Map([\n        [\"offset\", new Uniform46(offset)],\n        [\"darkness\", new Uniform46(darkness)]\n      ])\n    });\n  }\n  get technique() {\n    return Number(this.defines.get(\"VIGNETTE_TECHNIQUE\"));\n  }\n  set technique(value) {\n    if (this.technique !== value) {\n      this.defines.set(\"VIGNETTE_TECHNIQUE\", value.toFixed(0));\n      this.setChanged();\n    }\n  }\n  get eskil() {\n    return this.technique === VignetteTechnique.ESKIL;\n  }\n  set eskil(value) {\n    this.technique = value ? VignetteTechnique.ESKIL : VignetteTechnique.DEFAULT;\n  }\n  getTechnique() {\n    return this.technique;\n  }\n  setTechnique(value) {\n    this.technique = value;\n  }\n  get offset() {\n    return this.uniforms.get(\"offset\").value;\n  }\n  set offset(value) {\n    this.uniforms.get(\"offset\").value = value;\n  }\n  getOffset() {\n    return this.offset;\n  }\n  setOffset(value) {\n    this.offset = value;\n  }\n  get darkness() {\n    return this.uniforms.get(\"darkness\").value;\n  }\n  set darkness(value) {\n    this.uniforms.get(\"darkness\").value = value;\n  }\n  getDarkness() {\n    return this.darkness;\n  }\n  setDarkness(value) {\n    this.darkness = value;\n  }\n};\n\n// src/loaders/LUT3dlLoader.js\nimport { FileLoader, Loader, LoadingManager as LoadingManager3 } from \"three\";\nvar LUT3dlLoader = class extends Loader {\n  load(url, onLoad = () => {\n  }, onProgress = () => {\n  }, onError = null) {\n    const externalManager = this.manager;\n    const internalManager = new LoadingManager3();\n    const loader = new FileLoader(internalManager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"text\");\n    return new Promise((resolve, reject) => {\n      internalManager.onError = (url2) => {\n        externalManager.itemError(url2);\n        if (onError !== null) {\n          onError(`Failed to load ${url2}`);\n          resolve();\n        } else {\n          reject(`Failed to load ${url2}`);\n        }\n      };\n      externalManager.itemStart(url);\n      loader.load(url, (data) => {\n        try {\n          const result = this.parse(data);\n          externalManager.itemEnd(url);\n          onLoad(result);\n          resolve(result);\n        } catch (e) {\n          console.error(e);\n          internalManager.onError(url);\n        }\n      }, onProgress);\n    });\n  }\n  parse(input) {\n    const regExpGridInfo = /^[\\d ]+$/m;\n    const regExpDataPoints = /^([\\d.e+-]+) +([\\d.e+-]+) +([\\d.e+-]+) *$/gm;\n    let result = regExpGridInfo.exec(input);\n    if (result === null) {\n      throw new Error(\"Missing grid information\");\n    }\n    const gridLines = result[0].trim().split(/\\s+/g).map((n) => Number(n));\n    const gridStep = gridLines[1] - gridLines[0];\n    const size = gridLines.length;\n    const sizeSq = size ** 2;\n    for (let i = 1, l = gridLines.length; i < l; ++i) {\n      if (gridStep !== gridLines[i] - gridLines[i - 1]) {\n        throw new Error(\"Inconsistent grid size\");\n      }\n    }\n    const data = new Float32Array(size ** 3 * 4);\n    let maxValue = 0;\n    let index = 0;\n    while ((result = regExpDataPoints.exec(input)) !== null) {\n      const r = Number(result[1]);\n      const g = Number(result[2]);\n      const b = Number(result[3]);\n      maxValue = Math.max(maxValue, r, g, b);\n      const bLayer = index % size;\n      const gLayer = Math.floor(index / size) % size;\n      const rLayer = Math.floor(index / sizeSq) % size;\n      const d4 = (bLayer * sizeSq + gLayer * size + rLayer) * 4;\n      data[d4 + 0] = r;\n      data[d4 + 1] = g;\n      data[d4 + 2] = b;\n      data[d4 + 3] = 1;\n      ++index;\n    }\n    const bits = Math.ceil(Math.log2(maxValue));\n    const maxBitValue = Math.pow(2, bits);\n    for (let i = 0, l = data.length; i < l; i += 4) {\n      data[i + 0] /= maxBitValue;\n      data[i + 1] /= maxBitValue;\n      data[i + 2] /= maxBitValue;\n    }\n    return new LookupTexture(data, size);\n  }\n};\n\n// src/loaders/LUTCubeLoader.js\nimport { FileLoader as FileLoader2, Loader as Loader2, LoadingManager as LoadingManager4, Vector3 as Vector36 } from \"three\";\nvar LUTCubeLoader = class extends Loader2 {\n  load(url, onLoad = () => {\n  }, onProgress = () => {\n  }, onError = null) {\n    const externalManager = this.manager;\n    const internalManager = new LoadingManager4();\n    const loader = new FileLoader2(internalManager);\n    loader.setPath(this.path);\n    loader.setResponseType(\"text\");\n    return new Promise((resolve, reject) => {\n      internalManager.onError = (url2) => {\n        externalManager.itemError(url2);\n        if (onError !== null) {\n          onError(`Failed to load ${url2}`);\n          resolve();\n        } else {\n          reject(`Failed to load ${url2}`);\n        }\n      };\n      externalManager.itemStart(url);\n      loader.load(url, (data) => {\n        try {\n          const result = this.parse(data);\n          externalManager.itemEnd(url);\n          onLoad(result);\n          resolve(result);\n        } catch (e) {\n          console.error(e);\n          internalManager.onError(url);\n        }\n      }, onProgress);\n    });\n  }\n  parse(input) {\n    const regExpTitle = /TITLE +\"([^\"]*)\"/;\n    const regExpSize = /LUT_3D_SIZE +(\\d+)/;\n    const regExpDomainMin = /DOMAIN_MIN +([\\d.]+) +([\\d.]+) +([\\d.]+)/;\n    const regExpDomainMax = /DOMAIN_MAX +([\\d.]+) +([\\d.]+) +([\\d.]+)/;\n    const regExpDataPoints = /^([\\d.e+-]+) +([\\d.e+-]+) +([\\d.e+-]+) *$/gm;\n    let result = regExpTitle.exec(input);\n    const title = result !== null ? result[1] : null;\n    result = regExpSize.exec(input);\n    if (result === null) {\n      throw new Error(\"Missing LUT_3D_SIZE information\");\n    }\n    const size = Number(result[1]);\n    const data = new Float32Array(size ** 3 * 4);\n    const domainMin = new Vector36(0, 0, 0);\n    const domainMax = new Vector36(1, 1, 1);\n    result = regExpDomainMin.exec(input);\n    if (result !== null) {\n      domainMin.set(Number(result[1]), Number(result[2]), Number(result[3]));\n    }\n    result = regExpDomainMax.exec(input);\n    if (result !== null) {\n      domainMax.set(Number(result[1]), Number(result[2]), Number(result[3]));\n    }\n    if (domainMin.x > domainMax.x || domainMin.y > domainMax.y || domainMin.z > domainMax.z) {\n      domainMin.set(0, 0, 0);\n      domainMax.set(1, 1, 1);\n      throw new Error(\"Invalid input domain\");\n    }\n    let i = 0;\n    while ((result = regExpDataPoints.exec(input)) !== null) {\n      data[i++] = Number(result[1]);\n      data[i++] = Number(result[2]);\n      data[i++] = Number(result[3]);\n      data[i++] = 1;\n    }\n    const lut = new LookupTexture(data, size);\n    lut.domainMin.copy(domainMin);\n    lut.domainMax.copy(domainMax);\n    if (title !== null) {\n      lut.name = title;\n    }\n    return lut;\n  }\n};\n\n// src/loaders/SMAAImageLoader.js\nimport { Loader as Loader3, LoadingManager as LoadingManager5 } from \"three\";\nvar SMAAImageLoader = class extends Loader3 {\n  load(onLoad = () => {\n  }, onError = null) {\n    if (arguments.length === 4) {\n      onLoad = arguments[1];\n      onError = arguments[3];\n    } else if (arguments.length === 3 || typeof arguments[0] !== \"function\") {\n      onLoad = arguments[1];\n      onError = null;\n    }\n    const externalManager = this.manager;\n    const internalManager = new LoadingManager5();\n    return new Promise((resolve, reject) => {\n      const searchImage = new Image();\n      const areaImage = new Image();\n      internalManager.onError = (url) => {\n        externalManager.itemError(url);\n        if (onError !== null) {\n          onError(`Failed to load ${url}`);\n          resolve();\n        } else {\n          reject(`Failed to load ${url}`);\n        }\n      };\n      internalManager.onLoad = () => {\n        const result = [searchImage, areaImage];\n        onLoad(result);\n        resolve(result);\n      };\n      searchImage.addEventListener(\"error\", (e) => {\n        internalManager.itemError(\"smaa-search\");\n      });\n      areaImage.addEventListener(\"error\", (e) => {\n        internalManager.itemError(\"smaa-area\");\n      });\n      searchImage.addEventListener(\"load\", () => {\n        externalManager.itemEnd(\"smaa-search\");\n        internalManager.itemEnd(\"smaa-search\");\n      });\n      areaImage.addEventListener(\"load\", () => {\n        externalManager.itemEnd(\"smaa-area\");\n        internalManager.itemEnd(\"smaa-area\");\n      });\n      externalManager.itemStart(\"smaa-search\");\n      externalManager.itemStart(\"smaa-area\");\n      internalManager.itemStart(\"smaa-search\");\n      internalManager.itemStart(\"smaa-area\");\n      searchImage.src = searchImageDataURL_default;\n      areaImage.src = areaImageDataURL_default;\n    });\n  }\n};\nexport {\n  AdaptiveLuminanceMaterial,\n  AdaptiveLuminancePass,\n  BlendFunction,\n  BlendMode,\n  BloomEffect,\n  KawaseBlurPass as BlurPass,\n  BokehEffect,\n  BokehMaterial,\n  BrightnessContrastEffect,\n  ChromaticAberrationEffect,\n  CircleOfConfusionMaterial,\n  ClearMaskPass,\n  ClearPass,\n  ColorAverageEffect,\n  ColorChannel,\n  ColorDepthEffect,\n  EdgeDetectionMaterial as ColorEdgesMaterial,\n  KawaseBlurMaterial as ConvolutionMaterial,\n  CopyMaterial,\n  CopyPass,\n  DepthComparisonMaterial,\n  DepthCopyMaterial,\n  DepthCopyMode,\n  DepthCopyPass,\n  DepthDownsamplingMaterial,\n  DepthDownsamplingPass,\n  DepthEffect,\n  DepthMaskMaterial,\n  DepthOfFieldEffect,\n  DepthPass,\n  DepthPickingPass,\n  DepthCopyPass as DepthSavePass,\n  DepthTestStrategy,\n  Disposable,\n  DotScreenEffect,\n  DownsamplingMaterial,\n  EdgeDetectionMaterial,\n  EdgeDetectionMode,\n  Effect,\n  EffectAttribute,\n  EffectComposer,\n  EffectMaterial,\n  EffectPass,\n  EffectShaderData,\n  EffectShaderSection,\n  FXAAEffect,\n  GammaCorrectionEffect,\n  GaussKernel,\n  GaussianBlurMaterial,\n  GaussianBlurPass,\n  GlitchEffect,\n  GlitchMode,\n  GodRaysEffect,\n  GodRaysMaterial,\n  GridEffect,\n  HueSaturationEffect,\n  Initializable,\n  KawaseBlurMaterial,\n  KawaseBlurPass,\n  KernelSize,\n  LUT1DEffect,\n  LUT3DEffect,\n  LUT3dlLoader,\n  LUTCubeLoader,\n  LUT3DEffect as LUTEffect,\n  LUTOperation,\n  LambdaPass,\n  LookupTexture,\n  LookupTexture as LookupTexture3D,\n  LuminanceMaterial,\n  LuminancePass,\n  MaskFunction,\n  MaskMaterial,\n  MaskPass,\n  MipmapBlurPass,\n  NoiseEffect,\n  NoiseTexture,\n  NormalPass,\n  OutlineMaterial as OutlineEdgesMaterial,\n  OutlineEffect,\n  OutlineMaterial,\n  OverrideMaterialManager,\n  Pass,\n  PixelationEffect,\n  PredicationMode,\n  RawImageData,\n  RealisticBokehEffect,\n  RenderPass,\n  Resizable,\n  Resolution as Resizer,\n  Resolution,\n  SMAAAreaImageData,\n  SMAAEffect,\n  SMAAImageGenerator,\n  SMAAImageLoader,\n  SMAAPreset,\n  SMAASearchImageData,\n  SMAAWeightsMaterial,\n  SSAOEffect,\n  SSAOMaterial,\n  CopyPass as SavePass,\n  ScanlineEffect,\n  EffectShaderSection as Section,\n  Selection,\n  SelectiveBloomEffect,\n  SepiaEffect,\n  ShaderPass,\n  ShockWaveEffect,\n  TetrahedralUpscaler,\n  TextureEffect,\n  Timer,\n  ToneMappingEffect,\n  ToneMappingMode,\n  UpsamplingMaterial,\n  VignetteEffect,\n  VignetteTechnique,\n  WebGLExtension\n};\n","let webGLAvailable, webGL2Available;\nfunction isWebGLAvailable() {\n  if (webGLAvailable !== undefined) return webGLAvailable;\n\n  try {\n    var _gl$getExtension;\n\n    let gl;\n    const canvas = document.createElement('canvas');\n    webGLAvailable = !!(window.WebGLRenderingContext && (gl = canvas.getContext('webgl')));\n    if (gl) (_gl$getExtension = gl.getExtension('WEBGL_lose_context')) === null || _gl$getExtension === void 0 ? void 0 : _gl$getExtension.loseContext();\n    return webGLAvailable;\n  } catch (e) {\n    return webGLAvailable = false;\n  }\n}\nfunction isWebGL2Available() {\n  if (webGL2Available !== undefined) return webGL2Available;\n\n  try {\n    var _gl$getExtension2;\n\n    let gl;\n    const canvas = document.createElement('canvas');\n    webGL2Available = !!(window.WebGL2RenderingContext && (gl = canvas.getContext('webgl2')));\n    if (gl) (_gl$getExtension2 = gl.getExtension('WEBGL_lose_context')) === null || _gl$getExtension2 === void 0 ? void 0 : _gl$getExtension2.loseContext();\n    return webGL2Available;\n  } catch (e) {\n    return webGL2Available = false;\n  }\n}\nfunction getWebGLErrorMessage() {\n  return this.getErrorMessage(1);\n}\nfunction getWebGL2ErrorMessage() {\n  return this.getErrorMessage(2);\n}\nfunction getErrorMessage(version) {\n  const names = {\n    1: 'WebGL',\n    2: 'WebGL 2'\n  };\n  const contexts = {\n    1: window.WebGLRenderingContext,\n    2: window.WebGL2RenderingContext\n  };\n  const element = document.createElement('div');\n  element.id = 'webglmessage';\n  element.style.fontFamily = 'monospace';\n  element.style.fontSize = '13px';\n  element.style.fontWeight = 'normal';\n  element.style.textAlign = 'center';\n  element.style.background = '#fff';\n  element.style.color = '#000';\n  element.style.padding = '1.5em';\n  element.style.width = '400px';\n  element.style.margin = '5em auto 0';\n  let message = 'Your $0 does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">$1</a>';\n\n  if (contexts[version]) {\n    message = message.replace('$0', 'graphics card');\n  } else {\n    message = message.replace('$0', 'browser');\n  }\n\n  message = message.replace('$1', names[version]);\n  element.innerHTML = message;\n  return element;\n}\n\nexport { getErrorMessage, getWebGL2ErrorMessage, getWebGLErrorMessage, isWebGL2Available, isWebGLAvailable };\n","import { BlendFunction, BloomEffect, BrightnessContrastEffect, ChromaticAberrationEffect, ColorAverageEffect, ColorDepthEffect, DepthEffect, EffectComposer as EffectComposer$1, RenderPass, NormalPass, DepthDownsamplingPass, EffectPass, DepthOfFieldEffect, DotScreenEffect, GlitchEffect, GlitchMode, GodRaysEffect, GridEffect, HueSaturationEffect, NoiseEffect, OutlineEffect, PixelationEffect, ScanlineEffect, SelectiveBloomEffect, SepiaEffect, SSAOEffect, SMAAPreset, EdgeDetectionMode, SMAAImageLoader, SMAAEffect, TextureEffect, ToneMappingEffect, VignetteEffect, ShockWaveEffect, LUTEffect, KernelSize } from 'postprocessing';\nimport React, { forwardRef, useMemo, useLayoutEffect, createContext, useEffect, useRef, useImperativeHandle, useContext, useState } from 'react';\nimport { Vector2, HalfFloatType, Vector3, TextureLoader, sRGBEncoding, RepeatWrapping } from 'three';\nimport { useThree, useFrame, useLoader } from '@react-three/fiber';\nimport { isWebGL2Available } from 'three-stdlib';\nimport mergeRefs from 'react-merge-refs';\nimport _extends from '@babel/runtime/helpers/esm/extends';\nimport { SSRPass } from 'screen-space-reflections';\n\nconst isRef = ref => !!ref.current;\n\nconst resolveRef = ref => isRef(ref) ? ref.current : ref;\nconst wrapEffect = function (effectImpl, defaultBlendMode) {\n  if (defaultBlendMode === void 0) {\n    defaultBlendMode = BlendFunction.NORMAL;\n  }\n\n  return /*#__PURE__*/forwardRef(function Wrap(_ref, ref) {\n    let {\n      blendFunction,\n      opacity,\n      ...props\n    } = _ref;\n    const invalidate = useThree(state => state.invalidate);\n    const effect = useMemo(() => new effectImpl(props), [props]);\n    useLayoutEffect(() => {\n      effect.blendMode.blendFunction = !blendFunction && blendFunction !== 0 ? defaultBlendMode : blendFunction;\n      if (opacity !== undefined) effect.blendMode.opacity.value = opacity;\n      invalidate();\n    }, [blendFunction, effect.blendMode, opacity]);\n    return /*#__PURE__*/React.createElement(\"primitive\", {\n      ref: ref,\n      object: effect,\n      dispose: null\n    });\n  });\n};\nconst useVector2 = (props, key) => {\n  const vec = props[key];\n  return useMemo(() => {\n    if (vec instanceof Vector2) {\n      return new Vector2().set(vec.x, vec.y);\n    } else if (Array.isArray(vec)) {\n      const [x, y] = vec;\n      return new Vector2().set(x, y);\n    }\n  }, [vec]);\n};\n\nconst Bloom = wrapEffect(BloomEffect, BlendFunction.SCREEN);\n\nconst BrightnessContrast = wrapEffect(BrightnessContrastEffect);\n\nconst ChromaticAberration = /*#__PURE__*/forwardRef(function ChromaticAberration(props, ref) {\n  const offset = useVector2(props, 'offset');\n  const effect = useMemo(() => new ChromaticAberrationEffect({ ...props,\n    offset\n  }), [offset, props]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst ColorAverage = /*#__PURE__*/forwardRef(function ColorAverage(_ref, ref) {\n  let {\n    blendFunction = BlendFunction.NORMAL\n  } = _ref;\n\n  /** Because ColorAverage blendFunction is not an object but a number, we have to define a custom prop \"blendFunction\" */\n  const effect = useMemo(() => new ColorAverageEffect(blendFunction), [blendFunction]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst ColorDepth = wrapEffect(ColorDepthEffect);\n\nconst Depth = wrapEffect(DepthEffect);\n\nconst EffectComposerContext = /*#__PURE__*/createContext(null);\nconst EffectComposer = /*#__PURE__*/React.memo( /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    children,\n    camera,\n    scene,\n    resolutionScale,\n    enabled = true,\n    renderPriority = 1,\n    autoClear = true,\n    depthBuffer,\n    disableNormalPass,\n    stencilBuffer,\n    multisampling = 8,\n    frameBufferType = HalfFloatType\n  } = _ref;\n  const {\n    gl,\n    scene: defaultScene,\n    camera: defaultCamera,\n    size\n  } = useThree();\n  scene = scene || defaultScene;\n  camera = camera || defaultCamera;\n  const [composer, normalPass, downSamplingPass] = useMemo(() => {\n    const webGL2Available = isWebGL2Available(); // Initialize composer\n\n    const effectComposer = new EffectComposer$1(gl, {\n      depthBuffer,\n      stencilBuffer,\n      multisampling: multisampling > 0 && webGL2Available ? multisampling : 0,\n      frameBufferType\n    }); // Add render pass\n\n    effectComposer.addPass(new RenderPass(scene, camera)); // Create normal pass\n\n    let downSamplingPass = null;\n    let normalPass = null;\n\n    if (!disableNormalPass) {\n      normalPass = new NormalPass(scene, camera);\n      normalPass.enabled = false;\n      effectComposer.addPass(normalPass);\n\n      if (resolutionScale !== undefined && webGL2Available) {\n        downSamplingPass = new DepthDownsamplingPass({\n          normalBuffer: normalPass.texture,\n          resolutionScale\n        });\n        downSamplingPass.enabled = false;\n        effectComposer.addPass(downSamplingPass);\n      }\n    }\n\n    return [effectComposer, normalPass, downSamplingPass];\n  }, [camera, gl, depthBuffer, stencilBuffer, multisampling, frameBufferType, scene, disableNormalPass, resolutionScale]);\n  useEffect(() => composer == null ? void 0 : composer.setSize(size.width, size.height), [composer, size]);\n  useFrame((_, delta) => {\n    if (enabled) {\n      gl.autoClear = autoClear;\n      composer.render(delta);\n    }\n  }, enabled ? renderPriority : 0);\n  const group = useRef(null);\n  useLayoutEffect(() => {\n    let effectPass;\n\n    if (group.current && group.current.__r3f && composer) {\n      effectPass = new EffectPass(camera, ...group.current.__r3f.objects);\n      effectPass.renderToScreen = true;\n      composer.addPass(effectPass);\n      if (normalPass) normalPass.enabled = true;\n      if (downSamplingPass) downSamplingPass.enabled = true;\n    }\n\n    return () => {\n      if (effectPass) composer == null ? void 0 : composer.removePass(effectPass);\n      if (normalPass) normalPass.enabled = false;\n      if (downSamplingPass) downSamplingPass.enabled = false;\n    };\n  }, [composer, children, camera, normalPass, downSamplingPass]); // Memoize state, otherwise it would trigger all consumers on every render\n\n  const state = useMemo(() => ({\n    composer,\n    normalPass,\n    downSamplingPass,\n    resolutionScale,\n    camera,\n    scene\n  }), [composer, normalPass, downSamplingPass, resolutionScale, camera, scene]); // Expose the composer\n\n  useImperativeHandle(ref, () => composer, [composer]);\n  return /*#__PURE__*/React.createElement(EffectComposerContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(\"group\", {\n    ref: group\n  }, children));\n}));\n\nconst DepthOfField = /*#__PURE__*/forwardRef(function DepthOfField(_ref, ref) {\n  let {\n    target,\n    depthTexture,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const {\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new DepthOfFieldEffect(camera, props), [camera, props]);\n  useLayoutEffect(() => {\n    if (target) {\n      const vec = target instanceof Vector3 ? new Vector3().set(target.x, target.y, target.z) : new Vector3().set(target[0], target[1], target[2]);\n      effect.target = vec;\n    }\n\n    if (depthTexture) effect.setDepthTexture(depthTexture.texture, depthTexture.packing);\n    invalidate();\n  }, [target, depthTexture, effect]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst DotScreen = wrapEffect(DotScreenEffect);\n\nconst Glitch = /*#__PURE__*/forwardRef(function Glitch(_ref, ref) {\n  let {\n    active = true,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const delay = useVector2(props, 'delay');\n  const duration = useVector2(props, 'duration');\n  const strength = useVector2(props, 'strength');\n  const effect = useMemo(() => new GlitchEffect({ ...props,\n    delay,\n    duration,\n    strength\n  }), [delay, duration, props, strength]);\n  useLayoutEffect(() => {\n    effect.mode = active ? props.mode || GlitchMode.SPORADIC : GlitchMode.DISABLED;\n    invalidate();\n  }, [active, effect, props.mode]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst GodRays = /*#__PURE__*/forwardRef(function GodRays(props, ref) {\n  const {\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new GodRaysEffect(camera, props.sun, props), [camera, props]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Grid = /*#__PURE__*/forwardRef(function Grid(_ref, ref) {\n  let {\n    size,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const effect = useMemo(() => new GridEffect(props), [props]);\n  useLayoutEffect(() => {\n    if (size) effect.setSize(size.width, size.height);\n    invalidate();\n  }, [effect, size]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst HueSaturation = wrapEffect(HueSaturationEffect);\n\nconst Noise = wrapEffect(NoiseEffect, BlendFunction.COLOR_DODGE);\n\nconst selectionContext = /*#__PURE__*/createContext(null);\nfunction Selection(_ref) {\n  let {\n    children,\n    enabled = true\n  } = _ref;\n  const [selected, select] = useState([]);\n  const value = useMemo(() => ({\n    selected,\n    select,\n    enabled\n  }), [selected, select, enabled]);\n  return /*#__PURE__*/React.createElement(selectionContext.Provider, {\n    value: value\n  }, children);\n}\nfunction Select(_ref2) {\n  let {\n    enabled = false,\n    children,\n    ...props\n  } = _ref2;\n  const group = useRef(null);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    if (api && enabled) {\n      let changed = false;\n      const current = [];\n      group.current.traverse(o => {\n        o.type === 'Mesh' && current.push(o);\n        if (api.selected.indexOf(o) === -1) changed = true;\n      });\n\n      if (changed) {\n        api.select(state => [...state, ...current]);\n        return () => {\n          api.select(state => state.filter(selected => !current.includes(selected)));\n        };\n      }\n    }\n  }, [enabled, children]);\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: group\n  }, props), children);\n}\n\nconst Outline = /*#__PURE__*/forwardRef(function Outline(_ref, forwardRef) {\n  let {\n    selection = [],\n    selectionLayer = 10,\n    blendFunction,\n    patternTexture,\n    edgeStrength,\n    pulseSpeed,\n    visibleEdgeColor,\n    hiddenEdgeColor,\n    width,\n    height,\n    kernelSize,\n    blur,\n    xRay,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const {\n    scene,\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new OutlineEffect(scene, camera, {\n    blendFunction,\n    patternTexture,\n    edgeStrength,\n    pulseSpeed,\n    visibleEdgeColor,\n    hiddenEdgeColor,\n    width,\n    height,\n    kernelSize,\n    blur,\n    xRay\n  }), [blendFunction, blur, camera, edgeStrength, height, hiddenEdgeColor, kernelSize, patternTexture, pulseSpeed, scene, visibleEdgeColor, width, xRay]);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    // Do not allow array selection if declarative selection is active\n    // TODO: array selection should probably be deprecated altogether\n    if (!api && selection) {\n      effect.selection.set(Array.isArray(selection) ? selection.map(resolveRef) : [resolveRef(selection)]);\n      invalidate();\n      return () => {\n        effect.selection.clear();\n        invalidate();\n      };\n    }\n  }, [effect, selection, api]);\n  useEffect(() => {\n    effect.selectionLayer = selectionLayer;\n    invalidate();\n  }, [effect, selectionLayer]);\n  const ref = useRef();\n  useEffect(() => {\n    if (api && api.enabled) {\n      var _api$selected;\n\n      const effect = ref.current;\n\n      if ((_api$selected = api.selected) != null && _api$selected.length) {\n        effect.selection.set(api.selected);\n        invalidate();\n        return () => {\n          effect.selection.clear();\n          invalidate();\n        };\n      }\n    }\n  }, [api]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: mergeRefs([ref, forwardRef]),\n    object: effect\n  });\n});\n\nconst Pixelation = /*#__PURE__*/forwardRef(function Pixelation(_ref, ref) {\n  let {\n    granularity = 5\n  } = _ref;\n\n  /** Because GlitchEffect granularity is not an object but a number, we have to define a custom prop \"granularity\" */\n  const effect = useMemo(() => new PixelationEffect(granularity), [granularity]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Scanline = wrapEffect(ScanlineEffect, BlendFunction.OVERLAY);\n\nconst addLight = (light, effect) => light.layers.enable(effect.selection.layer);\n\nconst removeLight = (light, effect) => light.layers.disable(effect.selection.layer);\n\nconst SelectiveBloom = /*#__PURE__*/forwardRef(function SelectiveBloom(_ref, forwardRef) {\n  let {\n    selection = [],\n    selectionLayer = 10,\n    lights = [],\n    luminanceThreshold,\n    luminanceSmoothing,\n    intensity,\n    width,\n    height,\n    kernelSize\n  } = _ref;\n\n  if (lights.length === 0) {\n    console.warn('SelectiveBloom requires lights to work.');\n  }\n\n  const invalidate = useThree(state => state.invalidate);\n  const {\n    scene,\n    camera\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => new SelectiveBloomEffect(scene, camera, {\n    blendFunction: BlendFunction.SCREEN,\n    luminanceThreshold,\n    luminanceSmoothing,\n    intensity,\n    width,\n    height,\n    kernelSize\n  }), [camera, height, intensity, kernelSize, luminanceSmoothing, luminanceThreshold, scene, width]);\n  const api = useContext(selectionContext);\n  useEffect(() => {\n    // Do not allow array selection if declarative selection is active\n    // TODO: array selection should probably be deprecated altogether\n    if (!api && selection) {\n      effect.selection.set(Array.isArray(selection) ? selection.map(resolveRef) : [resolveRef(selection)]);\n      invalidate();\n      return () => {\n        effect.selection.clear();\n        invalidate();\n      };\n    }\n  }, [effect, selection, api]);\n  useEffect(() => {\n    effect.selection.layer = selectionLayer;\n    invalidate();\n  }, [effect, selectionLayer]);\n  useEffect(() => {\n    if (lights && lights.length > 0) {\n      lights.forEach(light => addLight(resolveRef(light), effect));\n      invalidate();\n      return () => {\n        lights.forEach(light => removeLight(resolveRef(light), effect));\n        invalidate();\n      };\n    }\n  }, [effect, lights, selectionLayer]);\n  const ref = useRef();\n  useEffect(() => {\n    if (api && api.enabled) {\n      var _api$selected;\n\n      const effect = ref.current;\n\n      if ((_api$selected = api.selected) != null && _api$selected.length) {\n        effect.selection.set(api.selected);\n        invalidate();\n        return () => {\n          effect.selection.clear();\n          invalidate();\n        };\n      }\n    }\n  }, [api]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: mergeRefs([ref, forwardRef]),\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Sepia = wrapEffect(SepiaEffect);\n\nconst SSAO = /*#__PURE__*/forwardRef(function SSAO(props, ref) {\n  const {\n    camera,\n    normalPass,\n    downSamplingPass,\n    resolutionScale\n  } = useContext(EffectComposerContext);\n  const effect = useMemo(() => {\n    if (normalPass === null && downSamplingPass === null) {\n      console.error('Please enable the NormalPass in the EffectComposer in order to use SSAO.');\n      return null;\n    }\n\n    return new SSAOEffect(camera, normalPass && !downSamplingPass ? normalPass.texture : null, {\n      blendFunction: BlendFunction.MULTIPLY,\n      samples: 30,\n      rings: 4,\n      distanceThreshold: 1.0,\n      distanceFalloff: 0.0,\n      rangeThreshold: 0.5,\n      rangeFalloff: 0.1,\n      luminanceInfluence: 0.9,\n      radius: 20,\n      scale: 0.5,\n      bias: 0.5,\n      intensity: 1.0,\n      color: null,\n      // @ts-ignore\n      normalDepthBuffer: downSamplingPass ? downSamplingPass.texture : null,\n      resolutionScale: resolutionScale != null ? resolutionScale : 1,\n      depthAwareUpsampling: true,\n      ...props\n    });\n  }, [camera, normalPass, props]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst SMAA = /*#__PURE__*/forwardRef(function SMAA(_ref, ref) {\n  let {\n    preset = SMAAPreset.HIGH,\n    edgeDetectionMode = EdgeDetectionMode.COLOR\n  } = _ref;\n  const smaaProps = useLoader(SMAAImageLoader, '');\n  const effect = useMemo(() => new SMAAEffect(...smaaProps, preset, edgeDetectionMode), [smaaProps, preset, edgeDetectionMode]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst Texture = /*#__PURE__*/forwardRef(function Texture(_ref, ref) {\n  let {\n    textureSrc,\n    texture,\n    ...props\n  } = _ref;\n  const t = useLoader(TextureLoader, textureSrc);\n  useLayoutEffect(() => {\n    t.encoding = sRGBEncoding;\n    t.wrapS = t.wrapT = RepeatWrapping;\n  }, [t]);\n  const effect = useMemo(() => new TextureEffect({ ...props,\n    texture: t || texture\n  }), [props, t, texture]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst ToneMapping = wrapEffect(ToneMappingEffect);\n\nconst Vignette = wrapEffect(VignetteEffect);\n\nconst ShockWave = wrapEffect(ShockWaveEffect);\n\nconst LUT = /*#__PURE__*/forwardRef(function LUT(_ref, ref) {\n  let {\n    lut,\n    tetrahedralInterpolation,\n    ...props\n  } = _ref;\n  const invalidate = useThree(state => state.invalidate);\n  const effect = useMemo(() => new LUTEffect(lut, props), [lut, props]);\n  useLayoutEffect(() => {\n    if (lut) effect.setLUT(lut);\n    if (tetrahedralInterpolation) effect.setTetrahedralInterpolationEnabled(tetrahedralInterpolation);\n    invalidate();\n  }, [effect, lut, tetrahedralInterpolation]);\n  return /*#__PURE__*/React.createElement(\"primitive\", {\n    ref: ref,\n    object: effect,\n    dispose: null\n  });\n});\n\nconst SSR = /*#__PURE__*/forwardRef(function SSR(_ref, ref) {\n  let {\n    resolutionScale = 1,\n    blurSize = 512,\n    enabled = true,\n    ...props\n  } = _ref;\n  const {\n    size,\n    viewport,\n    invalidate\n  } = useThree();\n  const {\n    composer,\n    scene,\n    camera\n  } = useContext(EffectComposerContext);\n  const [pass] = useState(() => new SSRPass(scene, camera, {\n    width: size.width * viewport.dpr * resolutionScale,\n    height: size.height * viewport.dpr * resolutionScale,\n    blurWidth: blurSize,\n    blurHeight: blurSize,\n    blurKernelSize: KernelSize.SMALL,\n    rayStep: 0.1,\n    intensity: 1,\n    power: 1,\n    depthBlur: 0.1,\n    enableJittering: false,\n    jitter: 0.1,\n    jitterSpread: 0.1,\n    roughnessFadeOut: 1,\n    MAX_STEPS: 20,\n    NUM_BINARY_SEARCH_STEPS: 5,\n    maxDepthDifference: 1,\n    maxDepth: 1,\n    thickness: 10,\n    ior: 1.45,\n    useBlur: true,\n    useMRT: true,\n    useNormalMap: true,\n    useRoughnessMap: true,\n    ...props\n  }));\n  useEffect(() => {\n    Object.keys(props).forEach(key => pass.reflectionUniforms[key] && (pass.reflectionUniforms[key].value = props[key]));\n    invalidate();\n  }, [props]);\n  useEffect(() => {\n    // Steps\n    pass.reflectionsPass.fullscreenMaterial.defines.MAX_STEPS = Math.ceil(props.MAX_STEPS);\n    pass.reflectionsPass.fullscreenMaterial.defines.NUM_BINARY_SEARCH_STEPS = Math.ceil(props.NUM_BINARY_SEARCH_STEPS); // Blur\n\n    if (props.useBlur) {\n      pass.fullscreenMaterial.defines.USE_BLUR = '';\n      pass.reflectionsPass.fullscreenMaterial.defines.USE_BLUR = '';\n    } else {\n      delete pass.fullscreenMaterial.defines.USE_BLUR;\n      delete pass.reflectionsPass.fullscreenMaterial.defines.USE_BLUR;\n    } // Jitter\n\n\n    if (props.enableJittering) {\n      pass.reflectionsPass.fullscreenMaterial.defines.USE_JITTERING = '';\n    } else {\n      delete pass.reflectionsPass.fullscreenMaterial.defines.USE_JITTERING;\n    } // Enabled\n\n\n    pass.fullscreenMaterial.defines.RENDER_MODE = enabled ? 0 : 4; // Update materials\n\n    pass.reflectionsPass.fullscreenMaterial.needsUpdate = true;\n    pass.fullscreenMaterial.needsUpdate = true;\n    invalidate();\n  }, [enabled, props.useBlur, props.enableJittering, props.NUM_BINARY_SEARCH_STEPS, props.MAX_STEPS]);\n  useEffect(() => {\n    pass.setSize(size.width * viewport.dpr * resolutionScale, size.height * viewport.dpr * resolutionScale);\n    pass.kawaseBlurPass.setSize(blurSize, blurSize);\n    invalidate();\n  }, [resolutionScale, blurSize, size, viewport, composer, pass, invalidate]);\n  useLayoutEffect(() => {\n    composer.addPass(pass);\n    return () => {\n      composer.removePass(pass); //pass.dispose()\n    };\n  }, [composer, pass]);\n  return null;\n});\n\nexport { Bloom, BrightnessContrast, ChromaticAberration, ColorAverage, ColorDepth, Depth, DepthOfField, DotScreen, EffectComposer, EffectComposerContext, Glitch, GodRays, Grid, HueSaturation, LUT, Noise, Outline, Pixelation, SMAA, SSAO, SSR, Scanline, Select, Selection, SelectiveBloom, Sepia, ShockWave, Texture, ToneMapping, Vignette, selectionContext };\n"],"names":["boundingBox","THREE","boundingBoxSize","BBAnchor","anchor","props","ref","React","parentRef","_ref$current","_ref$current$parent","current","parent","add","useFrame","setFromObject","getSize","position","set","x","y","z","_extends","LineSegmentsGeometry","_defineProperty","Box3","Vector3","setIndex","setAttribute","Float32BufferAttribute","matrix","start","this","attributes","instanceStart","end","instanceEnd","undefined","applyMatrix4","needsUpdate","computeBoundingBox","boundingSphere","computeBoundingSphere","array","lineSegments","Float32Array","Array","isArray","console","error","instanceBuffer","InstancedInterleavedBuffer","InterleavedBufferAttribute","colors","instanceColorBuffer","geometry","setPositions","from","mesh","fromWireframeGeometry","WireframeGeometry","isBufferGeometry","setFromBufferAttribute","box","union","Sphere","center","getCenter","maxRadiusSq","i","il","count","vector","fromBufferAttribute","Math","max","distanceToSquared","radius","sqrt","isNaN","InstancedBufferGeometry","LineUniforms","linewidth","value","resolution","Vector2","dashScale","dashSize","dashOffset","gapSize","opacity","ShaderLib","uniforms","UniformsUtils","UniformsLib","vertexShader","fragmentShader","LineMaterial","parameters","clipping","Color","Object","defineProperties","color","enumerable","get","diffuse","colorObj","getHex","copy","alphaToCoverage","Boolean","defines","ALPHA_TO_COVERAGE","extensions","derivatives","dashed","USE_DASH","setValues","ShaderMaterial","LineSegments2","_geometry","_material","random","lineDistances","data","j","l","distStart","distEnd","distanceTo","instanceDistanceBuffer","Vector4","Matrix4","Line3","raycaster","intersects","camera","ray","projectionMatrix","material","lineWidth","near","at","ssOrigin","w","matrixWorldInverse","multiplyScalar","ssOrigin3","matrixWorld","mvMatrix","multiplyMatrices","rayStart","rayEnd","deltaDist","t","lerp","line","param","closestPointToPointParameter","closestPoint","zPos","MathUtils","isInClipSpace","isInside","pointOnLine","point","distanceSqToSegment","push","distance","origin","face","faceIndex","object","uv","Mesh","LineGeometry","length","points","Line2","Line","vertexColors","rest","line2","lineMaterial","lineGeom","geom","pValues","map","p","toArray","flat","cValues","c","setColors","computeLineDistances","dispose","attach","v","QuadraticBezierLine","forwardref","mid","segments","QuadraticBezierCurve3","curve","getPoints","v0","v2","v1","clone","sub","setPoints","mergeRefs","_inverseMatrix","_ray","Ray","_sphere","_vA","meshBounds","intersectsSphere","invert","intersectBox","vA","vB","vC","uvA","uvB","uvC","intersectionPoint","checkBufferGeometryIntersection","a","b","side","intersection","pA","pB","pC","BackSide","intersectTriangle","DoubleSide","checkIntersection","Triangle","normal","materialIndex","intersectTri","geo","tri","intersections","triOffset","index","getX","convertRaycastIntersect","hit","far","TRIANGLE_INTERSECT_COST","BYTES_PER_NODE","IS_LEAFNODE_FLAG","FLOAT32_EPSILON","pow","MeshBVHNode","arrayToBox","nodeIndex32","target","min","getLongestEdgeIndex","bounds","splitDimIdx","splitDist","Infinity","dist","copyBounds","source","unionBounds","aVal","bVal","d","d3","expandByTriangleBounds","startIndex","triangleBounds","tCenter","tHalf","tMin","tMax","computeSurfaceArea","d0","d1","d2","getBounds","offset","centroidTarget","minx","miny","minz","maxx","maxy","maxz","cminx","cminy","cminz","cmaxx","cmaxy","cmaxz","includeCentroid","cx","hx","lx","rx","cy","hy","ly","ry","cz","hz","lz","rz","partition","split","left","right","pos","axisOffset","axis","t0","t1","t2","BIN_COUNT","binsSort","candidate","sahBins","fill","rightCacheBounds","leftCacheBounds","leftBounds","getOptimalSplit","nodeBoundingData","centroidBoundingData","strategy","avg","getAverage","rootSurfaceArea","bestCost","cStart","cEnd","axisLeft","binWidth","truncatedBins","bin","sort","splitCount","bi","splice","leftCount","rightCount","rightBounds","leftProb","rightProb","cost","binIndex","lastBin","nextBin","binCount","warn","buildTree","options","triggerProgress","trianglesProcessed","onProgress","totalTriangles","splitNode","node","depth","reachedMaxDepth","maxDepth","verbose","maxLeafTris","boundingData","splitOffset","indexArray","splitAxis","lstart","lcount","cacheCentroidBoundingData","rstart","rcount","vertexCount","BufferConstructor","useSharedArrayBuffer","SharedArrayBuffer","ArrayBuffer","Uint32Array","Uint16Array","BufferAttribute","ensureIndex","fullBounds","posAttr","posArr","triCount","bufferOffset","stride","isInterleavedBufferAttribute","tri3","tri6","ai","ci","el","halfExtents","el2","abs","computeTriangleBounds","roots","ranges","groups","rangeBoundaries","Set","group","sortedBoundaries","values","getRootIndexRanges","range","root","getCentroidBounds","buildPackedTree","float32Array","uint32Array","uint16Array","packedRoots","nodeCount","countNodes","buffer","populateBuffer","byteOffset","stride4Offset","stride2Offset","isLeaf","nextUnusedPointer","Error","SeparatingAxisBounds","field","val","dot","other","prototype","setFromBox","boxMin","boxMax","cacheSatBounds","closestPointLineToLine","dir1","dir2","v02","l1","l2","result","v10","v32","subVectors","d0232","d3210","d3232","d0210","denom","closestPointsSegmentToSegment","paramResult","temp1","temp2","target1","target2","p2","closestPointToPoint","closestPoint2","sphereIntersectTriangle","closestPointTemp","projectedPointTemp","planeTemp","Plane","lineTemp","sphere","triangle","plane","getPlane","distanceToPoint","pp","projectPoint","containsPoint","isNearZero","ExtendedTriangle","args","isExtendedTriangle","satAxes","satBounds","axis0","sab0","getNormal","setFromPoints","axis1","sab1","axis2","sab2","axis3","sab3","setFromNormalAndCoplanarPoint","closestPointToSegment","point1","point2","edge","segment","distSq","closestDistanceSq","nexti","intersectsTriangle","saTri2","arr1","arr2","cachedSatBounds","cachedSatBounds2","cachedAxis","tempDir","edge1","edge2","update","plane1","plane2","satBounds1","satAxes1","sb","sa","isSeparated","satBounds2","satAxes2","sa1","i2","sa2","crossVectors","points1","found1","count1","pNext","delta","targetPoint","startIntersects","doesIntersect","intersectLine","points2","found2","count2","tmp","s1","e1","s2","e2","separated1","separated2","distanceToTriangle","cornerFields","line1","lineTarget","otherVec","thisVec","f11","f12","f21","f22","OrientedBox","isOrientedBox","invMatrix","alignedSatBounds","setTriangle","ta","tb","tc","i0","i1","getY","getZ","iterateOverTriangles","intersectsTriangleFunc","contained","minVec","pi","setFromPointsField","intersectsBox","aabbBounds","saTri","pointsArr","triSatBounds","triSatAxes","clamp","distanceToBox","xyzFields","segments1","segments2","threshold","threshold2","nextIndex","nextIndex2","index2","p1","f1","f2","f3","PrimitivePool","getNewPrimitive","_getNewPrimitive","_primitives","primitives","pop","primitive","IS_LEAF","n16","OFFSET","n32","COUNT","LEFT_NODE","RIGHT_NODE","boxIntersection","raycast","nodeIndex16","_float32Array","_uint16Array","_uint32Array","intersectTris","leftIndex","intersectRay","rightIndex","raycastFirst","res","intersectClosestTri","c1","c2","SPLIT_AXIS","xyzAxis","leftToRight","direction","c1Result","c2Result","shapecast","_box1","_box2","boxStack","boxPool","getPrimitive","shapecastTraverse","releasePrimitive","intersectsBoundsFunc","intersectsRangeFunc","nodeScoreFunc","nodeIndexByteOffset","getLeftOffset","getRightEndOffset","score1","score2","box1","box2","temp","c1StopTraversal","isC1Leaf","c1Intersection","c2StopTraversal","isC2Leaf","c2Intersection","intersectsGeometry","triangle2","invertedMat","obb","obb2","otherGeometry","geometryToBvh","cachedObb","leftIntersection","rightIntersection","thisGeometry","thisIndex","thisPos","boundsTree","intersectsBounds","_prevBuffer","bufferStack","setBuffer","clearBuffer","SKIP_GENERATION","Symbol","aabb","aabb2","tempMatrix","temp3","temp4","tempBox","trianglePool","MeshBVH","assign","setBoundingBox","_roots","getBoundingBox","nodeIndices","indexArr","_traverse","byteLength","node32Index","force","node16Index","offsetLeft","offsetRight","forceChildren","includesLeft","includesRight","has","traverseLeft","traverseRight","leftChange","rightChange","didChange","lefti","righti","minLeftValue","maxLeftValue","minRightValue","maxRightValue","callback","rootIndex","stopTraversal","materialOrSide","FrontSide","isMaterial","isArrayMaterial","materialSide","startCount","jl","closestResult","geomToMesh","callbacks","_intersectsTriangleFunc","_orderNodesFunc","Function","originalTriangleFunc","i3","boundsTraverseOrder","intersectsRange","originalIntersectsRange","nodeIndex","otherBvh","matrixToLocal","intersectsRanges","intersectsTriangles","indexAttr","positionAttr","otherIndexAttr","otherPositionAttr","iterateOverDoubleTriangles","offset1","offset2","depth1","index1","depth2","originalIntersectsRanges","nodeIndex1","nodeIndex2","boxToMesh","minThreshold","maxThreshold","otherPos","otherIndex","tempTarget1","tempTargetDest1","tempTarget2","tempTargetDest2","closestDistance","closestDistanceTriIndex","closestDistanceOtherTriIndex","score","otherOffset","otherCount","minThresholdSq","maxThresholdSq","triIndex","makeEmpty","forEach","bvh","serialize","arguments","cloneBuffers","rootData","indexAttribute","getIndex","slice","deserialize","newIndex","originalRaycast","isMesh","results","call","apply","originalRaycastFirst","originalClosestPointToPoint","unshift","originalClosestPointToGeometry","closestPointToGeometry","isVector3","result1","result2","originalRefit","refit","terminationIndices","newNodeIndices","name","originalFunc","shift","tmpInverseMatrix","origMeshRaycastFunc","acceleratedRaycast","firstHitOnly","hits","computeBoundsTree","disposeBoundsTree","useBVH","SelectionBox","frustum","Frustum","tmpPoint","vecNear","vecTopLeft","vecTopRight","vecDownRight","vecDownLeft","vecFarTopLeft","vecFarTopRight","vecFarDownRight","vecFarDownLeft","vectemp1","vectemp2","vectemp3","scene","deep","startPoint","endPoint","collection","Number","MAX_VALUE","updateFrustum","searchChildInFrustum","EPSILON","updateProjectionMatrix","updateMatrixWorld","isPerspectiveCamera","setFromMatrixPosition","unproject","normalize","planes","setFromCoplanarPoints","isOrthographicCamera","top","down","isLine","isPoints","children","context","Select","multiple","onChange","border","backgroundColor","filter","customFilter","item","useThree","setEvents","gl","controls","size","hovered","hover","state","includes","o","active","dispatch","onClick","e","stopPropagation","shiftKey","onPointerMissed","selBox","element","document","createElement","style","pointerEvents","pointTopLeft","pointBottomRight","oldRaycasterEnabled","events","enabled","oldControlsEnabled","isDown","previous","addEventListener","pointerDown","passive","pointerMove","capture","pointerUp","removeEventListener","prepareRay","event","vec","offsetX","offsetY","width","height","_gl$domElement$parent","domElement","parentElement","appendChild","clientX","clientY","onSelectStart","onSelectMove","allSelected","select","uuid","shallow","_element$parentElemen","removeChild","onSelectOver","onPointerOver","onPointerOut","Provider","useCursor","body","cursor","_wrapNativeSuper","Class","_cache","Map","fn","toString","indexOf","TypeError","Wrapper","construct","getPrototypeOf","constructor","create","writable","configurable","setPrototypeOf","property","receiver","Reflect","desc","base","superPropBase","getOwnPropertyDescriptor","defineProperty","_set","isStrict","common_default","AdaptiveLuminanceMaterial","MIP_LEVEL_1X1","luminanceBuffer0","Uniform","luminanceBuffer1","minLuminance","deltaTime","tau","shaderTextureLOD","blending","NoBlending","depthWrite","depthTest","toneMapped","toFixed","mipLevel1x1","convolution_bokeh_default","ShaderMaterial2","getTextureDecoding","texture","isWebGL2","decoding","revision","parseInt","REVISION","format","RGBAFormat","type","UnsignedByteType","encoding","sRGBEncoding","LinearEncoding","orthographicDepthToViewZ","viewZToOrthographicDepth","viewZ","ShaderMaterial3","BlendFunction","ColorChannel","DepthCopyMode","DepthTestStrategy","EdgeDetectionMode","EffectAttribute","EffectShaderSection","FRAGMENT_HEAD","FRAGMENT_MAIN_UV","FRAGMENT_MAIN_IMAGE","VERTEX_HEAD","VERTEX_MAIN_SUPPORT","KernelSize","LUTOperation","MaskFunction","ToneMappingMode","VignetteTechnique","convolution_kawase_default","convolution_kawase_default2","kernelPresets","KawaseBlurMaterial","texelSize","inputBuffer","Uniform4","scale","Vector22","kernel","NoBlending4","setTexelSize","kernelSize","ShaderMaterial4","CopyMaterial","Uniform5","NoBlending5","ShaderMaterial5","depth_comparison_default","depth_comparison_default2","DepthComparisonMaterial","depthTexture","DEPTH_PACKING","depthBuffer","Uniform6","cameraNear","cameraFar","NoBlending6","depthPacking","RGBADepthPacking","adoptCameraSettings","PerspectiveCamera2","PERSPECTIVE_CAMERA","ShaderMaterial6","DepthDownsamplingMaterial","ShaderMaterial7","Uniform8","normalBuffer","Vector24","NoBlending8","BasicDepthPacking3","DOWNSAMPLE_NORMALS","ShaderMaterial8","DownsamplingMaterial","ShaderMaterial9","SAMPLES","Uniform10","Vector26","NoBlending10","ShaderMaterial10","edge_detection_default","edge_detection_default2","EffectMaterial","ShaderMaterial11","shaderParts","dithering","THREE_REVISION","REVISION2","ENCODE_OUTPUT","Uniform12","Vector28","aspect","time","NoBlending12","setShaderParts","setDefines","setUniforms","BasicDepthPacking6","setExtensions","replace","entries","entry","extension","encodeOutput","PerspectiveCamera4","ShaderMaterial12","convolution_gaussian_default","convolution_gaussian_default2","luminance_default","ShaderMaterial13","ShaderMaterial14","LuminanceMaterial","colorOutput","luminanceRange","Uniform15","smoothing","NoBlending15","THRESHOLD","COLOR","RANGE","ShaderMaterial15","mask_default","outline_default","ShaderMaterial16","outline_default2","OutlineMaterial","Vector210","Uniform17","NoBlending17","maskTexture","ShaderMaterial17","smaa_weights_default","smaa_weights_default2","UpsamplingMaterial","ShaderMaterial18","ShaderMaterial19","Uniform20","supportBuffer","Vector213","NoBlending20","ShaderMaterial20","dummyCamera","Camera","Pass","Scene","renderer","screen","rtt","needsSwap","needsDepthTexture","getFullscreenMaterial","vertices","uvs","BufferGeometry","addAttribute","getFullscreenTriangle","frustumCulled","fullscreenMaterial","BasicDepthPacking8","outputBuffer","stencilTest","alpha","frameBufferType","keys","key","CopyPass","renderTarget","autoResize","WebGLRenderTarget","minFilter","LinearFilter","magFilter","stencilBuffer","setRenderTarget","renderToScreen","render","setSize","UnsignedByteType3","FRAMEBUFFER_PRECISION_HIGH","outputEncoding","sRGBEncoding2","AdaptiveLuminancePass","luminanceBuffer","adaptationRate","renderTargetPrevious","WebGLRenderTarget2","NearestFilter","renderTargetAdapted","copyPass","ClearMaskPass","stencil","buffers","setLocked","setTest","ClearPass","color2","overrideClearColor","overrideClearAlpha","clearAlpha","getClearAlpha","hasOverrideClearColor","hasOverrideClearAlpha","getClearColor","setClearColor","setClearAlpha","clear","AUTO_SIZE","Resolution","resizable","Vector214","preferred","s","round","preferredWidth","preferredHeight","setScalar","dispatchEvent","baseHeight","getBaseWidth","getBaseHeight","getPreferredWidth","getPreferredHeight","EventDispatcher","workaroundEnabled","OverrideMaterialManager","originalMaterials","materials","materialsBackSide","materialsDoubleSide","materialsFlatShaded","materialsFlatShadedBackSide","materialsFlatShadedDoubleSide","setMaterial","meshCount","replaceMaterial","flatShading","isSkinnedMesh","isInstancedMesh","disposeMaterials","m2","skinning","shadowMapEnabled","shadowMap","traverse","overrideMaterial","concat","RenderPass","clearPass","overrideMaterialManager","ignoreBackground","skipShadowMapUpdate","selection","manager","mask","layers","background","shadowMapAutoUpdate","autoUpdate","getLayer","DepthPass","resolutionScale","resolutionX","resolutionY","renderPass","MeshDepthMaterial","RGBADepthPacking2","getClearPass","Color2","WebGLRenderTarget3","NearestFilter2","baseWidth","setBaseSize","DepthDownsamplingPass","WebGLRenderTarget4","NearestFilter3","FloatType","generateMipmaps","BasicDepthPacking9","capabilities","prefixSubstrings","prefix","substrings","strings","substring","prefixed","charAt","toUpperCase","regExp","RegExp","integrateEffect","effect","getFragmentShader","getVertexShader","mainImageExists","test","mainUvExists","getAttributes","functionRegExp","fragmentHead","fragmentMainUv","fragmentMainImage","vertexHead","vertexMainSupport","varyings","names","uvTransformation","needsUv","matchAll","u","delete","shaders","blendMode","blendModes","blendFunction","inputColorSpace","colorSpace","sRGBEncoding3","outputColorSpace","readDepth","blendOpacity","EffectPass","listener","handleEvent","effects","setEffects","skipRendering","minTime","maxTime","POSITIVE_INFINITY","EffectShaderData","id","blendRegExp","getShaderCode","getDepthTexture","trim","setShaderData","updateMaterial","BasicDepthPacking11","setDepthTexture","initialize","UnsignedByteType5","recompile","KawaseBlurPass","renderTargetA","WebGLRenderTarget7","renderTargetB","blurMaterial","copyMaterial","kernelSequence","previousBuffer","h","UnsignedByteType7","sRGBEncoding5","LuminancePass","WebGLRenderTarget8","UnsignedByteType8","MaskPass","inverse","inverted","getContext","writeValue","clearValue","setMask","setOp","REPLACE","setFunc","ALWAYS","setClear","EQUAL","KEEP","MipmapBlurPass","WebGLRenderTarget9","downsamplingMipmaps","upsamplingMipmaps","downsamplingMaterial","upsamplingMaterial","Vector215","levels","mipmap","mipmaps","UnsignedByteType9","sRGBEncoding6","NormalPass","MeshNormalMaterial","setBackgroundDisabled","setShadowMapDisabled","setOverrideClearColor","Color3","setOverrideClearAlpha","WebGLRenderTarget10","NearestFilter5","ShaderPass","input","UnsignedByteType10","MILLISECONDS_TO_SECONDS","Timer","previousTime","currentTime","fixedDelta","elapsed","timescale","fixedDeltaEnabled","autoReset","hidden","timestamp","performance","now","setAutoResetEnabled","EffectComposer","multisampling","createBuffer","passes","timer","autoRenderToScreen","setRenderer","samples","Vector216","getContextAttributes","UnsignedByteType11","sRGBEncoding7","autoClear","updateDOM","oldRenderer","parentNode","DepthTexture","DepthStencilFormat","UnsignedInt248Type","UnsignedIntType","getDrawingBufferSize","LinearFilter2","REVISION3","WebGLMultisampleRenderTarget","WebGLRenderTarget11","ignoreDepthForMultisampleCopy","pass","drawingBufferSize","createDepthTexture","reduce","deleteDepthTexture","getDelta","NOTEQUAL","updateStyle","isAutoResetEnabled","LinearEncoding2","getCoefficients","n","Float64Array","row0","row1","GaussKernel","edgeBias","weights","offsets","linearWeights","linearOffsets","generate","coefficients","floor","sum","offset0","weight0","weight1","linearWeightSum","Selection","iterable","layer","exclusive","currentLayer","disable","enable","objects","visible","blendFunctions","BlendMode","_blendFunction","Uniform21","EventDispatcher2","Effect","setChanged","_inputColorSpace","LinearEncoding3","_outputColorSpace","BasicDepthPacking12","Scene2","EventDispatcher3","bloom_default","BloomEffect","luminanceThreshold","luminanceSmoothing","mipmapBlur","intensity","Uniform22","WebGLRenderTarget12","blurPass","luminancePass","luminanceMaterial","mipmapBlurPass","sRGBEncoding8","brightness_contrast_default","BrightnessContrastEffect","brightness","contrast","Uniform24","sRGBEncoding9","color_depth_default","ColorDepthEffect","bits","Uniform25","bitDepth","depth_default","DepthEffect","dot_screen_default","DotScreenEffect","angle","PI","Uniform28","Vector218","acos","sin","cos","getNoise","channels","LuminanceFormat","RedFormat","RGFormat","RGBAFormat2","UnsignedByteType13","Uint8Array","DataTexture","Matrix42","hue_saturation_default","HueSaturationEffect","hue","saturation","Uniform33","Vector32","createCanvas","canvas","Image","drawImage","imageData","createImageData","putImageData","RawImageData","image","getImageData","worker_default","Color5","LookupTexture","FloatType5","RGBAFormat4","LinearEncoding4","LinearFilter3","wrapS","ClampToEdgeWrapping","wrapT","wrapR","unpackAlignment","domainMin","Vector33","domainMax","transferData","Promise","reject","resolve","workerURL","URL","createObjectURL","Blob","worker","Worker","lut","revokeObjectURL","transferList","postMessage","operation","img0","img1","size0","data0","data1","sizeSq","i4","r","g","iRGB","floatData","uint8Data","UnsignedByteType14","fromArray","convertLinearToSRGB","sRGBEncoding12","convertSRGBToLinear","DataTexture2","src","j4","DataTexture3D","bilinear","lerp2","e0","e3","webGL2Available","noise_default","NoiseEffect","premultiply","outline_default3","OutlineEffect","patternTexture","patternScale","edgeStrength","pulseSpeed","visibleEdgeColor","hiddenEdgeColor","blur","xRay","Uniform36","Color6","getBlendFunction","setBlendFunction","renderTargetMask","WebGLRenderTarget15","renderTargetOutline","depthPass","maskPass","outlinePass","outlineMaterial","getResolution","RepeatWrapping2","setVertexShader","pulse","setVisible","UnsignedByteType15","scanlines_default","ScanlineEffect","density","scrollSpeed","Uniform39","Vector223","shock_wave_default","shock_wave_default2","HALF_PI","Vector35","ab","ShockWaveEffect","speed","maxRadius","waveSize","amplitude","Uniform40","Vector224","screenPosition","uActive","getWorldDirection","angleTo","project","sepia_default","SepiaEffect","Uniform41","searchImageDataURL_default","areaImageDataURL_default","tone_mapping_default","ToneMappingEffect","adaptive","mode","maxLuminance","whitePoint","middleGrey","averageLuminance","Uniform45","renderTargetLuminance","WebGLRenderTarget19","LinearMipmapLinearFilter","adaptiveLuminancePass","adaptiveLuminanceMaterial","exponent","ceil","log2","setPreferredSize","vignette_default","VignetteEffect","technique","eskil","darkness","Uniform46","Loader","Loader2","Loader3","isWebGL2Available","_gl$getExtension2","window","WebGL2RenderingContext","getExtension","loseContext","resolveRef","isRef","wrapEffect","effectImpl","defaultBlendMode","forwardRef","_ref","invalidate","useMemo","useLayoutEffect","EffectComposerContext","createContext","renderPriority","disableNormalPass","HalfFloatType","defaultScene","defaultCamera","effectComposer","EffectComposer$1","addPass","downSamplingPass","normalPass","composer","useEffect","_","useRef","effectPass","__r3f","removePass","useImperativeHandle","selectionContext","Outline","selectionLayer","useContext","api","_api$selected","selected"],"sourceRoot":""}