"use strict";(self.webpackChunkpropetro_site3d=self.webpackChunkpropetro_site3d||[]).push([[605],{6605:function(n,e,o){o.r(e),o.d(e,{default:function(){return on}});var t=o(9439),r=o(9093),i=o(3655),s=o(4956),c=o(9324),u=o(5226),l=o(2791),a=o(1697),d=o(9192),p=o(1413),f=o(7543),m=o(6006),h=o(7760),x=o(7577),v=o(184);function j(n){var e=Object.assign({},n),o=(0,l.useRef)();return"Group"===e.node.type?(0,v.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}):(0,v.jsx)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,raycast:m.l,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.onHover(o)},onPointerOut:function(n){n.stopPropagation(),e.onHover(null)},onClick:function(n){n.stopPropagation(),e.onHover(o)},children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))})}var g=(0,l.forwardRef)((function(n,e){var o=(0,i.L)(n.cloudGlbURL).scene,r=(0,l.useState)(),s=(0,t.Z)(r,2),c=s[0],u=s[1];(0,f.j)(c,"pointer");var a=(0,x.tq)(),d=(0,l.useMemo)((function(){return o.children.forEach((function(e){e.isMesh&&(n.fast||a?e.material=new h.MeshBasicMaterial({color:e.material.color}):e.material=new h.MeshStandardMaterial({color:e.material.color,metalness:1,emissive:1,roughness:.5}))})),o.clone()}),[o.uuid]),m=function(n){n.stopPropagation(),u(!0)},g=function(n){n.stopPropagation(),u(!1)};return n.fast?(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:m,onPointerOut:g,children:(0,v.jsx)("primitive",{object:d})})):(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:e},n),{},{dispose:null,onPointerOver:m,onPointerOut:g,className:"cursor-pointer",children:d.children.map((function(o,t){return(0,v.jsx)(j,(0,p.Z)((0,p.Z)({},n),{},{node:o,index:t,onHover:function(){return n.onHover(e)}}),t+o.name)}))}))})),P=o(5647),Z=o(3433),y=o(7762),C=o(5410),S=o(9577),b=["children","opacity","radius","segments","color"],w=["color","name","connectedTo","position"],R=(0,l.createContext)(),L=(0,l.forwardRef)((function(n,e){var o=n.children,t=n.opacity,r=void 0===t?1:t,i=n.radius,s=void 0===i?.05:i,c=n.segments,u=void 0===c?32:c,l=n.color,a=void 0===l?"#ff1050":l,d=(0,C.Z)(n,b);return(0,v.jsxs)("mesh",(0,p.Z)((0,p.Z)({ref:e},d),{},{children:[(0,v.jsx)("circleGeometry",{args:[s,u]}),(0,v.jsx)("meshBasicMaterial",{transparent:r<1,opacity:r,color:a}),o]}))}));function k(n){var e=n.children,o=(0,l.useRef)(),r=(0,l.useState)([]),i=(0,t.Z)(r,2),s=i[0],u=i[1],a=(0,l.useMemo)((function(){var n,e=[],o=(0,y.Z)(s);try{var r=function(){var o=n.value;o.connectedTo.map((function(n){return[o.position,n.current.position]})).forEach((function(n){var o=(0,t.Z)(n,2),r=o[0],i=o[1];return e.push({start:r.clone().add({x:.35,y:0,z:0}),end:i.clone().add({x:-.35,y:0,z:0})})}))};for(o.s();!(n=o.n()).done;)r()}catch(i){o.e(i)}finally{o.f()}return e}),[s]);return(0,c.x)((function(n,e){return o.current.children.forEach((function(n){return n.children[0].material.uniforms.dashOffset.value-=10*e}))})),(0,v.jsxs)(R.Provider,{value:u,children:[(0,v.jsx)("group",{ref:o,children:a.map((function(n,e){return(0,v.jsxs)("group",{children:[(0,v.jsx)(S.R,(0,p.Z)((0,p.Z)({},n),{},{color:"white",dashed:!0,dashScale:50,gapSize:20}),e+"Bezier spot"),(0,v.jsx)(S.R,(0,p.Z)((0,p.Z)({},n),{},{color:"red",lineWidth:3,transparent:!0,opacity:.5}),e+"Bezier line")]},e+"Bezier group")}))}),e,a.map((function(n,e){var o=n.start,t=n.end;return(0,v.jsxs)("group",{"position-z":1,children:[(0,v.jsx)(L,{position:o}),(0,v.jsx)(L,{position:t})]},e+"Bezier circle")}))]})}var M=(0,l.forwardRef)((function(n,e){var o=n.color,r=void 0===o?"black":o,i=(n.name,n.connectedTo),s=void 0===i?[]:i,c=n.position,u=void 0===c?[0,0,0]:c,a=(0,C.Z)(n,w),d=(0,l.useContext)(R),f=(0,l.useState)((function(){return(0,P.Z)(h.Vector3,(0,Z.Z)(u))})),m=(0,t.Z)(f,1)[0],x=(0,l.useMemo)((function(){return{position:m,connectedTo:s}}),[m,s]);return(0,l.useLayoutEffect)((function(){return d((function(n){return[].concat((0,Z.Z)(n),[x])})),function(){d((function(n){return n.filter((function(n){return n!==x}))}))}}),[x,m,d]),(0,v.jsx)(L,(0,p.Z)({ref:e,opacity:.2,radius:.5,color:r,position:m},a))})),H=[0,-Math.PI/2,0],E=[0,Math.PI/2,0],B=[0,-1,-20],O=[15,1,-10],N=[10,-1,35],z=[0,0,20],F=[0,1,20],G=[0,Math.PI/2,0],T=o(3630),A=o(5132),V=o(8511),D=o(2935),U="Solid3034_60",_="Solid1061",I="Solid3034_49",Y="Solid1040",q="Solid3034_36",J=o(7916),K=["anchor"],W=new h.Box3,X=new h.Vector3,Q=function(n){var e=n.anchor,o=(0,C.Z)(n,K),t=l.useRef(null),r=l.useRef(null);return l.useEffect((function(){var n,e;null!==(n=t.current)&&void 0!==n&&null!==(e=n.parent)&&void 0!==e&&e.parent&&(r.current=t.current.parent,t.current.parent.parent.add(t.current))}),[]),(0,c.x)((function(){if(r.current){W.setFromObject(r.current),W.getSize(X);var n=r.current.position,o=n.pX,i=n.pY,s=n.pZ;o&&i&&s?t.current.position.set(r.current.position.x+X.x*e[0]/2,r.current.position.y+X.y*e[1]/2,r.current.position.z+X.z*e[2]/2):t.current.position.set(r.current.geometry.boundingBox.min.x+e[0],r.current.geometry.boundingBox.min.y+e[1],r.current.geometry.boundingBox.min.z+e[2])}})),(0,v.jsx)("group",(0,p.Z)({ref:t},o))};function $(n){var e=Object.assign({},n),o=U,t=_,r=Y,i=I,c=q;return(0,v.jsxs)(v.Fragment,{children:[e.node.name===o&&e.pump["Engine Load"]?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(V.J,{iconName:"LightningBolt"}),e.pump["Engine Load"].toFixed(1)+J.Y["Engine Load"]]})})}):null,e.node.name===t&&e.pump["Trans Gear"]?(0,v.jsx)(D.L,{anchor:[1,1,1],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(V.J,{iconName:"Settings"}),e.pump["Trans Gear"].toFixed(1)+J.Y["Trans Gear"]]})})}):null,e.node.name===i&&e.pump["Horse Power"]?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsx)("div",{className:"content",children:e.pump["Horse Power"].toFixed(1)+J.Y["Calc Horse Power"]})})}):null,e.node.name===r&&e.pump["Pump Rate"]?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsxs)("div",{className:"content",children:[(0,v.jsx)(V.J,{iconName:"Drop"}),e.pump["Pump Rate"].toFixed(1)+J.Y["Pump Rate"]]})})}):null,e.node.name===c?(0,v.jsx)(Q,{anchor:[0,0,0],children:(0,v.jsx)(s.V,{children:(0,v.jsx)("div",{className:"chassis-content",children:e.pump["Pump Position"]})})}):null]})}function nn(n){var e=Object.assign({},n),o=(0,l.useRef)(),r=(0,l.useState)(),i=(0,t.Z)(r,2),s=i[0],c=i[1];if((0,f.j)(s,"pointer"),(0,A.o)(o),!(e.index>100)){return"mesh"!==e.node.type.toLowerCase()?(0,v.jsx)("group",{rotation:e.node.rotation,position:e.node.position,scale:e.node.scale,frustumCulled:!0,children:e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(nn,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)}))}):"mesh"===e.node.type.toLowerCase()?(0,v.jsxs)("mesh",{geometry:e.node.geometry,material:e.node.material,rotation:e.node.rotation,position:e.node.position,ref:o,scale:e.node.scale,onPointerOver:function(n){n.stopPropagation(),e.show&&(e.onHover(o),c(!0))},onPointerOut:function(n){n.stopPropagation(),e.show&&(c(!1),e.onHover(null))},onClick:function(n){n.stopPropagation(),e.show&&(1===n.detail?e.onClick(!0):e.onDoubleClick())},frustumCulled:!0,children:[e.node.children.length>0&&e.node.children.map((function(n,o){return(0,v.jsx)(nn,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o+e.index}),o+n.name)})),e.isActive&&e.show?(0,v.jsx)($,(0,p.Z)({},e)):null]}):void 0}}function en(n){var e=Object.assign({},n),o=(0,l.useRef)();return(0,c.x)((function(){o.current.visible=e.show})),e.fast?(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,children:(0,v.jsx)(T.P,{box:!0,multiple:!0,onChange:function(n){n[0]&&(e.onHover(n[0]),e.onClick(!0))},children:(0,v.jsx)("primitive",{object:e.scene})})})):(0,v.jsx)("group",(0,p.Z)((0,p.Z)({ref:o},e),{},{dispose:null,frustumCulled:!0,children:e.scene.children.map((function(n,o){return(0,v.jsx)(nn,(0,p.Z)((0,p.Z)({},e),{},{node:n,index:o}),o+n.name)}))}))}var on=function(n){var e=(0,x.tq)(),o=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useRef)(null),m=(0,l.useRef)(null),j=(0,l.useState)(null),P=(0,t.Z)(j,2),Z=P[0],y=P[1],C=(0,l.useState)(null),S=(0,t.Z)(C,2),b=S[0],w=S[1],R=(0,l.useState)(null),L=(0,t.Z)(R,2),T=L[0],A=L[1],V=(0,i.L)(a.d.TRUCK).scene,D=(0,c.w)((function(n){return n.camera})),U=(0,c.w)((function(n){return n.controls})),_=n.pumpsData.length?n.pumpsData:d.r.slice(0,10),I=function(n,e){var o=(0,x.tq)();return{copiedScene:(0,l.useMemo)((function(){var e=[];return n.traverse((function(n){var t;if(n.isMesh){var r,i=n.material,s=null===(t=n.geometry)||void 0===t?void 0:t.boundingSphere.radius;s>10&&s<30&&e.push(n),n.material=o||s<1e5?new h.MeshBasicMaterial({color:i.color,reflectivity:1}):new h.MeshStandardMaterial({color:i.color,metalness:1,emissive:1,roughness:null!==(r=i.roughness)&&void 0!==r?r:.5})}})),e.forEach((function(n){n.removeFromParent()})),n.clone()}),[n.uuid])}}(V),Y=I.copiedScene,q=(0,c.w)((function(n){return n.invalidate})),J=function(n){return!T||n["Pump Position"]===T["Pump Position"]};(0,l.useEffect)((function(){T&&n.setSelected(T["Pump Position"])}),[T,n]);var K=function(e){return e["Pump Position"]===n.selected},W=_.length/2,X=Z?[Z]:void 0;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(k,{children:[(0,v.jsx)(l.Suspense,{fallback:null,children:_.map((function(e,o){var r=function(n,e,o){return[n<e?15:-15,0+10*o,e%n*5]}(W,o,T&&e["Pump Position"]===T["Pump Position"]),i=(0,t.Z)(r,3),s=i[0],c=i[1],u=i[2];return(0,v.jsx)(en,{position:[s,c,u],onClick:function(){n.setSelected(e["Pump Position"]),q()},onDoubleClick:function(){if(J(e)){var o;null===U||void 0===U||U.saveState();var t={};t.position=D.position.clone(),t.rotation=D.rotation.clone(),t.controlCenter=null===U||void 0===U||null===(o=U.target)||void 0===o?void 0:o.clone(),w(t),n.setSelected(e["Pump Position"]),A(e),D.position.set(4.5*s,c+9,3*u),q()}},onHover:y,isActive:n.selectionOptions["Select All"]||K(e),show:J(e),isFocussed:T&&e["Pump Position"]===T["Pump Position"],scene:Y,pump:e,setAlertedParts:n.setAlertedParts,rotation:W<o?H:E,cloudGlbURL:a.d.TRUCK,scale:T?2:1},e["Pump Position"])}))}),T?null:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(g,{ref:o,cloudGlbURL:a.d.MISSILE,assetId:4347,onClick:function(n){return null},onHover:y,position:z}),(0,v.jsx)(M,{ref:p,name:"missile",position:F,connectedTo:[f]}),(0,v.jsx)(g,{ref:f,cloudGlbURL:a.d.WELL_HEAD,onClick:function(n){return null},onHover:y,position:B,scale:5}),(0,v.jsx)(g,{ref:m,cloudGlbURL:a.d.DATA_VAN,onClick:function(n){return null},onHover:y,position:O,rotation:G})]}),e||T?null:(0,v.jsx)(g,{cloudGlbURL:a.d.BLENDER,onClick:function(n){return null},fast:!0,onHover:y,position:N,rotation:E})]}),(0,v.jsx)(u.xC,{multisampling:8,autoClear:!1,children:(0,v.jsx)(u.bw,{selection:X,selectionLayer:1,visibleEdgeColor:"white",edgeStrength:5})}),(0,v.jsx)(s.V,{left:!0,portal:n.domNodeRef,children:T?(0,v.jsx)("div",{children:(0,v.jsx)(r.h,{className:"text-neutralPrimary bg-themeLighterAlt",iconProps:{iconName:"Back"},onClick:function(){A(null),D.position.set(b.position.x,b.position.y,b.position.z),null===U||void 0===U||U.reset(),q(),q()},text:"Back to Frac site"})}):null})]})}}}]);
//# sourceMappingURL=605.b898d488.chunk.js.map